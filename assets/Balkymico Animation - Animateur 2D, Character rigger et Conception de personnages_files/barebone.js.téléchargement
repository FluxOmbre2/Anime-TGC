/* VimeoPlayer - v4.40.35 - 2025-04-03 - https://player.vimeo.com/NOTICE.txt */
!function(t){"use strict";var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function i(t,n,i){return t(i={path:n,exports:{},require:function(t,n){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==n&&i.path)}},i.exports),i.exports}var e=i((function(t,i){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.6+9869a4bc
 */
t.exports=function(){function t(t){return"function"==typeof t}var i=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},e=0,r=void 0,s=void 0,o=function(t,n){d[e]=t,d[e+1]=n,2===(e+=2)&&(s?s(v):p())};var u="undefined"!=typeof window?window:void 0,c=u||{},a=c.MutationObserver||c.WebKitMutationObserver,h="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function l(){var t=setTimeout;return function(){return t(v,1)}}var d=new Array(1e3);function v(){for(var t=0;t<e;t+=2)(0,d[t])(d[t+1]),d[t]=void 0,d[t+1]=void 0;e=0}var p=void 0;function E(t,n){var i=this,e=new this.constructor(T);void 0===e[m]&&P(e);var r=i.t;if(r){var s=arguments[r-1];o((function(){return D(r,e,s,i.i)}))}else k(i,e,t,n);return e}function y(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var n=new this(T);return R(n,t),n}p=h?function(){return process.nextTick(v)}:a?function(){var t=0,n=new a(v),i=document.createTextNode("");return n.observe(i,{characterData:!0}),function(){i.data=t=++t%2}}():f?function(){var t=new MessageChannel;return t.port1.onmessage=v,function(){return t.port2.postMessage(0)}}():void 0===u?function(){try{var t=Function("return this")().require("vertx");return void 0!==(r=t.runOnLoop||t.runOnContext)?function(){r(v)}:l()}catch(t){return l()}}():l();var m=Math.random().toString(36).substring(2);function T(){}var b=void 0,w=1,g=2,A={error:null};function S(t){try{return t.then}catch(t){return A.error=t,A}}function _(n,i,e){i.constructor===n.constructor&&e===E&&i.constructor.resolve===y?function(t,n){n.t===w?I(t,n.i):n.t===g?N(t,n.i):k(n,void 0,(function(n){return R(t,n)}),(function(n){return N(t,n)}))}(n,i):e===A?(N(n,A.error),A.error=null):void 0===e?I(n,i):t(e)?function(t,n,i){o((function(t){var e=!1,r=function(t,n,i,e){try{t.call(n,i,e)}catch(t){return t}}(i,n,(function(i){e||(e=!0,n!==i?R(t,i):I(t,i))}),(function(n){e||(e=!0,N(t,n))}),t.o);!e&&r&&(e=!0,N(t,r))}),t)}(n,i,e):I(n,i)}function R(t,n){t===n?N(t,new TypeError("You cannot resolve a promise with itself")):function(t){var n=typeof t;return null!==t&&("object"===n||"function"===n)}(n)?_(t,n,S(n)):I(t,n)}function O(t){t.u&&t.u(t.i),M(t)}function I(t,n){t.t===b&&(t.i=n,t.t=w,0!==t.T.length&&o(M,t))}function N(t,n){t.t===b&&(t.t=g,t.i=n,o(O,t))}function k(t,n,i,e){var r=t.T,s=r.length;t.u=null,r[s]=n,r[s+w]=i,r[s+g]=e,0===s&&t.t&&o(M,t)}function M(t){var n=t.T,i=t.t;if(0!==n.length){for(var e=void 0,r=void 0,s=t.i,o=0;o<n.length;o+=3)e=n[o],r=n[o+i],e?D(i,e,r,s):r(s);t.T.length=0}}function D(n,i,e,r){var s=t(e),o=void 0,u=void 0,c=void 0,a=void 0;if(s){if((o=function(t,n){try{return t(n)}catch(t){return A.error=t,A}}(e,r))===A?(a=!0,u=o.error,o.error=null):c=!0,i===o)return void N(i,new TypeError("A promises callback cannot return that same promise."))}else o=r,c=!0;i.t!==b||(s&&c?R(i,o):a?N(i,u):n===w?I(i,o):n===g&&N(i,o))}var X=0;function P(t){t[m]=X++,t.t=void 0,t.i=void 0,t.T=[]}var C=function(){function t(t,n){this.l=t,this.promise=new t(T),this.promise[m]||P(this.promise),i(n)?(this.length=n.length,this.v=n.length,this.i=new Array(this.length),0===this.length?I(this.promise,this.i):(this.length=this.length||0,this.h(n),0===this.v&&I(this.promise,this.i))):N(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype.h=function(t){for(var n=0;this.t===b&&n<t.length;n++)this.A(t[n],n)},t.prototype.A=function(t,n){var i=this.l,e=i.resolve;if(e===y){var r=S(t);if(r===E&&t.t!==b)this.S(t.t,n,t.i);else if("function"!=typeof r)this.v--,this.i[n]=t;else if(i===j){var s=new i(T);_(s,t,r),this.I(s,n)}else this.I(new i((function(n){return n(t)})),n)}else this.I(e(t),n)},t.prototype.S=function(t,n,i){var e=this.promise;e.t===b&&(this.v--,t===g?N(e,i):this.i[n]=i),0===this.v&&I(e,this.i)},t.prototype.I=function(t,n){var i=this;k(t,void 0,(function(t){return i.S(w,n,t)}),(function(t){return i.S(g,n,t)}))},t}();var j=function(){function n(t){this[m]=X++,this.i=this.t=void 0,this.T=[],T!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof n?function(t,n){try{n((function(n){R(t,n)}),(function(n){N(t,n)}))}catch(n){N(t,n)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return n.prototype.catch=function(t){return this.then(null,t)},n.prototype.finally=function(n){var i=this,e=i.constructor;return t(n)?i.then((function(t){return e.resolve(n()).then((function(){return t}))}),(function(t){return e.resolve(n()).then((function(){throw t}))})):i.then(n,n)},n}();return j.prototype.then=E,j.all=function(t){return new C(this,t).promise},j.race=function(t){var n=this;return i(t)?new n((function(i,e){for(var r=t.length,s=0;s<r;s++)n.resolve(t[s]).then(i,e)})):new n((function(t,n){return n(new TypeError("You must pass an array to race."))}))},j.resolve=y,j.reject=function(t){var n=new this(T);return N(n,t),n},j.X=function(t){s=t},j.N=function(t){o=t},j.R=o,j.polyfill=function(){var t=void 0;if(void 0!==n)t=n;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var i=t.Promise;if(i){var e=null;try{e=Object.prototype.toString.call(i.resolve())}catch(t){}if("[object Promise]"===e&&!i.cast)return}t.Promise=j},j.Promise=j,j}()}));const r=window.Promise||e;function s(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,e=Array(n);i<n;i++)e[i]=t[i];return e}function o(t,n,i){if("function"==typeof t?t===n:t.has(n))return arguments.length<3?n:i;throw new TypeError("Private element is not present on this object")}function u(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function c(t,n){return t.get(o(t,n))}function a(t,n,i){u(t,n),n.set(t,i)}function h(t,n,i){return t.set(o(t,n),i),i}function f(t,n){u(t,n),n.add(t)}function l(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,g(e.key),e)}}function d(t,n,i){return n&&l(t.prototype,n),i&&l(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function v(t,n,i){return(n=g(n))in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},p(t)}function E(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,b(t,n)}function y(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(y=function(){return!!t})()}function m(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),i.push.apply(i,e)}return i}function T(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?m(Object(i),!0).forEach((function(n){v(t,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))}))}return t}function b(t,n){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},b(t,n)}function w(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return s(t,n);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t){var n=function(t){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof n?n:n+""}function A(t){var n="function"==typeof Map?new Map:void 0;return A=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(n){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,i)}function i(){return function(t,n,i){if(y())return Reflect.construct.apply(null,arguments);var e=[null];e.push.apply(e,n);var r=new(t.bind.apply(t,e));return i&&b(r,i.prototype),r}(t,arguments,p(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),b(i,t)},A(t)}r.allSettled||(r.allSettled=t=>r.all(t.map((t=>t.then((t=>({status:"fulfilled",value:t}))).catch((t=>({status:"rejected",reason:t})))))));var S,_,R,O,I={object:!0,symbol:!0},N=function(t){return null!=t},k=Object.keys,M=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}()?Object.keys:function(t){return k(N(t)?Object(t):t)},D=Math.max,X=function(){var t,n=Object.assign;return"function"==typeof n&&(n(t={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}()?Object.assign:function(t,n){var i,e,r,s=D(arguments.length,2);for(t=Object(function(t){if(!N(t))throw new TypeError("Cannot use null or undefined");return t}(t)),r=function(e){try{t[e]=n[e]}catch(t){i||(i=t)}},e=1;e<s;++e)M(n=arguments[e]).forEach(r);if(void 0!==i)throw i;return t},P=Array.prototype.forEach,C=Object.create,j=function(t){var n=C(null);return P.call(arguments,(function(t){N(t)&&function(t,n){var i;for(i in t)n[i]=t[i]}(Object(t),n)})),n},L=function(t){return"function"==typeof t},U="razdwatrzy",x=String.prototype.indexOf,F="function"==typeof U.contains&&!0===U.contains("dwa")&&!1===U.contains("foo")?String.prototype.contains:function(t){return x.call(this,t,arguments[1])>-1},$=i((function(t){var n;n=t.exports=function(t,n){var i,e,r,s,o;return arguments.length<2||"string"!=typeof t?(s=n,n=t,t=null):s=arguments[2],null==t?(i=r=!0,e=!1):(i=F.call(t,"c"),e=F.call(t,"e"),r=F.call(t,"w")),o={value:n,configurable:i,enumerable:e,writable:r},s?X(j(s),o):o},n.gs=function(t,n,i){var e,r,s,o;return"string"!=typeof t?(s=i,i=n,n=t,t=null):s=arguments[3],null==n?n=void 0:L(n)?null==i?i=void 0:L(i)||(s=i,i=void 0):(s=n,n=i=void 0),null==t?(e=!0,r=!1):(e=F.call(t,"c"),r=F.call(t,"e")),o={get:n,set:i,configurable:e,enumerable:r},s?X(j(s),o):o}})),H=function(t){if(!function(t){return!!t&&("symbol"==typeof t||!!t.constructor&&"Symbol"===t.constructor.name&&"Symbol"===t[t.constructor.toStringTag])}(t))throw new TypeError(t+" is not a symbol");return t},B=Object.create,V=Object.defineProperties,G=Object.defineProperty,Y=Object.prototype,K=B(null);if("function"==typeof Symbol){S=Symbol;try{String(S()),O=!0}catch(t){}}var W=function(){var t=B(null);return function(n){for(var i,e,r=0;t[n+(r||"")];)++r;return t[n+=r||""]=!0,G(Y,i="@@"+n,$.gs(null,(function(t){e||(e=!0,G(this,i,$(t)),e=!1)}))),i}}();R=function(t){if(this instanceof R)throw new TypeError("TypeError: Symbol is not a constructor");return _(t)};var q=_=function t(n){var i;if(this instanceof t)throw new TypeError("TypeError: Symbol is not a constructor");return O?S(n):(i=B(R.prototype),n=void 0===n?"":String(n),V(i,{p:$("",n),O:$("",W(n))}))};V(_,{for:$((function(t){return K[t]?K[t]:K[t]=_(String(t))})),keyFor:$((function(t){var n;for(n in H(t),K)if(K[n]===t)return n})),hasInstance:$("",S&&S.hasInstance||_("hasInstance")),isConcatSpreadable:$("",S&&S.isConcatSpreadable||_("isConcatSpreadable")),iterator:$("",S&&S.iterator||_("iterator")),match:$("",S&&S.match||_("match")),replace:$("",S&&S.replace||_("replace")),search:$("",S&&S.search||_("search")),species:$("",S&&S.species||_("species")),split:$("",S&&S.split||_("split")),toPrimitive:$("",S&&S.toPrimitive||_("toPrimitive")),toStringTag:$("",S&&S.toStringTag||_("toStringTag")),unscopables:$("",S&&S.unscopables||_("unscopables"))}),V(R.prototype,{constructor:$(_),toString:$("",(function(){return this.O}))}),V(_.prototype,{toString:$((function(){return"Symbol ("+H(this).p+")"})),valueOf:$((function(){return H(this)}))}),G(_.prototype,_.toPrimitive,$("",(function(){var t=H(this);return"symbol"==typeof t?t:t.toString()}))),G(_.prototype,_.toStringTag,$("c","Symbol")),G(R.prototype,_.toStringTag,$("c",_.prototype[_.toStringTag])),G(R.prototype,_.toPrimitive,$("c",_.prototype[_.toPrimitive]));var z=function(){var t;if("function"!=typeof Symbol)return!1;t=Symbol("test symbol");try{String(t)}catch(t){return!1}return!!I[typeof Symbol.iterator]&&!!I[typeof Symbol.toPrimitive]&&!!I[typeof Symbol.toStringTag]}()?Symbol:q;if(function(){for(var t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n){var i=t[n];window.requestAnimationFrame=window[i+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i+"CancelAnimationFrame"]||window[i+"CancelRequestAnimationFrame"]}!/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)&&window.requestAnimationFrame&&window.cancelAnimationFrame||(window.requestAnimationFrame=function(t){return setTimeout(t,0)},window.cancelAnimationFrame=clearTimeout)}(),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),"undefined"!=typeof DOMTokenList&&!function(){const t=document.createElement("div");return t.classList.toggle("test-class",!1),!t.classList.contains("test-class")}()){const t=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(n,i){!0!==i?!1!==i?t.call(this,n):this.remove(n):this.add(n)}}function Q(t,n){return t===n||t!=t&&n!=n}function J(t,n){for(var i=t.length;i--;)if(Q(t[i][0],n))return i;return-1}"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),i=1;i<arguments.length;i++){var e=arguments[i];if(null!=e)for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r])}return n}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){for(var n=Object(this),i=n.length>>>0,e=arguments[1],r=0;r<i;){var s=n[r];if(t.call(e,s,r,n))return s;r++}}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){for(var n=Object(this),i=n.length>>>0,e=arguments[1],r=0;r<i;){var s=n[r];if(t.call(e,s,r,n))return r;r++}return-1}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,n){if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),e=i.length>>>0;if(0===e)return!1;var r=0|n,s=Math.max(r>=0?r:e-Math.abs(r),0);function o(t,n){return t===n||"number"==typeof t&&"number"==typeof n&&isNaN(t)&&isNaN(n)}for(;s<e;){if(o(i[s],t))return!0;s++}return!1}}),String.prototype.includes||(String.prototype.includes=function(t,n){return"number"!=typeof n&&(n=0),!(n+t.length>this.length)&&-1!==this.indexOf(t,n)}),Object.values||(Object.values=t=>Object.keys(t).map((n=>t[n]))),String.prototype.startsWith||(String.prototype.startsWith=function(t,n){return this.slice(n||0,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t,n){return(void 0===n||n>this.length)&&(n=this.length),this.substring(n-t.length,n)===t}),Number.isNaN=Number.isNaN||function(t){return"number"==typeof t&&t!=t},void 0===Number.parseFloat&&(Number.parseFloat=window.parseFloat),void 0===Number.parseInt&&(Number.parseInt=window.parseInt),void 0===Number.isFinite&&(Number.isFinite=function(t){return"number"==typeof t&&isFinite(t)}),Array.prototype.entries||(Array.prototype.entries=function(){var t,n=this,i=0;function e(){}return e.prototype.next=function(){return i>n.length-1&&(t=!0),t?{value:void 0,done:!0}:{value:[i,n[i++]],done:!1}},e.prototype[z.iterator]=function(){return this},new e}),Array.prototype[z.iterator]||(Array.prototype[z.iterator]=function(){var t,n=this,i=0;function e(){}return e.prototype.next=function(){return i>n.length-1&&(t=!0),t?{value:void 0,done:!0}:{value:n[i++],done:!1}},e.prototype[z.iterator]=function(){return this},new e}),Object.entries||(Object.entries=function(t){for(var n=Object.keys(t),i=n.length,e=new Array(i);i--;)e[i]=[n[i],t[n[i]]];return e}),Object.is||Object.defineProperty(Object,"is",{value:function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}}),"classList"in SVGElement.prototype||Object.defineProperty(SVGElement.prototype,"classList",{get:function(){var t=this;return{contains:function(n){return-1!==t.className.baseVal.split(" ").indexOf(n)},add:function(n){var i=(t.getAttribute("class")+" "+n).trim();return t.setAttribute("class",i)},remove:function(n){var i=t.getAttribute("class")||"",e=new RegExp("(?:^|\\s)"+n+"(?!\\S)","g");i=i.replace(e,"").trim(),t.setAttribute("class",i)},toggle:function(t){this.contains(t)?this.remove(t):this.add(t)}}}});var Z=Array.prototype.splice;function tt(t){var n=-1,i=null==t?0:t.length;for(this.clear();++n<i;){var e=t[n];this.set(e[0],e[1])}}tt.prototype.clear=function(){this.it=[],this.size=0},tt.prototype.delete=function(t){var n=this.it,i=J(n,t);return!(i<0||(i==n.length-1?n.pop():Z.call(n,i,1),--this.size,0))},tt.prototype.get=function(t){var n=this.it,i=J(n,t);return i<0?void 0:n[i][1]},tt.prototype.has=function(t){return J(this.it,t)>-1},tt.prototype.set=function(t,n){var i=this.it,e=J(i,t);return e<0?(++this.size,i.push([t,n])):i[e][1]=n,this};var nt="object"==typeof global&&global&&global.Object===Object&&global,it="object"==typeof self&&self&&self.Object===Object&&self,et=nt||it||Function("return this")(),rt=et.Symbol,st=Object.prototype,ot=st.hasOwnProperty,ut=st.toString,ct=rt?rt.toStringTag:void 0,at=Object.prototype.toString,ht=rt?rt.toStringTag:void 0;function ft(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":ht&&ht in Object(t)?function(t){var n=ot.call(t,ct),i=t[ct];try{t[ct]=void 0;var e=!0}catch(t){}var r=ut.call(t);return e&&(n?t[ct]=i:delete t[ct]),r}(t):function(t){return at.call(t)}(t)}function lt(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)}function dt(t){if(!lt(t))return!1;var n=ft(t);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n}var vt=et["et"],pt=function(){var t=/[^.]+$/.exec(vt&&vt.keys&&vt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Et=Function.prototype.toString;function yt(t){if(null!=t){try{return Et.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var mt=/^\[object .+?Constructor\]$/,Tt=Function.prototype,bt=Object.prototype,wt=Tt.toString,gt=bt.hasOwnProperty,At=RegExp("^"+wt.call(gt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function St(t,n){var i=function(t,n){return null==t?void 0:t[n]}(t,n);return function(t){return!(!lt(t)||function(t){return!!pt&&pt in t}(t))&&(dt(t)?At:mt).test(yt(t))}(i)?i:void 0}var _t=St(et,"Map"),Rt=St(Object,"create"),Ot=Object.prototype.hasOwnProperty,It=Object.prototype.hasOwnProperty;function Nt(t){var n=-1,i=null==t?0:t.length;for(this.clear();++n<i;){var e=t[n];this.set(e[0],e[1])}}function kt(t,n){var i=t.it;return function(t){var n=typeof t;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t}(n)?i["string"==typeof n?"string":"hash"]:i.map}function Mt(t){var n=-1,i=null==t?0:t.length;for(this.clear();++n<i;){var e=t[n];this.set(e[0],e[1])}}function Dt(t){var n=this.it=new tt(t);this.size=n.size}Nt.prototype.clear=function(){this.it=Rt?Rt(null):{},this.size=0},Nt.prototype.delete=function(t){var n=this.has(t)&&delete this.it[t];return this.size-=n?1:0,n},Nt.prototype.get=function(t){var n=this.it;if(Rt){var i=n[t];return"__lodash_hash_undefined__"===i?void 0:i}return Ot.call(n,t)?n[t]:void 0},Nt.prototype.has=function(t){var n=this.it;return Rt?void 0!==n[t]:It.call(n,t)},Nt.prototype.set=function(t,n){var i=this.it;return this.size+=this.has(t)?0:1,i[t]=Rt&&void 0===n?"__lodash_hash_undefined__":n,this},Mt.prototype.clear=function(){this.size=0,this.it={hash:new Nt,map:new(_t||tt),string:new Nt}},Mt.prototype.delete=function(t){var n=kt(this,t).delete(t);return this.size-=n?1:0,n},Mt.prototype.get=function(t){return kt(this,t).get(t)},Mt.prototype.has=function(t){return kt(this,t).has(t)},Mt.prototype.set=function(t,n){var i=kt(this,t),e=i.size;return i.set(t,n),this.size+=i.size==e?0:1,this},Dt.prototype.clear=function(){this.it=new tt,this.size=0},Dt.prototype.delete=function(t){var n=this.it,i=n.delete(t);return this.size=n.size,i},Dt.prototype.get=function(t){return this.it.get(t)},Dt.prototype.has=function(t){return this.it.has(t)},Dt.prototype.set=function(t,n){var i=this.it;if(i instanceof tt){var e=i.it;if(!_t||e.length<199)return e.push([t,n]),this.size=++i.size,this;i=this.it=new Mt(e)}return i.set(t,n),this.size=i.size,this};var Xt=function(){try{var t=St(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();function Pt(t,n,i){"__proto__"==n&&Xt?Xt(t,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[n]=i}var Ct=Object.prototype.hasOwnProperty;function jt(t,n,i){var e=t[n];Ct.call(t,n)&&Q(e,i)&&(void 0!==i||n in t)||Pt(t,n,i)}function Lt(t,n,i,e){var r=!i;i||(i={});for(var s=-1,o=n.length;++s<o;){var u=n[s],c=e?e(i[u],t[u],u,i,t):void 0;void 0===c&&(c=t[u]),r?Pt(i,u,c):jt(i,u,c)}return i}function Ut(t){return null!=t&&"object"==typeof t}function xt(t){return Ut(t)&&"[object Arguments]"==ft(t)}var Ft=Object.prototype,$t=Ft.hasOwnProperty,Ht=Ft.propertyIsEnumerable,Bt=xt(function(){return arguments}())?xt:function(t){return Ut(t)&&$t.call(t,"callee")&&!Ht.call(t,"callee")},Vt=Array.isArray,Gt="object"==typeof t&&t&&!t.nodeType&&t,Yt=Gt&&"object"==typeof module&&module&&!module.nodeType&&module,Kt=Yt&&Yt.exports===Gt?et.Buffer:void 0,Wt=(Kt?Kt.isBuffer:void 0)||function(){return!1},qt=/^(?:0|[1-9]\d*)$/;function zt(t,n){var i=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==i||"symbol"!=i&&qt.test(t))&&t>-1&&t%1==0&&t<n}function Qt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}var Jt={};function Zt(t){return function(n){return t(n)}}Jt["[object Float32Array]"]=Jt["[object Float64Array]"]=Jt["[object Int8Array]"]=Jt["[object Int16Array]"]=Jt["[object Int32Array]"]=Jt["[object Uint8Array]"]=Jt["[object Uint8ClampedArray]"]=Jt["[object Uint16Array]"]=Jt["[object Uint32Array]"]=!0,Jt["[object Arguments]"]=Jt["[object Array]"]=Jt["[object ArrayBuffer]"]=Jt["[object Boolean]"]=Jt["[object DataView]"]=Jt["[object Date]"]=Jt["[object Error]"]=Jt["[object Function]"]=Jt["[object Map]"]=Jt["[object Number]"]=Jt["[object Object]"]=Jt["[object RegExp]"]=Jt["[object Set]"]=Jt["[object String]"]=Jt["[object WeakMap]"]=!1;var tn="object"==typeof t&&t&&!t.nodeType&&t,nn=tn&&"object"==typeof module&&module&&!module.nodeType&&module,en=nn&&nn.exports===tn&&nt.process,rn=function(){try{return nn&&nn.require&&nn.require("util").types||en&&en.binding&&en.binding("util")}catch(t){}}(),sn=rn&&rn.isTypedArray,on=sn?Zt(sn):function(t){return Ut(t)&&Qt(t.length)&&!!Jt[ft(t)]},un=Object.prototype.hasOwnProperty;function cn(t,n){var i=Vt(t),e=!i&&Bt(t),r=!i&&!e&&Wt(t),s=!i&&!e&&!r&&on(t),o=i||e||r||s,u=o?function(t,n){for(var i=-1,e=Array(t);++i<t;)e[i]=n(i);return e}(t.length,String):[],c=u.length;for(var a in t)!n&&!un.call(t,a)||o&&("length"==a||r&&("offset"==a||"parent"==a)||s&&("buffer"==a||"byteLength"==a||"byteOffset"==a)||zt(a,c))||u.push(a);return u}var an=Object.prototype;function hn(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||an)}function fn(t,n){return function(i){return t(n(i))}}var ln=fn(Object.keys,Object),dn=Object.prototype.hasOwnProperty;function vn(t){if(!hn(t))return ln(t);var n=[];for(var i in Object(t))dn.call(t,i)&&"constructor"!=i&&n.push(i);return n}function pn(t){return null!=t&&Qt(t.length)&&!dt(t)}function En(t){return pn(t)?cn(t):vn(t)}var yn=Object.prototype.hasOwnProperty;function mn(t){return pn(t)?cn(t,!0):function(t){if(!lt(t))return function(t){var n=[];if(null!=t)for(var i in Object(t))n.push(i);return n}(t);var n=hn(t),i=[];for(var e in t)("constructor"!=e||!n&&yn.call(t,e))&&i.push(e);return i}(t)}var Tn="object"==typeof t&&t&&!t.nodeType&&t,bn=Tn&&"object"==typeof module&&module&&!module.nodeType&&module,wn=bn&&bn.exports===Tn?et.Buffer:void 0,gn=wn?wn.allocUnsafe:void 0;function An(t,n){if(n)return t.slice();var i=t.length,e=gn?gn(i):new t.constructor(i);return t.copy(e),e}function Sn(t,n){var i=-1,e=t.length;for(n||(n=Array(e));++i<e;)n[i]=t[i];return n}function _n(){return[]}var Rn=Object.prototype.propertyIsEnumerable,On=Object.getOwnPropertySymbols,In=On?function(t){return null==t?[]:(t=Object(t),function(t,n){for(var i=-1,e=null==t?0:t.length,r=0,s=[];++i<e;){var o=t[i];n(o)&&(s[r++]=o)}return s}(On(t),(function(n){return Rn.call(t,n)})))}:_n;function Nn(t,n){for(var i=-1,e=n.length,r=t.length;++i<e;)t[r+i]=n[i];return t}var kn=fn(Object.getPrototypeOf,Object),Mn=Object.getOwnPropertySymbols?function(t){for(var n=[];t;)Nn(n,In(t)),t=kn(t);return n}:_n;function Dn(t,n,i){var e=n(t);return Vt(t)?e:Nn(e,i(t))}function Xn(t){return Dn(t,En,In)}function Pn(t){return Dn(t,mn,Mn)}var Cn=St(et,"DataView"),jn=St(et,"Promise"),Ln=St(et,"Set"),Un=St(et,"WeakMap"),xn="[object Map]",Fn="[object Promise]",$n="[object Set]",Hn="[object WeakMap]",Bn="[object DataView]",Vn=yt(Cn),Gn=yt(_t),Yn=yt(jn),Kn=yt(Ln),Wn=yt(Un),qn=ft;(Cn&&qn(new Cn(new ArrayBuffer(1)))!=Bn||_t&&qn(new _t)!=xn||jn&&qn(jn.resolve())!=Fn||Ln&&qn(new Ln)!=$n||Un&&qn(new Un)!=Hn)&&(qn=function(t){var n=ft(t),i="[object Object]"==n?t.constructor:void 0,e=i?yt(i):"";if(e)switch(e){case Vn:return Bn;case Gn:return xn;case Yn:return Fn;case Kn:return $n;case Wn:return Hn}return n});var zn=qn,Qn=Object.prototype.hasOwnProperty,Jn=et.Uint8Array;function Zn(t){var n=new t.constructor(t.byteLength);return new Jn(n).set(new Jn(t)),n}var ti=/\w*$/,ni=rt?rt.prototype:void 0,ii=ni?ni.valueOf:void 0;function ei(t,n){var i=n?Zn(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}var ri=Object.create,si=function(){function t(){}return function(n){if(!lt(n))return{};if(ri)return ri(n);t.prototype=n;var i=new t;return t.prototype=void 0,i}}();function oi(t){return"function"!=typeof t.constructor||hn(t)?{}:si(kn(t))}var ui=rn&&rn.isMap,ci=ui?Zt(ui):function(t){return Ut(t)&&"[object Map]"==zn(t)},ai=rn&&rn.isSet,hi=ai?Zt(ai):function(t){return Ut(t)&&"[object Set]"==zn(t)},fi="[object Arguments]",li="[object Function]",di="[object Object]",vi={};function pi(t,n,i,e,r,s){var o,u=1&n,c=2&n,a=4&n;if(i&&(o=r?i(t,e,r,s):i(t)),void 0!==o)return o;if(!lt(t))return t;var h=Vt(t);if(h){if(o=function(t){var n=t.length,i=new t.constructor(n);return n&&"string"==typeof t[0]&&Qn.call(t,"index")&&(i.index=t.index,i.input=t.input),i}(t),!u)return Sn(t,o)}else{var f=zn(t),l=f==li||"[object GeneratorFunction]"==f;if(Wt(t))return An(t,u);if(f==di||f==fi||l&&!r){if(o=c||l?{}:oi(t),!u)return c?function(t,n){return Lt(t,Mn(t),n)}(t,function(t,n){return t&&Lt(n,mn(n),t)}(o,t)):function(t,n){return Lt(t,In(t),n)}(t,function(t,n){return t&&Lt(n,En(n),t)}(o,t))}else{if(!vi[f])return r?t:{};o=function(t,n,i){var e=t.constructor;switch(n){case"[object ArrayBuffer]":return Zn(t);case"[object Boolean]":case"[object Date]":return new e(+t);case"[object DataView]":return function(t,n){var i=n?Zn(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}(t,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return ei(t,i);case"[object Map]":case"[object Set]":return new e;case"[object Number]":case"[object String]":return new e(t);case"[object RegExp]":return function(t){var n=new t.constructor(t.source,ti.exec(t));return n.lastIndex=t.lastIndex,n}(t);case"[object Symbol]":return function(t){return ii?Object(ii.call(t)):{}}(t)}}(t,f,u)}}s||(s=new Dt);var d=s.get(t);if(d)return d;s.set(t,o),hi(t)?t.forEach((function(e){o.add(pi(e,n,i,e,t,s))})):ci(t)&&t.forEach((function(e,r){o.set(r,pi(e,n,i,r,t,s))}));var v=h?void 0:(a?c?Pn:Xn:c?mn:En)(t);return function(t,n){for(var i=-1,e=null==t?0:t.length;++i<e&&!1!==n(t[i],i););}(v||t,(function(e,r){v&&(e=t[r=e]),jt(o,r,pi(e,n,i,r,t,s))})),o}function Ei(t){return pi(t,5)}
/**
 * @license
 *
 * Portions of this polyfill are a derivative work of the Polymer project, which requires the following licence notice:
 *
 * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
 */vi[fi]=vi["[object Array]"]=vi["[object ArrayBuffer]"]=vi["[object DataView]"]=vi["[object Boolean]"]=vi["[object Date]"]=vi["[object Float32Array]"]=vi["[object Float64Array]"]=vi["[object Int8Array]"]=vi["[object Int16Array]"]=vi["[object Int32Array]"]=vi["[object Map]"]=vi["[object Number]"]=vi[di]=vi["[object RegExp]"]=vi["[object Set]"]=vi["[object String]"]=vi["[object Symbol]"]=vi["[object Uint8Array]"]=vi["[object Uint8ClampedArray]"]=vi["[object Uint16Array]"]=vi["[object Uint32Array]"]=!0,vi["[object Error]"]=vi[li]=vi["[object WeakMap]"]=!1;var yi=window.WeakMap||function(){var t=Object.defineProperty,n=Date.now()%1e9,i=function(){this.name="__st"+(1e9*Math.random()>>>0)+n+++"__"};return i.prototype.set=function(n,i){if("object"!=typeof n&&"function"!=typeof n)throw new TypeError("Invalid value used as weak map key");var e=n[this.name];return e&&e[0]===n?e[1]=i:t(n,this.name,{value:[n,i],writable:!0}),this},i.prototype.get=function(t){var n;return(n=t[this.name])&&n[0]===t?n[1]:void 0},i.prototype.delete=function(t){var n=t[this.name];return!(!n||n[0]!==t||(n[0]=n[1]=void 0,0))},i.prototype.has=function(t){var n=t[this.name];return!!n&&n[0]===t},i}(),mi=new yi,Ti=new yi;let bi=function(){function t(){a(this,mi,Object.create(null)),a(this,Ti,void 0),v(this,"eventNames",(()=>Object.keys(c(mi,this)))),v(this,"fire",((t,...n)=>{if(!t)throw new Error("Tried to fire an undefined event.");if(t in c(mi,this)){const i=c(mi,this)[t].slice(0);for(let t=0,e=i.length;t<e;t++)if(i[t].apply(this,n),c(Ti,this)){h(Ti,this,!1);break}}return this})),v(this,"halt",(()=>(h(Ti,this,!0),this))),v(this,"on",((t,n,i)=>{const e=[].concat(t);for(let t=0,r=e.length;t<r;t++){const r=e[t];if(!r)throw new Error("Tried to listen for an undefined event.");c(mi,this)[r]||(c(mi,this)[r]=[]),i?c(mi,this)[r].unshift(n):c(mi,this)[r].push(n)}return this})),v(this,"once",((t,n,i)=>{const e=(...i)=>{this.off(t,e),n.apply(this,i)};return e.handler=n,this.on(t,e,i)})),v(this,"off",((t,n)=>{if(!t)return h(mi,this,Object.create(null)),this;const i=[].concat(t);for(let t=0,e=i.length;t<e;t++){const e=i[t];if(!e)throw new Error("Tried to remove an undefined event.");if(e in c(mi,this)){const t=c(mi,this)[e];if(n){let i=t.indexOf(n);if(-1===i)for(let e=0,r=t.length;e<r;e++)if(t[e].handler===n){i=e;break}if(-1===i)return this;t.splice(i,1),0===t.length&&delete c(mi,this)[e]}else delete c(mi,this)[e]}}return this})),v(this,"prependOn",((t,n)=>this.on(t,n,!0)))}return t.extend=function(n){return Object.assign(n,new t),n},t}();function wi(t){return(n,...i)=>(i.forEach((i=>{for(const e in i){const r=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(n,e,Object.assign(r,t))}})),n)}const gi=wi({enumerable:!1,configurable:!0,writeable:!1}),Ai=wi({enumerable:!1,configurable:!1,writeable:!1}),Si=wi({enumerable:!0,configurable:!0,writeable:!1}),_i=t=>new r((n=>setTimeout(n,t)));let Ri="";const Oi={defer:!0,async:!0};function Ii(t,n={}){n=Object.assign({},Oi,n);let i=window.vpimport__=window.vpimport__||{cache:{}};if(i.cache[t])return i.cache[t]._promise;const e=new r((function(e,r){const s=document.getElementsByTagName("head")[0],o=document.createElement("script");o.src=Ri+t,o.defer=n.defer,o.async=n.async,o.onreadystatechange=o.onload=()=>{const n=Object.keys(i).filter((t=>"cache"!==t))[0];i.cache[t]._module=i[n],delete i[n],e(i.cache[t]._module),s.removeChild(o)},o.onerror=function(n){r(n),delete i.cache[t],s.removeChild(o)},s.appendChild(o)}));return i.cache[t]={_promise:e},e}const Ni=(t,n)=>{const i=(i,...e)=>{[`%c${t}`,n].concat(e)},e=t=>(...n)=>{i.apply(void 0,[t].concat(n))},r=e("log"),s=(...t)=>{r.apply(void 0,t)};return Object.assign(s,{log:r,warn:e("warn"),error:e("error")}),s};function ki(t,...n){return n.reduce(((t,n)=>(Object.keys(n||{}).forEach((i=>{const e=t[i],r=n[i];e&&void 0===r||(Array.isArray(r)?t[i]=(e||[]).concat(r):(t=>t&&"object"==typeof t)(r)?t[i]=ki({},e,r):t[i]=r)})),t)),t)}const Mi=(t=!1)=>t?window.MediaSource:Di,Di=void 0!==window.ManagedMediaSource?window.ManagedMediaSource:window.MediaSource;function Xi(){let t,n,i=new r(((i,e)=>{t=i,n=e}));return Object.assign(i,{resolve:t,reject:n}),i}function Pi(t,n){if(!n||!n.length)return 0;if(1===n.length&&n.end(0)-n.start(0)<1e-6)return 0;let i=0;for(let e=n.length-1;e>=0&&n.end(e)>t;--e)i+=n.end(e)-Math.max(n.start(e),t);return i}function Ci(t,n){let i=t;for(let e=0;e<n.length;e++)if(n.start(e)<=t&&n.end(e)>=t){i=n.end(e);break}return i-t}function ji(){return void 0!==window.performance&&"function"==typeof window.performance.now?window.performance.now():Date.now()}function Li(t){return ji()-t}function Ui(t){if("object"!=typeof t)return"";let n=[];for(let i in t)t.hasOwnProperty(i)&&n.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return n.length?n.join("&"):""}function xi(t){return"string"!=typeof t?{}:t.replace("?","").split("&").reduce(((t,n)=>{if(n.length>0){const i=n.substring(0,n.indexOf("=")),e=n.substring(n.indexOf("=")+1);t[i]=decodeURIComponent(e)}return t}),{})}function Fi(t,n){const i=Ui(n);let e=-1===t.indexOf("?")?"?":"&";return`${t}${i?`${e}${i}`:""}`}function $i(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(t=>(t^16*Math.random()>>t/4).toString(16)))}function Hi(t,n,i){switch(i.length){case 0:return t.call(n);case 1:return t.call(n,i[0]);case 2:return t.call(n,i[0],i[1]);case 3:return t.call(n,i[0],i[1],i[2])}return t.apply(n,i)}function Bi(t){return t}var Vi=Math.max;function Gi(t){return function(){return t}}var Yi=Xt?function(t,n){return Xt(t,"toString",{configurable:!0,enumerable:!1,value:Gi(n),writable:!0})}:Bi,Ki=Date.now,Wi=function(t){var n=0,i=0;return function(){var e=Ki(),r=16-(e-i);if(i=e,r>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}(Yi);function qi(t,n){return Wi(function(t,n,i){return n=Vi(void 0===n?t.length-1:n,0),function(){for(var e=arguments,r=-1,s=Vi(e.length-n,0),o=Array(s);++r<s;)o[r]=e[n+r];r=-1;for(var u=Array(n+1);++r<n;)u[r]=e[r];return u[n]=i(o),Hi(t,this,u)}}(t,n,Bi),t+"")}function zi(t,n,i){(void 0!==i&&!Q(t[n],i)||void 0===i&&!(n in t))&&Pt(t,n,i)}var Qi=function(t,n,i){for(var e=-1,r=Object(t),s=i(t),o=s.length;o--;){var u=s[++e];if(!1===n(r[u],u,r))break}return t},Ji=Function.prototype,Zi=Object.prototype,te=Ji.toString,ne=Zi.hasOwnProperty,ie=te.call(Object);function ee(t,n){if(("constructor"!==n||"function"!=typeof t[n])&&"__proto__"!=n)return t[n]}function re(t,n,i,e,r){t!==n&&Qi(n,(function(s,o){if(r||(r=new Dt),lt(s))!function(t,n,i,e,r,s,o){var u=ee(t,i),c=ee(n,i),a=o.get(c);if(a)zi(t,i,a);else{var h=s?s(u,c,i+"",t,n,o):void 0,f=void 0===h;if(f){var l=Vt(c),d=!l&&Wt(c),v=!l&&!d&&on(c);h=c,l||d||v?Vt(u)?h=u:function(t){return Ut(t)&&pn(t)}(u)?h=Sn(u):d?(f=!1,h=An(c,!0)):v?(f=!1,h=ei(c,!0)):h=[]:function(t){if(!Ut(t)||"[object Object]"!=ft(t))return!1;var n=kn(t);if(null===n)return!0;var i=ne.call(n,"constructor")&&n.constructor;return"function"==typeof i&&i instanceof i&&te.call(i)==ie}(c)||Bt(c)?(h=u,Bt(u)?h=function(t){return Lt(t,mn(t))}(u):lt(u)&&!dt(u)||(h=oi(c))):f=!1}f&&(o.set(c,h),r(h,c,e,s,o),o.delete(c)),zi(t,i,h)}}(t,n,o,i,re,e,r);else{var u=e?e(ee(t,o),s,o+"",t,n,r):void 0;void 0===u&&(u=s),zi(t,o,u)}}),mn)}function se(t,n,i,e,r,s){return lt(t)&&lt(n)&&(s.set(n,t),re(t,n,void 0,se,s),s.delete(n)),t}function oe(t){return qi((function(n,i){var e=-1,r=i.length,s=r>1?i[r-1]:void 0,o=r>2?i[2]:void 0;for(s=t.length>3&&"function"==typeof s?(r--,s):void 0,o&&function(t,n,i){if(!lt(i))return!1;var e=typeof n;return!!("number"==e?pn(i)&&zt(n,i.length):"string"==e&&n in i)&&Q(i[n],t)}(i[0],i[1],o)&&(s=r<3?void 0:s,r=1),n=Object(n);++e<r;){var u=i[e];u&&t(n,u,e,s)}return n}))}var ue=oe((function(t,n,i,e){re(t,n,i,e)})),ce=qi((function(t){return t.push(void 0,se),Hi(ue,void 0,t)}));let ae=function(t){function n(n){var i;return(i=t.call(this)||this).rt=!1,i.st=!1,i.ot=n,i}E(n,t);var i=n.prototype;return i.showPicker=function(){},i.getFile=function(){const t=this.constructor.displayName.replace("ExternalDisplay","");if(this.ot.externalDisplayFiles[t])return this.ot.externalDisplayFiles[t];const n=this.constructor.supportedVideoTypes,i=this.ot.files.filter((t=>-1!==n.indexOf(t.mime))).sort(((t,i)=>t.mime===i.mime?t.priority-i.priority:n.indexOf(t.mime)-n.indexOf(i.mime)));if(!i.length)throw new Error(`No files available for ${this.constructor.displayName} external display.`);return i[0]},d(n,[{key:"active",get:function(){return this.st}},{key:"available",get:function(){return this.rt}},{key:"element",get:function(){return document.createElement("div")}}],[{key:"displayName",get:function(){return"ExternalDisplay"}},{key:"supported",get:function(){return!1}},{key:"supportedVideoTypes",get:function(){return[]}}])}(bi);const he={ABORT:"abort",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",DURATION_CHANGE:"durationchange",EMPTIED:"emptied",ENDED:"ended",ENTER_PICTURE_IN_PICTURE:"enterpictureinpicture",LEAVE_PICTURE_IN_PICTURE:"leavepictureinpicture",ERROR:"error",LOADED_DATA:"loadeddata",LOADED_METADATA:"loadedmetadata",LOAD_START:"loadstart",PAUSE:"pause",PLAY:"play",PLAYING:"playing",PROGRESS:"progress",RATE_CHANGE:"ratechange",RESIZE:"resize",SEEKED:"seeked",SEEKING:"seeking",STALLED:"stalled",SUSPEND:"suspend",TIME_UPDATE:"timeupdate",VOLUME_CHANGE:"volumechange",WAITING:"waiting",WEBKIT_BEGIN_FULLSCREEN:"webkitbeginfullscreen",WEBKIT_END_FULLSCREEN:"webkitendfullscreen",WEBKIT_PRESENTATION_MODE_CHANGED:"webkitpresentationmodechanged"},fe={ADD_TRACK:"addtrack",REMOVE_TRACK:"removetrack",CHANGE:"change"},le={AVAILABLE:"externaldisplayavailable",UNAVAILABLE:"externaldisplayunavailable",ACTIVATED:"externaldisplayactivated",DEACTIVATED:"externaldisplaydeactivated"},de={AIRPLAY_AVAILABLE:"available",AIRPLAY_UNAVAILABLE:"unavailable",AIRPLAY_ACTIVATED:"activated",AIRPLAY_DEACTIVATED:"deactivated"},ve={SCANNER_CHANGE:"scannerchange",SCANNER_ERROR:"scannererror",FILE_ERROR:"fileerror",FILE_SRC_UPDATE:"filesrcupdate",DOWNLOAD_START:"downloadstart",DOWNLOAD_END:"downloadend",DOWNLOAD_ERROR:"downloaderror",DOWNLOAD_TIMEOUT:"downloadtimeout",DRM_AUTH_FAILURE:"drmauthfailure",DRM_AUTH_SUCCESS:"drmauthsuccess",DRM_FAILURE:"drmfailure",DRM_KEY_SWITCH:"drmkeyswitch",DRM_OUTPUT_RESTRICTED:"drmoutputrestricted",EME_UNSUPPORTED:"emeunsupported",CURRENT_FILE_CHANGE:"currentfilechange",MEDIA_URL_EXPIRED:"mediaurlexpired",MEDIA_URL_BAD_REQUEST:"mediaurlbadrequest",STREAM_CHANGE:"streamchange",STREAM_CHANGE_START:"streamchangestart",STREAM_UPDATED:"streamupdated",STREAM_BUFFER_START:"streambufferstart",STREAM_BUFFER_END:"streambufferend",AVAILABLE_STREAMS_CHANGED:"availablestreamschanged",MEDIA_CAPABILITY_STREAMS_UNSUPPORTED:"mediacapabilitystreamsunsupported",DROPPED_FRAMES:"droppedframes",BANDWIDTH:"bandwidth",STREAM_TARGET_CHANGE:"streamtargetchange",CUE_POINT:"cuepoint",BUFFER_OCCUPANCY:"bufferoccupancy",MANIFEST_TIMEOUT:"manifesttimeout",MANIFEST_LOADED:"manifestloaded",STREAMS_LOADED:"streamsloaded",TEXT_SRC_UPDATE:"texttracksrcupdate",TEXT_TRACKS_AVAILABLE:"texttracksavailable",AV_DURATION_MISMATCH:"avdurationmismatch",BUFFER_STARTED:"bufferstarted",BUFFER_ENDED:"bufferended",QUOTA_EXCEEDED_ERROR:"quotaexceedederror",CHAPTER_CUES_UPDATED:"chaptercuesupdated",APPEND_BUFFER_END:"appendbufferend",DROPPED_FRAME_PERCENT_EXCEEDED:"droppedframepercentexceeded",LOAD_SEGMENT_FAILED:"loadsegmentfailed",AUDIO_TRACK_CHANGED:"audiotrackchanged",SEGMENT_CUES_LOADED:"segmentcuesloaded"},pe={STREAM_ONLINE:"livestreamonline",STREAM_OFFLINE:"livestreamoffline",BUFFER_GAP_JUMP:"livebuffergapjump",BUFFER_GAP_JUMP_PREVENT:"livebuffergapjumpprevent",STALL_JUMP:"livestalljump",LATENCY_UPDATED:"latencyupdated"},Ee={CAMERA_UPDATE:"cameraupdate",CAMERA_CHANGE:"camerachange",MOTION_START:"motionstart",MOTION_END:"motionend",SPATIAL_UNSUPPORTED:"spatialunsupported",WEBVR_ENTER:"entervr",WEBVR_EXIT:"exitvr",WEBVR_HARDWARE_AVAILABLE:"webvrhardwareavailable",AMBISONIC_UNSUPPORTED:"ambisonicunsupported"},ye={MEDIASESSION_PLAY:"mediasessionplay",MEDIASESSION_PAUSE:"mediasessionpause",MEDIASESSION_SEEK_FORWARD:"mediasessionseekforward",MEDIASESSION_SEEK_TO:"mediasessionseekto",MEDIASESSION_SEEK_BACKWARD:"mediasessionseekbackward"},me=Object.assign({},he,fe,le,de,ve,Ee,pe,ye);let Te=window.Array.from;const be=[1];"function"==typeof Te&&Te(be)===be&&(Te=!1);const we=Te||function(t){return[].slice.call(t,0)},ge=window.Map||function(){let t,n,i;const e=()=>{n=[],i=[]},r=i=>-1<(t=n.indexOf(i));return e(),{get size(){return n.length},has:r,clear:e,get:t=>i[n.indexOf(t)],keys:()=>n.slice(),values:()=>i.slice(),entries:()=>n.map(((t,n)=>[t,i[n]])),delete:e=>r(e)&&n.splice(t,1)&&!!i.splice(t,1),forEach(t,e){i.forEach(((i,r)=>t.call(e,i,n[r],this)))},set(e,s){return r(e)?i[t]=s:i[n.push(e)-1]=s,this}}};var Ae=i((function(t,n){
/*! For license information please see hls-parser.min.js.LICENSE.txt */
self,t.exports=function(){return t={851:(t,n,i)=>{var e=i(771),r=e.getOptions,s=e.setOptions,o=i(463),u=i(367),c=i(890);t.exports={parse:o,stringify:u,types:c,getOptions:r,setOptions:s}},463:(t,n,i)=>{function e(t,n){var i;if(void 0===z||null==t[z.iterator]){if(Array.isArray(t)||(i=s(t))||n&&t&&"number"==typeof t.length){i&&(t=i);var e=0,r=function(){};return{s:r,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,c=!1;return{s:function(){i=t[z.iterator]()},n:function(){var t=i.next();return u=t.done,t},e:function(t){c=!0,o=t},f:function(){try{u||null==i.return||i.return()}finally{if(c)throw o}}}}function r(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if(void 0!==z&&z.iterator in Object(t)){var i=[],e=!0,r=!1,s=void 0;try{for(var o,u=t[z.iterator]();!(e=(o=u.next()).done)&&(i.push(o.value),!n||i.length!==n);e=!0);}catch(t){r=!0,s=t}finally{try{e||null==u.return||u.return()}finally{if(r)throw s}}return i}}(t,n)||s(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,n){if(t){if("string"==typeof t)return o(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?we(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(t,n):void 0}}function o(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,e=new Array(n);i<n;i++)e[i]=t[i];return e}var u=i(771),c=i(890),a=c.Rendition,h=c.Variant,f=c.SessionData,l=c.Key,d=c.MediaInitializationSection,v=c.DateRange,p=c.SpliceInfo,E=c.MasterPlaylist,y=c.MediaPlaylist,m=c.Segment,T=c.PartialSegment,b=c.RenditionReport;function w(t){return u.trim(t,'"')}function g(t){var n=u.splitAt(t,",");return{duration:u.toNumber(n[0]),title:decodeURIComponent(escape(n[1]))}}function A(t){var n=u.splitAt(t,"@");return{length:u.toNumber(n[0]),offset:n[1]?u.toNumber(n[1]):-1}}function S(t,n){n.IV&&t.compatibleVersion<2&&(t.compatibleVersion=2),(n.KEYFORMAT||n.KEYFORMATVERSIONS)&&t.compatibleVersion<5&&(t.compatibleVersion=5)}function _(t){var n=u.splitByCommaWithPreservingQuotes(t),i={};return n.forEach((function(t){var n,e,s=r(u.splitAt(t,"="),2),o=s[0],c=s[1],a=w(c);switch(o){case"URI":i[o]=a;break;case"START-DATE":case"END-DATE":i[o]=new Date(a);break;case"IV":i[o]=(n=a,16!==(e=u.hexToByteSequence(n)).length&&u.INVALIDPLAYLIST("IV must be a 128-bit unsigned integer"),e);break;case"BYTERANGE":i[o]=A(a);break;case"RESOLUTION":i[o]=function(t){var n=u.splitAt(t,"x");return{width:u.toNumber(n[0]),height:u.toNumber(n[1])}}(a);break;case"END-ON-NEXT":case"DEFAULT":case"AUTOSELECT":case"FORCED":case"PRECISE":case"CAN-BLOCK-RELOAD":case"INDEPENDENT":case"GAP":i[o]="YES"===a;break;case"DURATION":case"PLANNED-DURATION":case"BANDWIDTH":case"AVERAGE-BANDWIDTH":case"FRAME-RATE":case"TIME-OFFSET":case"CAN-SKIP-UNTIL":case"HOLD-BACK":case"PART-HOLD-BACK":case"PART-TARGET":case"BYTERANGE-START":case"BYTERANGE-LENGTH":case"LAST-MSN":case"LAST-PART":case"SKIPPED-SEGMENTS":i[o]=u.toNumber(a);break;default:o.startsWith("SCTE35-")?i[o]=u.hexToByteSequence(a):o.startsWith("X-")?i[o]=function(t){return t.startsWith('"')?w(t):t.startsWith("0x")||t.startsWith("0X")?u.hexToByteSequence(t):u.toNumber(t)}(c):i[o]=a}})),i}function R(){u.INVALIDPLAYLIST("The file contains both media and master playlist tags.")}function O(t,n,i){var r,s=(r=n.attributes,new a({type:r.TYPE,uri:r.URI,groupId:r["GROUP-ID"],language:r.LANGUAGE,assocLanguage:r["ASSOC-LANGUAGE"],name:r.NAME,isDefault:r.DEFAULT,autoselect:r.AUTOSELECT,forced:r.FORCED,instreamId:r["INSTREAM-ID"],characteristics:r.CHARACTERISTICS,channels:r.CHANNELS})),o=t[u.camelify(i)],c=function(t,n){var i,r=!1,s=e(t);try{for(s.s();!(i=s.n()).done;){var o=i.value;if(o.name===n.name)return"All EXT-X-MEDIA tags in the same Group MUST have different NAME attributes.";o.isDefault&&(r=!0)}}catch(t){s.e(t)}finally{s.f()}return r&&n.isDefault?"EXT-X-MEDIA A Group MUST NOT have more than one member with a DEFAULT attribute of YES.":""}(o,s);c&&u.INVALIDPLAYLIST(c),o.push(s),s.isDefault&&(t.currentRenditions[u.camelify(i)]=o.length-1)}function I(t,n,i,r,s){var o,c=new h({uri:i,bandwidth:n.BANDWIDTH,averageBandwidth:n["AVERAGE-BANDWIDTH"],codecs:n.CODECS,resolution:n.RESOLUTION,frameRate:n["FRAME-RATE"],hdcpLevel:n["HDCP-LEVEL"]}),a=e(t);try{for(a.s();!(o=a.n()).done;){var f=o.value;if("EXT-X-MEDIA"===f.name){var l=f.attributes,d=l.TYPE;if(d&&l["GROUP-ID"]||u.INVALIDPLAYLIST("EXT-X-MEDIA TYPE attribute is REQUIRED."),n[d]===l["GROUP-ID"]&&(O(c,f,d),"CLOSED-CAPTIONS"===d)){var v,p=e(c.closedCaptions);try{for(p.s();!(v=p.n()).done;){var E=v.value.instreamId;if(E&&E.startsWith("SERVICE")&&s.compatibleVersion<7){s.compatibleVersion=7;break}}}catch(t){p.e(t)}finally{p.f()}}}}}catch(t){a.e(t)}finally{a.f()}return function(t,n,i){["AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(e){"CLOSED-CAPTIONS"===e&&"NONE"===t[e]?(i.isClosedCaptionsNone=!0,n.closedCaptions=[]):t[e]&&!n[u.camelify(e)].find((function(n){return n.groupId===t[e]}))&&u.INVALIDPLAYLIST("".concat(e," attribute MUST match the value of the GROUP-ID attribute of an EXT-X-MEDIA tag whose TYPE attribute is ").concat(e,"."))}))}(n,c,s),c.isIFrameOnly=r,c}function N(t,n){if(t.method!==n.method)return!1;if(t.uri!==n.uri)return!1;if(t.iv){if(!n.iv)return!1;if(t.iv.length!==n.iv.length)return!1;for(var i=0;i<t.iv.length;i++)if(t.iv[i]!==n.iv[i])return!1}else if(n.iv)return!1;return t.format===n.format&&t.formatVersion===n.formatVersion}function k(t,n,i,e,r,s,o){for(var c=new m({uri:n,mediaSequenceNumber:r,discontinuitySequence:s}),a=!1,h=!1,f=function(n){var i=t[n],e=i.name,r=i.value,s=i.attributes;if("EXTINF"===e)!Number.isInteger(r.duration)&&o.compatibleVersion<3&&(o.compatibleVersion=3),Math.round(r.duration)>o.targetDuration&&u.INVALIDPLAYLIST("EXTINF duration, when rounded to the nearest integer, MUST be less than or equal to the target duration"),c.duration=r.duration,c.title=r.title;else if("EXT-X-BYTERANGE"===e)o.compatibleVersion<4&&(o.compatibleVersion=4),c.byterange=r;else if("EXT-X-DISCONTINUITY"===e)c.parts.length>0&&u.INVALIDPLAYLIST("EXT-X-DISCONTINUITY must appear before the first EXT-X-PART tag of the Parent Segment."),c.discontinuity=!0;else if("EXT-X-KEY"===e)c.parts.length>0&&u.INVALIDPLAYLIST("EXT-X-KEY must appear before the first EXT-X-PART tag of the Parent Segment."),S(o,s),c.key=new l({method:s.METHOD,uri:s.URI,iv:s.IV,format:s.KEYFORMAT,formatVersion:s.KEYFORMATVERSIONS});else if("EXT-X-MAP"===e)c.parts.length>0&&u.INVALIDPLAYLIST("EXT-X-MAP must appear before the first EXT-X-PART tag of the Parent Segment."),o.compatibleVersion<5&&(o.compatibleVersion=5),o.hasMap=!0,c.map=new d({uri:s.URI,byterange:s.BYTERANGE});else if("EXT-X-PROGRAM-DATE-TIME"===e)c.programDateTime=r;else if("EXT-X-DATERANGE"===e){var f={};Object.keys(s).forEach((function(t){(t.startsWith("SCTE35-")||t.startsWith("X-"))&&(f[t]=s[t])})),c.dateRange=new v({id:s.ID,classId:s.CLASS,start:s["START-DATE"],end:s["END-DATE"],duration:s.DURATION,plannedDuration:s["PLANNED-DURATION"],endOnNext:s["END-ON-NEXT"],attributes:f})}else if("EXT-X-CUE-OUT"===e)c.markers.push(new p({type:"OUT",duration:r}));else if("EXT-X-CUE-IN"===e)c.markers.push(new p({type:"IN"}));else if("EXT-X-CUE-OUT-CONT"===e||"EXT-X-CUE"===e||"EXT-OATCLS-SCTE35"===e||"EXT-X-ASSET"===e||"EXT-X-SCTE35"===e)c.markers.push(new p({type:"RAW",tagName:e,value:r}));else if("EXT-X-PRELOAD-HINT"!==e||s.TYPE)if("EXT-X-PRELOAD-HINT"===e&&"PART"===s.TYPE&&h)u.INVALIDPLAYLIST("Servers should not add more than one EXT-X-PRELOAD-HINT tag with the same TYPE attribute to a Playlist.");else if("EXT-X-PART"!==e&&"EXT-X-PRELOAD-HINT"!==e||s.URI){if("EXT-X-PRELOAD-HINT"===e&&"MAP"===s.TYPE)a&&u.INVALIDPLAYLIST("Servers should not add more than one EXT-X-PRELOAD-HINT tag with the same TYPE attribute to a Playlist."),a=!0,o.hasMap=!0,c.map=new d({hint:!0,uri:s.URI,byterange:{length:s["BYTERANGE-LENGTH"],offset:s["BYTERANGE-START"]||0}});else if("EXT-X-PART"===e||"EXT-X-PRELOAD-HINT"===e&&"PART"===s.TYPE){"EXT-X-PART"!==e||s.DURATION||u.INVALIDPLAYLIST("EXT-X-PART: DURATION attribute is mandatory"),"EXT-X-PRELOAD-HINT"===e&&(h=!0);var E=new T({hint:"EXT-X-PRELOAD-HINT"===e,uri:s.URI,byterange:"EXT-X-PART"===e?s.BYTERANGE:{length:s["BYTERANGE-LENGTH"],offset:s["BYTERANGE-START"]||0},duration:s.DURATION,independent:s.INDEPENDENT,gap:s.GAP});c.parts.push(E)}}else u.INVALIDPLAYLIST("EXT-X-PART / EXT-X-PRELOAD-HINT: URI attribute is mandatory");else u.INVALIDPLAYLIST("EXT-X-PRELOAD-HINT: TYPE attribute is mandatory")},E=i;E<=e;E++)f(E);return c}function M(t,n,i,e,r){var s=n.discontinuity,o=n.key,c=n.map,a=n.byterange,h=n.uri;if(s&&(n.discontinuitySequence=i+1),o||(n.key=e),c||(n.map=r),a&&-1===a.offset){var f=t.segments;if(f.length>0){var l=f[f.length-1];l.byterange&&l.uri===h?a.offset=l.byterange.offset+l.byterange.length:u.INVALIDPLAYLIST("If offset of EXT-X-BYTERANGE is not present, a previous Media Segment MUST be a sub-range of the same media resource")}else u.INVALIDPLAYLIST("If offset of EXT-X-BYTERANGE is not present, a previous Media Segment MUST appear in the Playlist file")}return t.segments.push(n),[n.discontinuitySequence,n.key,n.map]}function D(t,n){var i=r(function(t){var n=t.indexOf(":");return-1===n?[t.slice(1).trim(),null]:[t.slice(1,n).trim(),t.slice(n+1).trim()]}(t),2),e=i[0],s=i[1],o=function(t){switch(t){case"EXTM3U":case"EXT-X-VERSION":return"Basic";case"EXTINF":case"EXT-X-BYTERANGE":case"EXT-X-DISCONTINUITY":case"EXT-X-KEY":case"EXT-X-MAP":case"EXT-X-PROGRAM-DATE-TIME":case"EXT-X-DATERANGE":case"EXT-X-CUE-OUT":case"EXT-X-CUE-IN":case"EXT-X-CUE-OUT-CONT":case"EXT-X-CUE":case"EXT-OATCLS-SCTE35":case"EXT-X-ASSET":case"EXT-X-SCTE35":case"EXT-X-PART":case"EXT-X-PRELOAD-HINT":return"Segment";case"EXT-X-TARGETDURATION":case"EXT-X-MEDIA-SEQUENCE":case"EXT-X-DISCONTINUITY-SEQUENCE":case"EXT-X-ENDLIST":case"EXT-X-PLAYLIST-TYPE":case"EXT-X-I-FRAMES-ONLY":case"EXT-X-SERVER-CONTROL":case"EXT-X-PART-INF":case"EXT-X-RENDITION-REPORT":case"EXT-X-SKIP":return"MediaPlaylist";case"EXT-X-MEDIA":case"EXT-X-STREAM-INF":case"EXT-X-I-FRAME-STREAM-INF":case"EXT-X-SESSION-DATA":case"EXT-X-SESSION-KEY":return"MasterPlaylist";case"EXT-X-INDEPENDENT-SEGMENTS":case"EXT-X-START":return"MediaorMasterPlaylist";default:return"Unknown"}}(e);if(function(t,n){if("Segment"===t||"MediaPlaylist"===t)return void 0===n.isMasterPlaylist?void(n.isMasterPlaylist=!1):void(n.isMasterPlaylist&&R());if("MasterPlaylist"===t){if(void 0===n.isMasterPlaylist)return void(n.isMasterPlaylist=!0);!1===n.isMasterPlaylist&&R()}}(o,n),"Unknown"===o)return null;"MediaPlaylist"===o&&"EXT-X-RENDITION-REPORT"!==e&&(n.hash[e]&&u.INVALIDPLAYLIST("There MUST NOT be more than one Media Playlist tag of each type in any Media Playlist"),n.hash[e]=!0);var c=r(function(t,n){switch(t){case"EXTM3U":case"EXT-X-DISCONTINUITY":case"EXT-X-ENDLIST":case"EXT-X-I-FRAMES-ONLY":case"EXT-X-INDEPENDENT-SEGMENTS":case"EXT-X-CUE-IN":return[null,null];case"EXT-X-VERSION":case"EXT-X-TARGETDURATION":case"EXT-X-MEDIA-SEQUENCE":case"EXT-X-DISCONTINUITY-SEQUENCE":case"EXT-X-CUE-OUT":return[u.toNumber(n),null];case"EXT-X-KEY":case"EXT-X-MAP":case"EXT-X-DATERANGE":case"EXT-X-MEDIA":case"EXT-X-STREAM-INF":case"EXT-X-I-FRAME-STREAM-INF":case"EXT-X-SESSION-DATA":case"EXT-X-SESSION-KEY":case"EXT-X-START":case"EXT-X-SERVER-CONTROL":case"EXT-X-PART-INF":case"EXT-X-PART":case"EXT-X-PRELOAD-HINT":case"EXT-X-RENDITION-REPORT":case"EXT-X-SKIP":return[null,_(n)];case"EXTINF":return[g(n),null];case"EXT-X-BYTERANGE":return[A(n),null];case"EXT-X-PROGRAM-DATE-TIME":return[new Date(n),null];default:return[n,null]}}(e,s),2);return{name:e,category:o,value:c[0],attributes:c[1]}}function X(t,n){var i;return n.isMasterPlaylist?i=function(t,n){var i,s=new E,o=e(t.entries());try{for(o.s();!(i=o.n()).done;){var c=r(i.value,2),a=c[0],h=c[1],d=h.name,v=h.value,p=h.attributes;if("EXT-X-VERSION"===d)s.version=v;else if("EXT-X-STREAM-INF"===d){var y=t[a+1];("string"!=typeof y||y.startsWith("#EXT"))&&u.INVALIDPLAYLIST("EXT-X-STREAM-INF must be followed by a URI line");var m=I(t,p,y,!1,n);m&&s.variants.push(m)}else if("EXT-X-I-FRAME-STREAM-INF"===d){var T=I(t,p,p.URI,!0,n);T&&s.variants.push(T)}else"EXT-X-SESSION-DATA"===d?function(){var t=new f({id:p["DATA-ID"],value:p.VALUE,uri:p.URI,language:p.LANGUAGE});s.sessionDataList.find((function(n){return n.id===t.id&&n.language===t.language}))&&u.INVALIDPLAYLIST("A Playlist MUST NOT contain more than one EXT-X-SESSION-DATA tag with the same DATA-ID attribute and the same LANGUAGE attribute."),s.sessionDataList.push(t)}():"EXT-X-SESSION-KEY"===d?function(){"NONE"===p.METHOD&&u.INVALIDPLAYLIST("EXT-X-SESSION-KEY: The value of the METHOD attribute MUST NOT be NONE");var t=new l({method:p.METHOD,uri:p.URI,iv:p.IV,format:p.KEYFORMAT,formatVersion:p.KEYFORMATVERSIONS});s.sessionKeyList.find((function(n){return N(n,t)}))&&u.INVALIDPLAYLIST("A Master Playlist MUST NOT contain more than one EXT-X-SESSION-KEY tag with the same METHOD, URI, IV, KEYFORMAT, and KEYFORMATVERSIONS attribute values."),S(n,p),s.sessionKeyList.push(t)}():"EXT-X-INDEPENDENT-SEGMENTS"===d?(s.independentSegments&&u.INVALIDPLAYLIST("EXT-X-INDEPENDENT-SEGMENTS tag MUST NOT appear more than once in a Playlist"),s.independentSegments=!0):"EXT-X-START"===d&&(s.start&&u.INVALIDPLAYLIST("EXT-X-START tag MUST NOT appear more than once in a Playlist"),"number"!=typeof p["TIME-OFFSET"]&&u.INVALIDPLAYLIST("EXT-X-START: TIME-OFFSET attribute is REQUIRED"),s.start={offset:p["TIME-OFFSET"],precise:p.PRECISE||!1})}}catch(t){o.e(t)}finally{o.f()}if(n.isClosedCaptionsNone){var b,w=e(s.variants);try{for(w.s();!(b=w.n()).done;)b.value.closedCaptions.length>0&&u.INVALIDPLAYLIST("If there is a variant with CLOSED-CAPTIONS attribute of NONE, all EXT-X-STREAM-INF tags MUST have this attribute with a value of NONE")}catch(t){w.e(t)}finally{w.f()}}return s}(t,n):!(i=function(t,n){var i,s=new y,o=-1,c=0,a=!1,h=0,f=null,l=null,d=!1,v=e(t.entries());try{for(v.s();!(i=v.n()).done;){var p=r(i.value,2),E=p[0],m=p[1],T=m.name,w=m.value,g=m.attributes;if("Segment"!==m.category){if("EXT-X-VERSION"===T)void 0===s.version?s.version=w:u.INVALIDPLAYLIST("A Playlist file MUST NOT contain more than one EXT-X-VERSION tag.");else if("EXT-X-TARGETDURATION"===T)s.targetDuration=n.targetDuration=w;else if("EXT-X-MEDIA-SEQUENCE"===T)s.segments.length>0&&u.INVALIDPLAYLIST("The EXT-X-MEDIA-SEQUENCE tag MUST appear before the first Media Segment in the Playlist."),s.mediaSequenceBase=c=w;else if("EXT-X-DISCONTINUITY-SEQUENCE"===T)s.segments.length>0&&u.INVALIDPLAYLIST("The EXT-X-DISCONTINUITY-SEQUENCE tag MUST appear before the first Media Segment in the Playlist."),a&&u.INVALIDPLAYLIST("The EXT-X-DISCONTINUITY-SEQUENCE tag MUST appear before any EXT-X-DISCONTINUITY tag."),s.discontinuitySequenceBase=h=w;else if("EXT-X-ENDLIST"===T)s.endlist=!0;else if("EXT-X-PLAYLIST-TYPE"===T)s.playlistType=w;else if("EXT-X-I-FRAMES-ONLY"===T)n.compatibleVersion<4&&(n.compatibleVersion=4),s.isIFrame=!0;else if("EXT-X-INDEPENDENT-SEGMENTS"===T)s.independentSegments&&u.INVALIDPLAYLIST("EXT-X-INDEPENDENT-SEGMENTS tag MUST NOT appear more than once in a Playlist"),s.independentSegments=!0;else if("EXT-X-START"===T)s.start&&u.INVALIDPLAYLIST("EXT-X-START tag MUST NOT appear more than once in a Playlist"),"number"!=typeof g["TIME-OFFSET"]&&u.INVALIDPLAYLIST("EXT-X-START: TIME-OFFSET attribute is REQUIRED"),s.start={offset:g["TIME-OFFSET"],precise:g.PRECISE||!1};else if("EXT-X-SERVER-CONTROL"===T)g["CAN-BLOCK-RELOAD"]||u.INVALIDPLAYLIST("EXT-X-SERVER-CONTROL: CAN-BLOCK-RELOAD=YES is mandatory for Low-Latency HLS"),s.lowLatencyCompatibility={canBlockReload:g["CAN-BLOCK-RELOAD"],canSkipUntil:g["CAN-SKIP-UNTIL"],holdBack:g["HOLD-BACK"],partHoldBack:g["PART-HOLD-BACK"]};else if("EXT-X-PART-INF"===T)g["PART-TARGET"]||u.INVALIDPLAYLIST("EXT-X-PART-INF: PART-TARGET attribute is mandatory"),s.partTargetDuration=g["PART-TARGET"];else if("EXT-X-RENDITION-REPORT"===T)g.URI||u.INVALIDPLAYLIST("EXT-X-RENDITION-REPORT: URI attribute is mandatory"),0===g.URI.search(/^[a-z]+:/)&&u.INVALIDPLAYLIST("EXT-X-RENDITION-REPORT: URI must be relative to the playlist uri"),s.renditionReports.push(new b({uri:g.URI,lastMSN:g["LAST-MSN"],lastPart:g["LAST-PART"]}));else if("EXT-X-SKIP"===T)g["SKIPPED-SEGMENTS"]||u.INVALIDPLAYLIST("EXT-X-SKIP: SKIPPED-SEGMENTS attribute is mandatory"),n.compatibleVersion<9&&(n.compatibleVersion=9),s.skip=g["SKIPPED-SEGMENTS"],c+=s.skip;else if("string"==typeof m){-1===o&&u.INVALIDPLAYLIST("A URI line is not preceded by any segment tags"),s.targetDuration||u.INVALIDPLAYLIST("The EXT-X-TARGETDURATION tag is REQUIRED");var A=k(t,m,o,E-1,c++,h,n);if(A){var S=r(M(s,A,h,f,l),3);h=S[0],f=S[1],l=S[2],!d&&A.parts.length>0&&(d=!0)}o=-1}}else-1===o&&(o=E),"EXT-X-DISCONTINUITY"===T&&(a=!0)}}catch(t){v.e(t)}finally{v.f()}if(-1!==o){var _=k(t,"",o,t.length-1,c++,h,n);if(_){var R=_.parts;R.length>0&&!s.endlist&&!R[R.length-1].hint&&u.INVALIDPLAYLIST("If the Playlist contains EXT-X-PART tags and does not contain an EXT-X-ENDLIST tag, the Playlist must contain an EXT-X-PRELOAD-HINT tag with a TYPE=PART attribute"),M(s,_,f,l),!d&&_.parts.length>0&&(d=!0)}}return function(t){for(var n=new ge,i=new ge,r=!1,s=!1,o=t.length-1;o>=0;o--){var c=t[o],a=c.programDateTime,h=c.dateRange;if(a&&(s=!0),h&&h.start){r=!0,h.endOnNext&&(h.end||h.duration)&&u.INVALIDPLAYLIST("An EXT-X-DATERANGE tag with an END-ON-NEXT=YES attribute MUST NOT contain DURATION or END-DATE attributes.");var f=h.start.getTime(),l=h.duration||0;h.end&&h.duration&&f+1e3*l!==h.end.getTime()&&u.INVALIDPLAYLIST("END-DATE MUST be equal to the value of the START-DATE attribute plus the value of the DURATION"),h.endOnNext&&(h.end=n.get(h.classId)),n.set(h.classId,h.start);var d=h.end?h.end.getTime():h.start.getTime()+1e3*(h.duration||0),v=i.get(h.classId);if(v){var p,E=e(v);try{for(E.s();!(p=E.n()).done;){var y=p.value;(y.start<=f&&y.end>f||y.start>=f&&y.start<d)&&u.INVALIDPLAYLIST("DATERANGE tags with the same CLASS should not overlap")}}catch(t){E.e(t)}finally{E.f()}v.push({start:f,end:d})}else i.set(h.classId,[{start:f,end:d}])}}r&&!s&&u.INVALIDPLAYLIST("If a Playlist contains an EXT-X-DATERANGE tag, it MUST also contain at least one EXT-X-PROGRAM-DATE-TIME tag.")}(s.segments),s.lowLatencyCompatibility&&function(t,n){var i=t.lowLatencyCompatibility,s=t.targetDuration,o=t.partTargetDuration,c=t.segments,a=t.renditionReports,h=i.canSkipUntil,f=i.holdBack,l=i.partHoldBack;if(h<6*s&&u.INVALIDPLAYLIST("The Skip Boundary must be at least six times the EXT-X-TARGETDURATION."),f<3*s&&u.INVALIDPLAYLIST("HOLD-BACK must be at least three times the EXT-X-TARGETDURATION."),n){void 0===o&&u.INVALIDPLAYLIST("EXT-X-PART-INF is required if a Playlist contains one or more EXT-X-PART tags"),void 0===l&&u.INVALIDPLAYLIST("EXT-X-PART: PART-HOLD-BACK attribute is mandatory"),l<o&&u.INVALIDPLAYLIST("PART-HOLD-BACK must be at least PART-TARGET");var d,v=e(c.entries());try{for(v.s();!(d=v.n()).done;){var p=r(d.value,2),E=p[0],y=p[1].parts;y.length>0&&E<c.length-3&&u.INVALIDPLAYLIST("Remove EXT-X-PART tags from the Playlist after they are greater than three target durations from the end of the Playlist.");var m,T=e(y.entries());try{for(T.s();!(m=T.n()).done;){var b=r(m.value,2),w=b[0],g=b[1].duration;void 0!==g&&(g>o&&u.INVALIDPLAYLIST("PART-TARGET is the maximum duration of any Partial Segment"),w<y.length-1&&g<.85*o&&u.INVALIDPLAYLIST("All Partial Segments except the last part of a segment must have a duration of at least 85% of PART-TARGET"))}}catch(t){T.e(t)}finally{T.f()}}}catch(t){v.e(t)}finally{v.f()}}var A,S=e(a);try{for(S.s();!(A=S.n()).done;){var _=A.value,R=c[c.length-1];_.lastMSN||(_.lastMSN=R.mediaSequenceNumber),!_.lastPart&&R.parts.length>0&&(_.lastPart=R.parts.length-1)}}catch(t){S.e(t)}finally{S.f()}}(s,d),s}(t,n)).isIFrame&&n.hasMap&&n.compatibleVersion<6&&(n.compatibleVersion=6),n.compatibleVersion>1&&(!i.version||i.version<n.compatibleVersion)&&u.INVALIDPLAYLIST("EXT-X-VERSION needs to be ".concat(n.compatibleVersion," or higher.")),i}t.exports=function(t){var n={version:void 0,isMasterPlaylist:void 0,hasMap:!1,targetDuration:0,compatibleVersion:1,isClosedCaptionsNone:!1,hash:{}},i=X(function(t,n){var i=[];return t.split("\n").forEach((function(t){var e=t.trim();if(e)if(e.startsWith("#")){if(e.startsWith("#EXT")){var r=D(e,n);return void(r&&i.push(r))}}else i.push(e)})),0!==i.length&&"EXTM3U"===i[0].name||u.INVALIDPLAYLIST("The EXTM3U tag MUST be the first line."),i}(t,n),n);return i.source=t,i}},367:(t,n,i)=>{function e(t){return(e="function"==typeof z&&"symbol"==typeof z.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof z&&t.constructor===z&&t!==z.prototype?"symbol":typeof t})(t)}function r(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if(void 0!==z&&z.iterator in Object(t)){var i=[],e=!0,r=!1,s=void 0;try{for(var o,u=t[z.iterator]();!(e=(o=u.next()).done)&&(i.push(o.value),!n||i.length!==n);e=!0);}catch(t){r=!0,s=t}finally{try{e||null==u.return||u.return()}finally{if(r)throw s}}return i}}(t,n)||o(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,n){var i;if(void 0===z||null==t[z.iterator]){if(Array.isArray(t)||(i=o(t))||n&&t&&"number"==typeof t.length){i&&(t=i);var e=0,r=function(){};return{s:r,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,u=!0,c=!1;return{s:function(){i=t[z.iterator]()},n:function(){var t=i.next();return u=t.done,t},e:function(t){c=!0,s=t},f:function(){try{u||null==i.return||i.return()}finally{if(c)throw s}}}}function o(t,n){if(t){if("string"==typeof t)return u(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?we(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?u(t,n):void 0}}function u(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,e=new Array(n);i<n;i++)e[i]=t[i];return e}function c(t,n,i){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,n,i){var e=function(t,n){for(;!Object.prototype.hasOwnProperty.call(t,n)&&null!==(t=v(t)););return t}(t,n);if(e){var r=Object.getOwnPropertyDescriptor(e,n);return r.get?r.get.call(i):r.value}})(t,n,i||t)}function a(t,n){return!n||"object"!==e(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function h(t){var n="function"==typeof ge?new ge:void 0;return(h=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return f(t,arguments,v(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),d(e,t)})(t)}function f(t,n,i){return(f=l()?Reflect.construct:function(t,n,i){var e=[null];e.push.apply(e,n);var r=new(Function.bind.apply(t,e));return i&&d(r,i.prototype),r}).apply(null,arguments)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function d(t,n){return(d=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=i(771),E=["#EXTINF","#EXT-X-BYTERANGE","#EXT-X-DISCONTINUITY","#EXT-X-STREAM-INF","#EXT-X-CUE-OUT","#EXT-X-CUE-IN","#EXT-X-KEY","#EXT-X-MAP"],y=["#EXT-X-MEDIA"],m=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&d(t,n)}(s,t);var n,i,e,r=(n=s,i=l(),function(){var t,e=v(n);if(i){var r=v(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return a(this,t)});function s(t){var n;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,s),(n=r.call(this)).baseUri=t,n}return(e=[{key:"push",value:function(){for(var t=this,n=arguments.length,i=new Array(n),e=0;e<n;e++)i[e]=arguments[e];for(var r=function(){var n=u[o];if(!n.startsWith("#"))return c(v(s.prototype),"push",t).call(t,n),"continue";if(E.some((function(t){return n.startsWith(t)})))return c(v(s.prototype),"push",t).call(t,n),"continue";if(t.includes(n)){if(y.some((function(t){return n.startsWith(t)})))return"continue";p.INVALIDPLAYLIST("Redundant item (".concat(n,")"))}c(v(s.prototype),"push",t).call(t,n)},o=0,u=i;o<u.length;o++)r()}}])&&function(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}(s.prototype,e),s}(h(Array));function T(t,n){var i=1e3;n&&(i=Math.pow(10,n));var e=Math.round(t*i)/i;return n?e.toFixed(n):e}function b(t){var n=['DATA-ID="'.concat(t.id,'"')];return t.language&&n.push('LANGUAGE="'.concat(t.language,'"')),t.value?n.push('VALUE="'.concat(t.value,'"')):t.uri&&n.push('URI="'.concat(t.uri,'"')),"#EXT-X-SESSION-DATA:".concat(n.join(","))}function w(t,n){var i=n?"#EXT-X-SESSION-KEY":"#EXT-X-KEY",e=["METHOD=".concat(t.method)];return t.uri&&e.push('URI="'.concat(t.uri,'"')),t.iv&&(16!==t.iv.length&&p.INVALIDPLAYLIST("IV must be a 128-bit unsigned integer"),e.push("IV=".concat(p.byteSequenceToHex(t.iv)))),t.format&&e.push('KEYFORMAT="'.concat(t.format,'"')),t.formatVersion&&e.push('KEYFORMATVERSIONS="'.concat(t.formatVersion,'"')),"".concat(i,":").concat(e.join(","))}function g(t,n){var i=n.isIFrameOnly?"#EXT-X-I-FRAME-STREAM-INF":"#EXT-X-STREAM-INF",e=["BANDWIDTH=".concat(n.bandwidth)];if(n.averageBandwidth&&e.push("AVERAGE-BANDWIDTH=".concat(n.averageBandwidth)),n.isIFrameOnly&&e.push('URI="'.concat(n.uri,'"')),n.codecs&&e.push('CODECS="'.concat(n.codecs,'"')),n.resolution&&e.push("RESOLUTION=".concat(n.resolution.width,"x").concat(n.resolution.height)),n.frameRate&&e.push("FRAME-RATE=".concat(T(n.frameRate,3))),n.hdcpLevel&&e.push("HDCP-LEVEL=".concat(n.hdcpLevel)),n.audio.length>0){e.push('AUDIO="'.concat(n.audio[0].groupId,'"'));var r,o=s(n.audio);try{for(o.s();!(r=o.n()).done;){var u=r.value;t.push(A(u))}}catch(t){o.e(t)}finally{o.f()}}if(n.video.length>0){e.push('VIDEO="'.concat(n.video[0].groupId,'"'));var c,a=s(n.video);try{for(a.s();!(c=a.n()).done;){var h=c.value;t.push(A(h))}}catch(t){a.e(t)}finally{a.f()}}if(n.subtitles.length>0){e.push('SUBTITLES="'.concat(n.subtitles[0].groupId,'"'));var f,l=s(n.subtitles);try{for(l.s();!(f=l.n()).done;){var d=f.value;t.push(A(d))}}catch(t){l.e(t)}finally{l.f()}}if(p.getOptions().allowClosedCaptionsNone&&0===n.closedCaptions.length)e.push("CLOSED-CAPTIONS=NONE");else if(n.closedCaptions.length>0){e.push('CLOSED-CAPTIONS="'.concat(n.closedCaptions[0].groupId,'"'));var v,E=s(n.closedCaptions);try{for(E.s();!(v=E.n()).done;){var y=v.value;t.push(A(y))}}catch(t){E.e(t)}finally{E.f()}}t.push("".concat(i,":").concat(e.join(","))),n.isIFrameOnly||t.push("".concat(n.uri))}function A(t){var n=["TYPE=".concat(t.type),'GROUP-ID="'.concat(t.groupId,'"'),'NAME="'.concat(t.name,'"')];return void 0!==t.isDefault&&n.push("DEFAULT=".concat(t.isDefault?"YES":"NO")),void 0!==t.autoselect&&n.push("AUTOSELECT=".concat(t.autoselect?"YES":"NO")),void 0!==t.forced&&n.push("FORCED=".concat(t.forced?"YES":"NO")),t.language&&n.push('LANGUAGE="'.concat(t.language,'"')),t.assocLanguage&&n.push('ASSOC-LANGUAGE="'.concat(t.assocLanguage,'"')),t.instreamId&&n.push('INSTREAM-ID="'.concat(t.instreamId,'"')),t.characteristics&&n.push('CHARACTERISTICS="'.concat(t.characteristics,'"')),t.channels&&n.push('CHANNELS="'.concat(t.channels,'"')),t.uri&&n.push('URI="'.concat(t.uri,'"')),"#EXT-X-MEDIA:".concat(n.join(","))}function S(t,n,i,e){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=!1;if(n.byterange&&t.push("#EXT-X-BYTERANGE:".concat(_(n.byterange))),n.discontinuity&&t.push("#EXT-X-DISCONTINUITY"),n.key){var o=w(n.key);o!==i&&(t.push(o),i=o)}if(n.map){var u=function(t){var n=['URI="'.concat(t.uri,'"')];return t.byterange&&n.push('BYTERANGE="'.concat(_(t.byterange),'"')),"#EXT-X-MAP:".concat(n.join(","))}(n.map);u!==e&&(t.push(u),e=u)}if(n.programDateTime&&t.push("#EXT-X-PROGRAM-DATE-TIME:".concat(p.formatDate(n.programDateTime))),n.dateRange&&t.push(function(t){var n=['ID="'.concat(t.id,'"')];return t.start&&n.push('START-DATE="'.concat(p.formatDate(t.start),'"')),t.end&&n.push('END-DATE="'.concat(t.end,'"')),t.duration&&n.push("DURATION=".concat(t.duration)),t.plannedDuration&&n.push("PLANNED-DURATION=".concat(t.plannedDuration)),t.classId&&n.push('CLASS="'.concat(t.classId,'"')),t.endOnNext&&n.push("END-ON-NEXT=YES"),Object.keys(t.attributes).forEach((function(i){i.startsWith("X-")?"number"==typeof t.attributes[i]?n.push("".concat(i,"=").concat(t.attributes[i])):n.push("".concat(i,'="').concat(t.attributes[i],'"')):i.startsWith("SCTE35-")&&n.push("".concat(i,"=").concat(p.byteSequenceToHex(t.attributes[i])))})),"#EXT-X-DATERANGE:".concat(n.join(","))}(n.dateRange)),n.markers.length>0&&R(t,n.markers),n.parts.length>0&&(s=O(t,n.parts)),s)return[i,e];var c=r<3?Math.round(n.duration):T(n.duration,function(t){var n=t.toString(10),i=n.indexOf(".");return-1===i?0:n.length-i-1}(n.duration));return t.push("#EXTINF:".concat(c,",").concat(unescape(encodeURIComponent(n.title||"")))),Array.prototype.push.call(t,"".concat(n.uri)),[i,e]}function _(t){var n=t.offset,i=t.length;return"".concat(i,"@").concat(n)}function R(t,n){var i,e=s(n);try{for(e.s();!(i=e.n()).done;){var r=i.value;if("OUT"===r.type)t.push("#EXT-X-CUE-OUT:".concat(r.duration));else if("IN"===r.type)t.push("#EXT-X-CUE-IN");else if("RAW"===r.type){var o=r.value?":".concat(r.value):"";t.push("#".concat(r.tagName).concat(o))}}}catch(t){e.e(t)}finally{e.f()}}function O(t,n){var i,e=!1,r=s(n);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(o.hint){var u=[];if(u.push("TYPE=PART"),u.push('URI="'.concat(o.uri,'"')),o.byterange){var c=o.byterange,a=c.offset,h=c.length;u.push("BYTERANGE-START=".concat(a)),h&&u.push("BYTERANGE-LENGTH=".concat(h))}t.push("#EXT-X-PRELOAD-HINT:".concat(u.join(","))),e=!0}else{var f=[];f.push("DURATION=".concat(o.duration)),f.push('URI="'.concat(o.uri,'"')),o.byterange&&f.push("BYTERANGE=".concat(_(o.byterange))),o.independent&&f.push("INDEPENDENT=YES"),o.gap&&f.push("GAP=YES"),t.push("#EXT-X-PART:".concat(f.join(",")))}}}catch(t){r.e(t)}finally{r.f()}return e}t.exports=function(t){p.PARAMCHECK(t),p.ASSERT("Not a playlist","playlist"===t.type);var n=new m(t.uri);return n.push("#EXTM3U"),t.version&&n.push("#EXT-X-VERSION:".concat(t.version)),t.independentSegments&&n.push("#EXT-X-INDEPENDENT-SEGMENTS"),t.start&&n.push("#EXT-X-START:TIME-OFFSET=".concat(T(t.start.offset)).concat(t.start.precise?",PRECISE=YES":"")),t.isMasterPlaylist?function(t,n){var i,e=s(n.sessionDataList);try{for(e.s();!(i=e.n()).done;){var r=i.value;t.push(b(r))}}catch(t){e.e(t)}finally{e.f()}var o,u=s(n.sessionKeyList);try{for(u.s();!(o=u.n()).done;){var c=o.value;t.push(w(c,!0))}}catch(t){u.e(t)}finally{u.f()}var a,h=s(n.variants);try{for(h.s();!(a=h.n()).done;)g(t,a.value)}catch(t){h.e(t)}finally{h.f()}}(n,t):function(t,n){var i="",e="";if(n.targetDuration&&t.push("#EXT-X-TARGETDURATION:".concat(n.targetDuration)),n.lowLatencyCompatibility){var o=n.lowLatencyCompatibility,u=o.canBlockReload,c=o.canSkipUntil,a=o.holdBack,h=o.partHoldBack,f=[];f.push("CAN-BLOCK-RELOAD=".concat(u?"YES":"NO")),void 0!==c&&f.push("CAN-SKIP-UNTIL=".concat(c)),void 0!==a&&f.push("HOLD-BACK=".concat(a)),void 0!==h&&f.push("PART-HOLD-BACK=".concat(h)),t.push("#EXT-X-SERVER-CONTROL:".concat(f.join(",")))}n.partTargetDuration&&t.push("#EXT-X-PART-INF:PART-TARGET=".concat(n.partTargetDuration)),n.mediaSequenceBase&&t.push("#EXT-X-MEDIA-SEQUENCE:".concat(n.mediaSequenceBase)),n.discontinuitySequenceBase&&t.push("#EXT-X-DISCONTINUITY-SEQUENCE:".concat(n.discontinuitySequenceBase)),n.playlistType&&t.push("#EXT-X-PLAYLIST-TYPE:".concat(n.playlistType)),n.isIFrame&&t.push("#EXT-X-I-FRAMES-ONLY"),n.skip>0&&t.push("#EXT-X-SKIP:SKIPPED-SEGMENTS=".concat(n.skip));var l,d=s(n.segments);try{for(d.s();!(l=d.n()).done;){var v=r(S(t,l.value,i,e,n.version),2);i=v[0],e=v[1]}}catch(t){d.e(t)}finally{d.f()}n.endlist&&t.push("#EXT-X-ENDLIST");var p,E=s(n.renditionReports);try{for(E.s();!(p=E.n()).done;){var y=p.value,m=[];m.push('URI="'.concat(y.uri,'"')),m.push("LAST-MSN=".concat(y.lastMSN)),void 0!==y.lastPart&&m.push("LAST-PART=".concat(y.lastPart)),t.push("#EXT-X-RENDITION-REPORT:".concat(m.join(",")))}}catch(t){E.e(t)}finally{E.f()}}(n,t),n.join("\n")}},890:(t,n,i)=>{function e(t){return(e="function"==typeof z&&"symbol"==typeof z.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof z&&t.constructor===z&&t!==z.prototype?"symbol":typeof t})(t)}function r(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&s(t,n)}function s(t,n){return(s=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function o(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,e=c(t);if(n){var r=c(this).constructor;i=Reflect.construct(e,arguments,r)}else i=e.apply(this,arguments);return u(this,i)}}function u(t,n){return!n||"object"!==e(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var h=i(771),f=function t(n){a(this,t),h.PARAMCHECK(n),this.type=n},l=function(t){r(i,t);var n=o(i);function i(t){var e,r=t.isMasterPlaylist,s=t.uri,o=t.version,u=t.independentSegments,c=void 0!==u&&u,f=t.start,l=t.source;return a(this,i),e=n.call(this,"playlist"),h.PARAMCHECK(r),e.isMasterPlaylist=r,e.uri=s,e.version=o,e.independentSegments=c,e.start=f,e.source=l,e}return i}(f),d=function(t){r(i,t);var n=o(i);function i(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,i),e.isMasterPlaylist=!0,t=n.call(this,e);var r=e.variants,s=void 0===r?[]:r,o=e.currentVariant,u=e.sessionDataList,c=void 0===u?[]:u,h=e.sessionKeyList,f=void 0===h?[]:h;return t.variants=s,t.currentVariant=o,t.sessionDataList=c,t.sessionKeyList=f,t}return i}(l),v=function(t){r(i,t);var n=o(i);function i(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,i),e.isMasterPlaylist=!1,t=n.call(this,e);var r=e.targetDuration,s=e.mediaSequenceBase,o=void 0===s?0:s,u=e.discontinuitySequenceBase,c=void 0===u?0:u,h=e.endlist,f=void 0!==h&&h,l=e.playlistType,d=e.isIFrame,v=e.segments,p=void 0===v?[]:v,E=e.lowLatencyCompatibility,y=e.partTargetDuration,m=e.renditionReports,T=void 0===m?[]:m,b=e.skip,w=void 0===b?0:b,g=e.hash;return t.targetDuration=r,t.mediaSequenceBase=o,t.discontinuitySequenceBase=c,t.endlist=f,t.playlistType=l,t.isIFrame=d,t.segments=p,t.lowLatencyCompatibility=E,t.partTargetDuration=y,t.renditionReports=T,t.skip=w,t.hash=g,t}return i}(l),p=function(t){r(i,t);var n=o(i);function i(t){var e,r=t.uri,s=t.mimeType,o=t.data,u=t.duration,c=t.title,h=t.byterange,f=t.discontinuity,l=t.mediaSequenceNumber,d=void 0===l?0:l,v=t.discontinuitySequence,p=void 0===v?0:v,E=t.key,y=t.map,m=t.programDateTime,T=t.dateRange,b=t.markers,w=void 0===b?[]:b,g=t.parts,A=void 0===g?[]:g;return a(this,i),(e=n.call(this,"segment")).uri=r,e.mimeType=s,e.data=o,e.duration=u,e.title=c,e.byterange=h,e.discontinuity=f,e.mediaSequenceNumber=d,e.discontinuitySequence=p,e.key=E,e.map=y,e.programDateTime=m,e.dateRange=T,e.markers=w,e.parts=A,e}return i}(f),E=function(t){r(i,t);var n=o(i);function i(t){var e,r=t.hint,s=void 0!==r&&r,o=t.uri,u=t.duration,c=t.independent,f=t.byterange,l=t.gap;return a(this,i),e=n.call(this,"part"),h.PARAMCHECK(o),e.hint=s,e.uri=o,e.duration=u,e.independent=c,e.duration=u,e.byterange=f,e.gap=l,e}return i}(f);t.exports={Rendition:function t(n){var i=n.type,e=n.uri,r=n.groupId,s=n.language,o=n.assocLanguage,u=n.name,c=n.isDefault,f=n.autoselect,l=n.forced,d=n.instreamId,v=n.characteristics,p=n.channels;a(this,t),h.PARAMCHECK(i,r,u),h.CONDITIONALASSERT(["SUBTITLES"===i,e],["CLOSED-CAPTIONS"===i,d],["CLOSED-CAPTIONS"===i,!e],[l,"SUBTITLES"===i]),this.type=i,this.uri=e,this.groupId=r,this.language=s,this.assocLanguage=o,this.name=u,this.isDefault=c,this.autoselect=f,this.forced=l,this.instreamId=d,this.characteristics=v,this.channels=p},Variant:function t(n){var i=n.uri,e=n.isIFrameOnly,r=void 0!==e&&e,s=n.bandwidth,o=n.averageBandwidth,u=n.codecs,c=n.resolution,f=n.frameRate,l=n.hdcpLevel,d=n.audio,v=void 0===d?[]:d,p=n.video,E=void 0===p?[]:p,y=n.subtitles,m=void 0===y?[]:y,T=n.closedCaptions,b=void 0===T?[]:T,w=n.currentRenditions,g=void 0===w?{audio:0,video:0,subtitles:0,closedCaptions:0}:w;a(this,t),h.PARAMCHECK(i,s),this.uri=i,this.isIFrameOnly=r,this.bandwidth=s,this.averageBandwidth=o,this.codecs=u,this.resolution=c,this.frameRate=f,this.hdcpLevel=l,this.audio=v,this.video=E,this.subtitles=m,this.closedCaptions=b,this.currentRenditions=g},SessionData:function t(n){var i=n.id,e=n.value,r=n.uri,s=n.language;a(this,t),h.PARAMCHECK(i,e||r),h.ASSERT("SessionData cannot have both value and uri, shoud be either.",!(e&&r)),this.id=i,this.value=e,this.uri=r,this.language=s},Key:function t(n){var i=n.method,e=n.uri,r=n.iv,s=n.format,o=n.formatVersion;a(this,t),h.PARAMCHECK(i),h.CONDITIONALPARAMCHECK(["NONE"!==i,e]),h.CONDITIONALASSERT(["NONE"===i,!(e||r||s||o)]),this.method=i,this.uri=e,this.iv=r,this.format=s,this.formatVersion=o},MediaInitializationSection:function t(n){var i=n.hint,e=void 0!==i&&i,r=n.uri,s=n.mimeType,o=n.byterange;a(this,t),h.PARAMCHECK(r),this.hint=e,this.uri=r,this.mimeType=s,this.byterange=o},DateRange:function t(n){var i=n.id,e=n.classId,r=n.start,s=n.end,o=n.duration,u=n.plannedDuration,c=n.endOnNext,f=n.attributes,l=void 0===f?{}:f;a(this,t),h.PARAMCHECK(i),h.CONDITIONALPARAMCHECK([!0===c,e]),h.CONDITIONALASSERT([s,r],[s,r<=s],[o,o>=0],[u,u>=0]),this.id=i,this.classId=e,this.start=r,this.end=s,this.duration=o,this.plannedDuration=u,this.endOnNext=c,this.attributes=l},SpliceInfo:function t(n){var i=n.type,e=n.duration,r=n.tagName,s=n.value;a(this,t),h.PARAMCHECK(i),h.CONDITIONALPARAMCHECK(["OUT"===i,e]),h.CONDITIONALPARAMCHECK(["RAW"===i,r]),this.type=i,this.duration=e,this.tagName=r,this.value=s},Playlist:l,MasterPlaylist:d,MediaPlaylist:v,Segment:p,PartialSegment:E,RenditionReport:function t(n){var i=n.uri,e=n.lastMSN,r=n.lastPart;a(this,t),h.PARAMCHECK(i),this.uri=i,this.lastMSN=e,this.lastPart=r}}},771:t=>{function n(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if(void 0!==z&&z.iterator in Object(t)){var i=[],e=!0,r=!1,s=void 0;try{for(var o,u=t[z.iterator]();!(e=(o=u.next()).done)&&(i.push(o.value),!n||i.length!==n);e=!0);}catch(t){r=!0,s=t}finally{try{e||null==u.return||u.return()}finally{if(r)throw s}}return i}}(t,n)||e(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,n){var i;if(void 0===z||null==t[z.iterator]){if(Array.isArray(t)||(i=e(t))||n&&t&&"number"==typeof t.length){i&&(t=i);var r=0,s=function(){};return{s:s,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,c=!1;return{s:function(){i=t[z.iterator]()},n:function(){var t=i.next();return u=t.done,t},e:function(t){c=!0,o=t},f:function(){try{u||null==i.return||i.return()}finally{if(c)throw o}}}}function e(t,n){if(t){if("string"==typeof t)return r(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?we(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(t,n):void 0}}function r(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,e=new Array(n);i<n;i++)e[i]=t[i];return e}var s={};function o(t){if(s.strictMode)throw t;s.silent}function u(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;if("number"==typeof t)return t;var i=10===n?Number.parseFloat(t,n):Number.parseInt(t,n);return Number.isNaN(i)?0:i}t.exports={THROW:o,ASSERT:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),s=1;s<e;s++)r[s-1]=arguments[s];var u,c=i(r.entries());try{for(c.s();!(u=c.n()).done;){var a=n(u.value,2),h=a[0];a[1]||o(new Error("".concat(t," : Failed at [").concat(h,"]")))}}catch(t){c.e(t)}finally{c.f()}},CONDITIONALASSERT:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var s,u=i(e.entries());try{for(u.s();!(s=u.n()).done;){var c=n(s.value,2),a=c[0],h=n(c[1],2),f=h[0],l=h[1];f&&(l||o(new Error("Conditional Assert : Failed at [".concat(a,"]"))))}}catch(t){u.e(t)}finally{u.f()}},PARAMCHECK:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var s,u=i(e.entries());try{for(u.s();!(s=u.n()).done;){var c=n(s.value,2),a=c[0];void 0===c[1]&&o(new Error("Param Check : Failed at [".concat(a,"]")))}}catch(t){u.e(t)}finally{u.f()}},CONDITIONALPARAMCHECK:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var s,u=i(e.entries());try{for(u.s();!(s=u.n()).done;){var c=n(s.value,2),a=c[0],h=n(c[1],2),f=h[0],l=h[1];f&&void 0===l&&o(new Error("Conditional Param Check : Failed at [".concat(a,"]")))}}catch(t){u.e(t)}finally{u.f()}},INVALIDPLAYLIST:function(t){o(new Error("Invalid Playlist : ".concat(t)))},toNumber:u,hexToByteSequence:function(t){(t.startsWith("0x")||t.startsWith("0X"))&&(t=t.slice(2));for(var n=[],i=0;i<t.length;i+=2)n.push(u(t.slice(i,i+2),16));return Buffer.from(n)},byteSequenceToHex:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length;i<=n&&o(new Error("end must be larger than start : start=".concat(n,", end=").concat(i)));for(var e=[],r=n;r<i;r++)e.push("0".concat((255&t[r]).toString(16).toUpperCase()).slice(-2));return"0x".concat(e.join(""))},tryCatch:function(t,n){try{return t()}catch(t){return n(t)}},splitAt:function(t,n){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,e=-1,r=0,s=0;r<t.length;r++)if(t[r]===n){if(s++===i)return[t.slice(0,r),t.slice(r+1)];e=r}return-1!==e?[t.slice(0,e),t.slice(e+1)]:[t]},trim:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return t?(t=t.trim()," "===n||(t.startsWith(n)&&(t=t.slice(1)),t.endsWith(n)&&(t=t.slice(0,-1))),t):t},splitByCommaWithPreservingQuotes:function(t){for(var n=[],i=!0,e=0,r=[],s=0;s<t.length;s++){var o=t[s];i&&","===o?(n.push(t.slice(e,s).trim()),e=s+1):'"'!==o&&"'"!==o||(i?(r.push(o),i=!1):o===r[r.length-1]?(r.pop(),i=!0):r.push(o))}return n.push(t.slice(e).trim()),n},camelify:function(t){var n,e=[],r=!1,s=i(t);try{for(s.s();!(n=s.n()).done;){var o=n.value;"-"!==o&&"_"!==o?r?(e.push(o.toUpperCase()),r=!1):e.push(o.toLowerCase()):r=!0}}catch(t){s.e(t)}finally{s.f()}return e.join("")},formatDate:function(t){var n=t.getUTCFullYear(),i=("0"+(t.getUTCMonth()+1)).slice(-2),e=("0"+t.getUTCDate()).slice(-2),r=("0"+t.getUTCHours()).slice(-2),s=("0"+t.getUTCMinutes()).slice(-2),o=("0"+t.getUTCSeconds()).slice(-2),u=("00"+t.getUTCMilliseconds()).slice(-3);return"".concat(n,"-").concat(i,"-").concat(e,"T").concat(r,":").concat(s,":").concat(o,".").concat(u,"Z")},hasOwnProp:function(t,n){return Object.hasOwnProperty.call(t,n)},setOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s=Object.assign(s,t)},getOptions:function(){return Object.assign({},s)}}}},n={},function i(e){if(n[e])return n[e].exports;var r=n[e]={exports:{}};return t[e](r,r.exports,i),r.exports}(851);var t,n}()}));const Se={MANIFEST:"manifest",SEGMENT:"segment"},_e={method:"GET",async:!0,retry:0,throwHttpErrors:!0,headers:{},hooks:{beforeRequest:[],beforeRetry:[],afterResponse:[]},validateStatus:function(t){return t>=200&&t<300},retryStatus:function(t){return[408,413,429].includes(t)||t>=500&&t<600}};function Re(t,n){this.headers={},this.perfTimings={},ki(this,n),this.ok=2==(this.status/100|0),this.body=t,this.text=()=>r.resolve(t),this.json=()=>r.resolve(JSON.parse(t)),this.blob=()=>r.resolve(new Blob([t])),this.arrayBuffer=()=>r.resolve(t),this.clone=()=>new Re(t,this),this.isVimeoResponse=!0}let Oe=function(t){function n(){var n;return(n=t.call(this,"The operation was aborted.")||this).name="AbortError",n}return E(n,t),n}(A(Error)),Ie=function(t){function n(n){var i;return(i=t.call(this,n.statusText)||this).name="HTTPError",i.response=n,i}return E(n,t),n}(A(Error)),Ne=function(t){function n(){var n;return(n=t.call(this,"A network error occurred.")||this).name="NetworkError",n}return E(n,t),n}(A(Error)),ke=function(t){function n(n){var i;return(i=t.call(this,"Request timed out.")||this).name="TimeoutError",i.timeoutMs=n,i}return E(n,t),n}(A(Error));function Me(t,n){let{url:i,method:e,body:s,onDownloadProgress:o}=t,u=100;return new r((function(r,c){const a=n?new n:new XMLHttpRequest,h=window.performance;a.open(e.toUpperCase(),i,t.async),t.timeout&&(a.timeout=t.timeout),a.onload=function(){if(0===a.status&&(!a.responseURL||0!==a.responseURL.indexOf("file:")))return;const t={};a.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,((n,i,e)=>{t[i]=t[i]?`${t[i]},${e}`:e}));let n={};if(window.performance&&void 0!==window.performance.getEntriesByType){const t=window.performance.getEntriesByType("resource");if(t.length&&t.length>=u&&("function"==typeof h.clearResourceTimings&&h.clearResourceTimings(),"function"==typeof h.setResourceTimingBufferSize&&(h.setResourceTimingBufferSize(500),u=500)),t.length){const i=t.filter((t=>t.name===a.responseURL)).sort(((t,n)=>t.connectStart-n.connectStart));i.length&&(n=i[i.length-1].toJSON())}}r(new Re(a.response,{headers:t,statusText:a.statusText,status:a.status,url:a.responseURL,perfTimings:n}))},a.onabort=function(){c(new Oe)},a.onerror=function(){c(new Ne)},a.ontimeout=function(){c(new ke(t.timeout))},"function"==typeof o&&a.addEventListener("progress",o);for(let n in t.headers)a.setRequestHeader(n,t.headers[n]);t.withCredentials&&(a.withCredentials=!0),t.responseType&&(a.responseType=t.responseType),t.abort=a.abort.bind(a),a.send(s||null)}))}function De(){}function Xe(t,n,i){if(!t.s){if(i instanceof Pe){if(!i.s)return void(i.o=Xe.bind(null,t,n));1&n&&(n=i.s),i=i.v}if(i&&i.then)return void i.then(Xe.bind(null,t,n),Xe.bind(null,t,2));t.s=n,t.v=i;const e=t.o;e&&e(t)}}const Pe=function(){function t(){}return t.prototype.then=function(n,i){const e=new t,r=this.s;if(r){const t=1&r?n:i;if(t){try{Xe(e,1,t(this.v))}catch(t){Xe(e,2,t)}return e}return this}return this.o=function(t){try{const r=t.v;1&t.s?Xe(e,1,n?n(r):r):i?Xe(e,1,i(r)):Xe(e,2,r)}catch(t){Xe(e,2,t)}},e},t}();function Ce(t){return t instanceof Pe&&1&t.s}function je(t){const n=function(t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];try{return r.resolve(t.apply(this,n))}catch(t){return r.reject(t)}}}((function(e){return function(t,n){try{var i=t()}catch(t){return n(t)}return i&&i.then?i.then(void 0,n):i}(e,(function(s){let o=!1;const u=function(n){if(!t.retryAbortErrors&&n instanceof Oe)return 0;if(n instanceof ke)return 0;if(i>=t.retry)return 0;if(n instanceof Ie){if(!t.retryStatus(n.response.status))return 0;const i=function(t){const n="retry-after".toLowerCase();for(const i in t)if(i.toLowerCase()===n)return t[i];return null}(n.response.headers);if(i&&t.retryStatus(n.response.status)){let t=Number(i);return isNaN(t)?t=Date.parse(i)-Date.now():t*=1e3,t}if(413===n.response.status)return 0}return.3*2**(i-1)*1e3}(s);return i++,function(c,a){var h=function(){if(0!==u&&i>0)return function(t,n){return void 0?n?n(t):t:(t&&t.then||(t=r.resolve(t)),n?t.then(n):t)}(_i(u),(function(){var u;const c=(null==t||null==(u=t.hooks)?void 0:u.beforeRetry)||[];return function(t,n){return t&&t.then?t.then(n):n(t)}(function(t,n,i){var e,r,s=-1;return function o(u){try{for(;++s<t.length&&(!i||!i());)if((u=n(s))&&u.then){if(!Ce(u))return void u.then(o,r||(r=Xe.bind(null,e=new Pe,2)));u=u.v}e?Xe(e,1,u):e=u}catch(t){Xe(e||(e=new Pe),2,t)}}(),e}(c,(function(n){return function(t){if(!void 0)return t&&t.then?t.then(De):r.resolve()}((0,c[n])(t,s,i))})),(function(){const t=n(e);return o=!0,t}))}))}();return h&&h.then?h.then(a):a(h)}(0,(function(n){if(o)return n;if(t.throwHttpErrors)throw s}))}))}));let i=0;return n}function Le(t,n){const i=t.then.bind(t);return Object.assign(t,{abort:n,then:(...t)=>Le(i.apply(void 0,t),n)})}function Ue(t,n,i){return i?n?n(t):t:(t&&t.then||(t=r.resolve(t)),n?t.then(n):t)}function xe(t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];try{return r.resolve(t.apply(this,n))}catch(t){return r.reject(t)}}}function Fe(t,n,i){if(!t.s){if(i instanceof $e){if(!i.s)return void(i.o=Fe.bind(null,t,n));1&n&&(n=i.s),i=i.v}if(i&&i.then)return void i.then(Fe.bind(null,t,n),Fe.bind(null,t,2));t.s=n,t.v=i;const e=t.o;e&&e(t)}}const $e=function(){function t(){}return t.prototype.then=function(n,i){const e=new t,r=this.s;if(r){const t=1&r?n:i;if(t){try{Fe(e,1,t(this.v))}catch(t){Fe(e,2,t)}return e}return this}return this.o=function(t){try{const r=t.v;1&t.s?Fe(e,1,n?n(r):r):i?Fe(e,1,i(r)):Fe(e,2,r)}catch(t){Fe(e,2,t)}},e},t}();function He(t){return t instanceof $e&&1&t.s}function Be(t,n,i){var e,r,s=-1;return function o(u){try{for(;++s<t.length&&(!i||!i());)if((u=n(s))&&u.then){if(!He(u))return void u.then(o,r||(r=Fe.bind(null,e=new $e,2)));u=u.v}e?Fe(e,1,u):e=u}catch(t){Fe(e||(e=new $e),2,t)}}(),e}function Ve(t,n){return t&&t.then?t.then(n):n(t)}const Ge=["get","post","put","patch","head","delete"],Ye={json:"application/json",text:"text/plain",arrayBuffer:"*/*",blob:"*/*"},Ke=["get"];function We(t,n){const i=xe((function(){let t=!1,i=!1;const e=n.hooks.beforeRequest||[];return Ve(Be(e,(function(s){return Ue((0,e[s])(n),(function(e){if(e instanceof qe)return n=e,void(i=!0);if(null!=e&&e.isVimeoResponse){const i=r.resolve(e).then(ze(n));return t=!0,i}}))}),(function(){return i||t})),(function(i){return t?i:Me(n).then(ze(n))}))}));n=new qe(t,n);const{method:e,json:s,jwt:o,searchParams:u}=n;if(s&&(n.headers["Content-Type"]=Ye.json,n.body=JSON.stringify(s)),o&&(n.headers.Authorization=`jwt ${o}`),u){const[t,i]=n.url.split("?");n.url=Fi(t,T(T({},xi(i)),u))}const c=-1!==Ke.indexOf(e.toLowerCase())?je(n)(i):i();for(const t in Ye)c[t]=xe((function(){return n.headers["Content-Type"]=Ye[t],Ue(c,(function(n){return n.clone()[t]()}))}));return Le(c,(()=>n.abort()))}function qe(t,n){ki(this,_e,t="string"==typeof t?{url:t}:t,n)}function ze(t){const{validateStatus:n,throwHttpErrors:i,hooks:e}=t;return xe((function(r){const s=e.afterResponse||[];return Ve(Be(s,(function(n){return Ue((0,s[n])(t,r.clone()),(function(t){t instanceof Re&&(r=t)}))})),(function(){if(!n||n(r.status))return r;if(i)throw new Ie(r);return r}))}))}Ge.forEach((function(t){return We[t]=(n,i)=>We(n,T({method:t},i)),We[t]}));const{get:Qe,post:Je,put:Ze,patch:tr,head:nr}=We,ir={ARRAY_BUFFER:"arraybuffer"};var er=Object.freeze({__proto__:null,ContentTypes:Se,defaults:_e,requestMethods:Ge,responseTypes:Ye,retryMethods:Ke,request:We,Request:qe,get:Qe,post:Je,put:Ze,patch:tr,head:nr,Response:Re,ResponseTypes:ir,AbortError:Oe,HTTPError:Ie,NetworkError:Ne,TimeoutError:ke,xhr:Me});const rr={},sr={variant:0,audio:0,subtitles:0};let or=function(t){function n(n,i){var e;return(e=t.call(this,n)||this).type=e.type.toLowerCase(),e.index=sr[e.type]++,e.id=e.uri,e.label=e.name,e.codecs=ar(i,e.type),e.url=null,e.playlist=null,e}return E(n,t),n.prototype.getSegmentBySN=function(t){return this.playlist.getSegmentBySN(t)},d(n,[{key:"mimeType",get:function(){return this.playlist&&hr(this.playlist.segments[0].uri,this.type)}},{key:"initSegment",get:function(){const t=this;return{get url(){var n;return null==(n=t.playlist)?void 0:n.initSegment.url}}}},{key:"segments",get:function(){var t;return(null==(t=this.playlist)?void 0:t.segments)||[]}},{key:"targetDuration",get:function(){var t;return null==(t=this.playlist)?void 0:t.targetDuration}},{key:"hasProgramDateTime",get:function(){return this.playlist.hasProgramDateTime}},{key:"age",get:function(){var t;return null==(t=this.playlist)?void 0:t.age}},{key:"edge",get:function(){var t;return null==(t=this.playlist)?void 0:t.edge}},{key:"parts",get:function(){var t;return(null==(t=this.playlist)?void 0:t.parts)||[]}},{key:"partTargetDuration",get:function(){var t;return null==(t=this.playlist)?void 0:t.partTargetDuration}},{key:"lowLatencyCompatibility",get:function(){return this.playlist.lowLatencyCompatibility}}])}(Ae.types.Rendition);Ae.types.Variant;Ae.types.MasterPlaylist;const ur={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/]},cr="avc1.42E01E,mp4a.40.2";function ar(t=cr,n){const i=t.split(","),e=ur[n.toLowerCase()]||[];return i.find((t=>e.some((n=>n.test(t.trim())))))}function hr(t,n){const i=t.split(".").pop().split("?")[0],e={fmp4:"mp4",m4s:"mp4",ts:"mp2t"}[i]||i||"mp4";return`${n.toLowerCase()}/${e}`}const fr=function(t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];try{return r.resolve(t.apply(this,n))}catch(t){return r.reject(t)}}}((function(t){let n=!1;return function(i,e){var s=function(){if(/json=1/.test(t))return function(t,n){return void 0?n?n(t):t:(t&&t.then||(t=r.resolve(t)),n?t.then(n):t)}(We(t).json(),(function(t){const i=t.url;return n=!0,i}))}();return s&&s.then?s.then(e):e(s)}(0,(function(i){return n?i:t}))}));Ae.types.MediaPlaylist;Ae.types.Segment,Ae.types.PartialSegment;Ae.setOptions({silent:!0});
/*! (c) Andrea Giammarchi - ISC */
var lr={};try{lr.Set=Set}catch(t){!function(t,n){var i=n(e.prototype,{size:{configurable:!0,get:function(){return this.m.length}}});function e(t){n(this,{m:{value:[]}}),t&&t.forEach(this.add,this)}function r(n,i){return-1<(t=n.m.indexOf(i))}function s(t){return[t,t]}i.add=function(t){return r(this,t)||this.m.push(t),this},i.clear=function(){var t=this.m.length;this.m.splice(0,t)},i.delete=function(n){return r(this,n)&&!!this.m.splice(t,1)},i.entries=function(){return this.m.map(s)},i.forEach=function(t,n){this.m.forEach((function(i,e){t.call(n,i,i,this)}),this)},i.has=function(t){return r(this,t)},i.keys=i.values=function(){return this.m.slice(0)},lr.Set=e}(0,Object.defineProperties)}var dr=lr.Set;function vr(t,n,i){return i?n?n(t):t:(t&&t.then||(t=r.resolve(t)),n?t.then(n):t)}let AirPlayExternalDisplay=function(t){function AirPlayExternalDisplay(n){var i;return(i=t.call(this,n)||this).ut=document.createElement("video"),i.ut.setAttribute("data-airplay",""),i.ut.setAttribute("x-webkit-airplay","allow"),i.addVideoEventListeners(),i}E(AirPlayExternalDisplay,t);var n=AirPlayExternalDisplay.prototype;return n.addVideoEventListeners=function(t=this.ut){t.addEventListener(he.LOADED_METADATA,(t=>{this.fire(he.LOADED_METADATA,t)})),t.addEventListener("webkitplaybacktargetavailabilitychanged",(t=>{switch(t.availability){case"available":this.rt||(this.rt=!0,this.fire(de.AIRPLAY_AVAILABLE));break;case"not-available":this.rt&&(this.rt=!1,this.fire(de.AIRPLAY_UNAVAILABLE))}})),t.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",(t=>{if(t.target.webkitCurrentPlaybackTargetIsWireless)return this.st=!0,void this.fire(de.AIRPLAY_ACTIVATED);this.st=!1,this.fire(de.AIRPLAY_DEACTIVATED)}))},n.showPicker=function(){this.ut.webkitShowPlaybackTargetPicker(),this.loadMetadata().then((()=>this.ut.webkitShowPlaybackTargetPicker())).catch((()=>{}))},n.loadMetadata=function(){try{const t=this;return t.ut.readyState>=1?r.resolve():vr(new r(function(t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];try{return r.resolve(t.apply(this,n))}catch(t){return r.reject(t)}}}((function(n){return t.ut.addEventListener(he.LOADED_METADATA,(()=>{n()})),vr(fr(t.getFile().src),(function(n){t.ut.src=n}))}))))}catch(t){return r.reject(t)}},d(AirPlayExternalDisplay,[{key:"element",get:function(){return this.ut},set:function(t){if(!(t instanceof HTMLVideoElement))throw new TypeError("The element for AirPlay must be a <video>.");t!==this.ut&&(this.addVideoEventListeners(t),this.ut=t,this.ut.setAttribute("x-webkit-airplay","allow"))}}],[{key:"displayName",get:function(){return"AirPlayExternalDisplay"}},{key:"supported",get:function(){return"WebKitPlaybackTargetAvailabilityEvent"in window}},{key:"supportedVideoTypes",get:function(){return["application/vnd.apple.mpegurl","video/mp4"]}}])}(ae);const pr=navigator.userAgent.toLowerCase(),Er=["googlebot","google-inspectiontool"];function yr(t){t=t.toLowerCase();const n=new RegExp(t).test(pr);return"safari"===t?n&&new RegExp("version").test(pr):n}function mr(t){const n=document.createElement("div"),i=t.charAt(0).toUpperCase()+t.slice(1),e=(t+" "+["Webkit","Moz","O","ms"].join(i+" ")+i).split(" ");for(let t in e){const i=e[t];if(void 0!==n.style[i])return i}return t}const Tr=!!yr("android")&&(parseFloat(pr.replace(/^.* android (\d+)\.(\d+).*$/,"$1.$2"))||!0),br=window.devicePixelRatio||1,wr=!(!yr("windows phone")&&!yr("iemobile"))&&(parseFloat(pr.replace(/^.* windows phone (os )?(\d+)\.(\d+).*$/,"$2.$3"))||!0),gr=!!yr("msie")&&parseFloat(pr.replace(/^.*msie (\d+).*$/,"$1")),Ar=!!yr("trident")&&parseFloat(pr.replace(/^.*trident\/(\d+)\.(\d+).*$/,"$1.$2"))+4,Sr=yr("ipad;")||yr("iphone;")||yr("ipod touch;")?parseFloat(pr.replace(/^.* os (\d+)_(\d+).*$/,"$1.$2")):navigator.userAgent.includes("Mac")&&"ontouchend"in document,_r=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Version)/i.test(navigator.userAgent),Rr="MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,Or=yr("opera")||yr("opr"),Ir=/^Mozilla\/5\.0 \(.* Mac OS X.*\(KHTML, like Gecko\)(?: Mobile\/[\S]*|)$/i.test(pr),Nr=(yr("safari")||_r)&&yr("apple")&&!yr("chrome")&&!yr("android");function kr(t){if(!Nr)return!1;const n=t.split("."),i=function(){if(!yr("safari"))return[];const t=pr.split(" ").find((function(t){return/version\//.test(t)}));return t?t.replace("version/","").split(".").map((function(t){return parseInt(t,10)})):[]}();for(let t=0;t<3;t++){const e=parseInt(n[t],10)||0,r=i[t]||0;if(e<r)return!0;if(e>r)return!1}return!0}const Mr={autoplayPolicy:kr("11"),hevc:kr("11"),dolbyVision:kr("14.1"),spatial:kr("11.0.2"),fullscreenRequiresDataLoaded:kr("17.2")},Dr={airPlay:"WebKitPlaybackTargetAvailabilityEvent"in window,android:Tr,appleMail:Ir,hasAutoplayPolicy:Tr||Sr||Mr.autoplayPolicy||function(){if(!yr("chrome"))return[];const t=pr.split(" ").find((function(t){return Sr?/CriOS\//.test(t):/chrome\//.test(t)}));return t?t.replace("chrome/","").split(".").map((function(t){return parseInt(t,10)})):[]}()[0]>=66,iOS:Sr,iPadOS:Rr,mobileAndroid:Tr&&yr("mobile"),browser:{bb10:yr("bb10"),chrome:yr("chrome"),firefox:yr("firefox"),ie:gr||Ar,edge:yr("edge"),opera:Or,safari:Nr,chromium:"chrome"in window&&!yr("crios"),webKit:Nr||yr("crios")},mse:Di,devicePixelRatio:br,iPhone:yr("iphone;")||yr("ipod touch;")||yr("ipod;"),iPad:yr("ipad;"),iPadNonRetina:yr("ipad;")&&br<2,mac:yr("mac os"),pictureInPictureSupportType:function(){if("pictureInPictureEnabled"in document)return"pip-api";const t=document.createElement("video");return!("function"!=typeof t.webkitSetPresentationMode||!t.webkitSupportsPresentationMode("picture-in-picture"))&&"webkit-presentation-mode"}(),pointerEvents:window.navigator.pointerEnabled||window.navigator.msPointerEnabled||!1,passiveEvents:function(){let t=!1;try{const n=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassive",null,n),window.removeEventListener("testPassive",null,n)}catch(t){}return t}(),svg:!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||yr("windows phone")||window.navigator.maxTouchPoints>1||window.navigator.msMaxTouchPoints||!1,transformProperty:mr("transform"),transitionProperty:mr("transition"),webp:function(){const t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))&&0===t.toDataURL("image/webp").indexOf("data:image/webp")}(),windowsPhone:wr,mediaCapabilities:"mediaCapabilities"in navigator,isGoogleBot:(()=>{const t=pr.toLowerCase();return Er.some((n=>t.includes(n)))})(),storageAccessAPI:"requestStorageAccess"in document&&"hasStorageAccess"in document,clipboardAPI:"clipboard"in navigator&&"write"in navigator.clipboard,videoContentPreload:!yr("iphone"),intersectionObserver:"IntersectionObserver"in window},Xr=/mac os x 10_13/.test(pr),Pr=Dr.iOS&&Dr.iOS>=11,Cr="undefined"!=typeof matchMedia&&(matchMedia("(color-gamut: p3)").matches&&screen.pixelDepth>24||matchMedia("(dynamic-range: high), (video-dynamic-range: high)").matches);Dr.hevc=function(t="hvc1"){return void 0!==Di?Di.isTypeSupported(`video/mp4; codecs="${t}"`):Mr.hevc&&(Xr||Pr)}("hvc1.2.4.H150.90"),Dr.hdr=Cr,Dr.dolbyVision=function(){const t='video/mp4; codecs="dvh1"';let n=void 0!==Di&&Di.isTypeSupported(t);if(!n){const i=document.createElement("video");"canPlayType"in i&&(n="probably"===i.canPlayType(t))}return!((Rr||Dr.iOS)&&!Mr.dolbyVision)&&n}(),Dr.vp9hdr=(window.matchMedia("(color-gamut: p3)").matches||window.matchMedia("(color-gamut: rec2020)").matches)&&screen.colorDepth>=48&&(Di.isTypeSupported('video/webm; codecs="vp09.02.10.10.01.09.16.09.00"')||Di.isTypeSupported('video/webm; codecs="vp09.02.10.10.01.09.16.09.01"')||Di.isTypeSupported('video/webm; codecs="vp09.02.10.10.01.09.18.09.00"')||Di.isTypeSupported('video/webm; codecs="vp09.02.10.10.01.09.18.09.01"')),Dr.av1=void 0!==Di&&Di.isTypeSupported('video/mp4; codecs="av01.0.31M.08.0.110.01.01.01.0"'),Dr.webvr=!(!window.navigator||!("getVRDisplays"in window.navigator)),Dr.webxr=!!(window.navigator&&"xr"in window.navigator&&"supportsSession"in window.navigator.xr),Dr.spatialPlayback=!!Dr.mse,Dr.stereoscopic=Dr.spatialPlayback&&Dr.mobileAndroid,Dr.fullscreenRequiresDataLoaded=Dr.iOS>=17||Dr.iPadOS&&Mr.fullscreenRequiresDataLoaded,(()=>{const t=navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)\.([0-9]+)\./);t&&(parseInt(t[1],10),parseInt(t[2],10))})();const jr=function(t){for(let n=0,i=this.length;n<i;n++)if(this[n].id===`${t}`)return this[n];return null};function Lr(t=[]){return t.item=function(t){return this[t]},t.getTrackById=jr,t}function Ur(t){const n=window.atob(t),i=n.length,e=new Uint8Array(i);for(let t=0;t<i;t++)e[t]=n.charCodeAt(t);return e}function xr(t,n,i,e){let r=0,s=0,o=0,u=0;const c=t,a=n,h=i/e;return c/a>=h?(s=a,r=(h*a).toFixed(2)):(r=c,s=(c/h).toFixed(2)),o=Math.max((c-r)/2,0),u=Math.max((a-s)/2,0),{width:r,height:s,left:o,top:u}}function Fr(t){if(function(t){return"webkitDisplayingFullscreen"in t&&t.webkitDisplayingFullscreen}(t))return!0;const n=[document.fullscreenElement,document.webkitFullscreenElement,document.webkitCurrentFullScreenElement,document.mozFullScreenElement,document.msFullscreenElement].find((t=>void 0!==t));return Boolean(n)}function $r(t,n){let i=t;return n&&(i+=`;codecs="${n}"`),i}function Hr(t,n=3){if(t=parseFloat(t),isNaN(t))return 0;const i=Math.pow(10,n);return Math.round(t*i)/i}let TelecineError=function(t,n){this.name=t,this.message=n,Object.freeze(this)};const Br=new yi;let Vr=function(){function t(t,n={}){const i=parseFloat(t);if(isNaN(i))throw new TypeError("Time must be a number.");if(i<0)throw new TypeError("Time must be a positive number.");this.time=t,this.data=n,this.id=$i();try{const i="undefined"==typeof VTTCue?TextTrackCue:VTTCue;this.vttCue=new i(t,t+.25,JSON.stringify(n)),this.vttCue.id=this.id}catch(t){throw new TelecineError("CuePointsNotSupported","Cue points are not supported in this browser.")}Br.set(this.vttCue,this),Object.freeze(this)}return t.fromVTTCue=function(n){if(Br.has(n))return Br.get(n);let i={};try{i=JSON.parse(n.text)}catch(t){}return new t(n.startTime,i)},t}();function Gr(t,n,i){let e;try{document.removeChild({})}catch(r){e=Object.create(Object.getPrototypeOf(r),{name:{value:n,configurable:!0,writable:!0},code:{value:t,configurable:!0,writable:!0},message:{value:i,configurable:!0,writable:!0},toString:{value:()=>`${n}: DOM Exception ${t}`,configurable:!0,writable:!0}})}return Object.freeze(e)}const Yr=(t,n)=>{if(!t||void 0===t[n])throw Gr(1,"INDEX_SIZE_ERR");return t[n]};function Kr(t=[],n=[]){return Object.freeze({get length(){return t.length},start:n=>Yr(t,n),end:t=>Yr(n,t),[z.iterator]:()=>function(t,n){let i=0;return{[z.iterator](){return this},next:()=>i<t.length?{done:!1,value:n?[t[i],n[i++]]:t[i++]}:{done:!0}}}(t,n)})}Kr.from=function(t){if(!(t instanceof TimeRanges))throw new TypeError("Can only create a TelecineTimeRange from a TimeRanges object.");const n=[],i=[];for(let e=0,r=t.length;e<r;e++)n.push(t.start(e)),i.push(t.end(e));return Kr(n,i)};const Wr="DRMFailure",qr="MediaUnknownError",zr="inline",Qr="picture-in-picture";function Jr(){}const Zr=document.createElement("video"),ts={"application/vnd.apple.mpegurl":"application/vnd.apple.mpegurl","video/mp4":'video/mp4; codecs="avc1.64001E"',"video/webm":'video/webm; codecs="vp8, vorbis"',"video/x-flv":'video/x-flv; codecs="vp6"'},ns=function(){const t="undefined"==typeof TextTrack?{}:TextTrack;return{disabled:"DISABLED"in t?t.DISABLED:"disabled",hidden:"HIDDEN"in t?t.HIDDEN:"hidden",showing:"SHOWING"in t?t.SHOWING:"showing"}}();function is(t,n,i){return i?n?n(t):t:(t&&t.then||(t=r.resolve(t)),n?t.then(n):t)}const es=function(){const t=document.createElement("track");return"track"in t&&"oncuechange"in t.track}(),rs=new yi;let ss=function(t){function n(n,i={}){var e;(e=t.call(this)||this).ct=n,e.ht=i,e.ft=null,e.lt=null,e.dt=[];let r=n.querySelector("video");return r||(r=document.createElement("video"),r.preload="none",e.ct.appendChild(r)),r.setAttribute("tabindex","-1"),e.ot=r,i.playRequest&&(e.vt=i.playRequest,e.vt.video=r),i.htmlScanner&&i.htmlScanner.controls&&(e.ot.controls=!0),e.Et=e.handleVideoEvent.bind(e),e.yt=e.handleAudioEvent.bind(e),e.addVideoEventListeners(),e.addAudioEventListeners(),e.Tt="none",e.bt=!1,e.wt=!1,e.gt=-1,e.At=!1,e}E(n,t),n.supported=function(){return n.supportedVideoTypes.length>0};var i=n.prototype;return i.deactivate=function(){this.ft&&(this.ft.off(ve.FILE_SRC_UPDATE),this.ft.off("texttracksrcupdate")),this.removeVideoEventListeners(),this.removeAudioEventListeners(),this.At||this.removeSnapshot(),this.ot.style.display="none"},i.reactivate=function(){this.addVideoEventListeners(),this.addAudioEventListeners(),this.ot.style.display=""},i.addVideoEventListeners=function(t=this.ot){Object.keys(he).forEach((n=>{const i=he[n];t.addEventListener(i,this.Et)}))},i.addAudioEventListeners=function(t=this.ot){var n;null!=t&&t.audioTracks&&"function"==typeof(null==(n=t.audioTracks)?void 0:n.addEventListener)&&(t.audioTracks.addEventListener(fe.ADD_TRACK,this.yt),t.audioTracks.addEventListener(fe.REMOVE_TRACK,this.yt),t.audioTracks.addEventListener(fe.CHANGE,this.yt))},i.removeVideoEventListeners=function(t=this.ot){Object.keys(he).forEach((n=>{const i=he[n];t.removeEventListener(i,this.Et)}))},i.removeAudioEventListeners=function(t=this.ot){var n;null!=t&&t.audioTracks&&"function"==typeof(null==(n=t.audioTracks)?void 0:n.removeEventListener)&&(t.audioTracks.removeEventListener(fe.ADD_TRACK,this.yt),t.audioTracks.removeEventListener(fe.REMOVE_TRACK,this.yt),t.audioTracks.removeEventListener(fe.CHANGE,this.yt))},i.play=function(t){return this.vt.start(t).catch((t=>{var n;if("sd-fallback"!==(null==(n=this.ft.drmHandler)?void 0:n.state)||"AbortError"!==t.name)throw this.St(t),t}))},i.St=function(t){this.fire(he.ERROR,new TelecineError(null==t?void 0:t.name,null==t?void 0:t.message))},i.pause=function(){this.vt.cancel(),this.ot.pause()},i.onpause=function(){},i.ontimeupdate=function(){this.gt=this.currentTime},i.addTextTrack=function(t){let n,i;return t.src?(n=document.createElement("track"),n.kind=t.kind,n.src=t.src,n.id=`telecine-track-${t.id}`,n.srclang=t.language,n.label=t.label,this.ot.appendChild(n),i=n.track):(i=this.ot.addTextTrack(t.kind,t.label,t.language),this._t=this._t||{},this._t[`telecine-track-${t.id}`]=i),this.Rt(t,i,n),i},i.Rt=function(t,n,i){n.addEventListener("cuechange",(()=>t.dispatchEvent("cuechange"))),this.ot.addEventListener("timeupdate",(()=>{Fr(this.ot)&&(t.mode=n.mode)}));const e=()=>{const i=Dr.iOS&&Fr(this.ot);!t.Ot||i?t.mode=n.mode:n.mode=ns[t.mode]},r=[];if(i?i.addEventListener("load",e):e(),["loadeddata","seeking"].forEach((t=>{this.ot.addEventListener(t,e),r.push([t,e])})),t.Ot&&(n.mode=ns[t.mode]),!es){let i=[];const e=()=>{if(n&&"disabled"!==ns[n.mode]){if(i.length!==n.activeCues.length)return t.dispatchEvent("cuechange"),void(i=we(n.activeCues));for(let e=0,r=n.activeCues.length;e<r;e++)if(n.activeCues[e].startTime!==i[e].startTime)return t.dispatchEvent("cuechange"),void(i=we(t.activeCues))}};this.ot.addEventListener("timeupdate",e),r.push(["timeupdate",e])}return rs.set(t,r),n},i.removeTextTrack=function(t){const n=this.ot.querySelector(`#telecine-track-${t.id}`);n&&this.ot.removeChild(n);const i=rs.get(t);Array.isArray(i)&&i.forEach((([t,n])=>{this.ot.removeEventListener(t,n)}))},i.getCuesForTrack=function(t){const n=this.getTrackById(`telecine-track-${t.id}`);return n?we(n.cues):[]},i.getActiveCuesForTrack=function(t){const n=this.getTrackById(`telecine-track-${t.id}`);return n&&n.activeCues?we(n.activeCues):[]},i.setModeForTrack=function(t,n){const i=this.getTrackById(`telecine-track-${t.id}`);return i&&i.mode!==ns[n]&&(i.mode=ns[n],es||"disabled"===n||t.dispatchEvent("cuechange")),this},i.setSrcForTrack=function(t,n){const i=this.ot.querySelector(`#telecine-track-${t.id}`);return i&&null===i.track.cues&&(i.src=n),this},i.enableAudioTrack=function(t){if(!this.constructor.supportsVideoElementAudioTracks||!this.audioTracks)return null;if(!t)return null;if(!this.audioTracks.getTrackById(t))return null;let n=null;for(let i=0;i<this.audioTracks.length;i++){const e=this.audioTracks[i].id===t;this.audioTracks[i].enabled=e,e&&(n=this.audioTracks[i])}return n},i.It=function(t,n,i=null){let e;this.Nt||(this.Nt=this.ot.addTextTrack("chapters"),this.Nt.mode="hidden");const r=t.timecode,s=i?i.timecode:n,o=window.VTTCue||window.TextTrackCue;try{e=new o(r,s,t.title)}catch(t){throw new TelecineError("ChaptersNotSupported","Chapters are not supported in this browser.")}e.size=(s-r)/n,e.id=r,this.Nt.addCue(e)},i.addChapter=function(t,n){const i=this.video.chapters,e={timecode:t,title:n};i.push(e),i.sort(((t,n)=>t.timecode-n.timecode));const r=i[i.indexOf(e)+1];this.It(e,this.video.duration,r),this.kt(this.Nt,this.video.duration)},i.removeChapter=function(t){try{this.Nt.removeCue(t)}catch(t){throw new TelecineError("ChaptersNotSupported","Chapters are not supported in this browser.")}const n=this.video.chapters.find((n=>n.timecode===t.timecode));this.video.chapters.splice(n,1),this.kt(this.Nt,this.video.duration)},i.kt=function(t,n){for(let i=0;i<t.cues.length;i++){let e=t.cues[i],r=t.cues[i+1];const s=r?r.startTime:n;e.endTime=s,e.size=(s-e.startTime)/n}this.fire(ve.CHAPTER_CUES_UPDATED)},i.addChapters=function(t,n){0!==t.length&&n&&(t=t.filter((t=>this.Mt(t,n)))).sort(((t,n)=>t.timecode-n.timecode)).forEach(((i,e)=>this.It(i,n,t[e+1])))},i.addCuePoint=function(t,n={}){if(this.Dt||(this.Dt=this.ot.addTextTrack("metadata"),this.Dt.mode="hidden",this.Dt.addEventListener("cuechange",(t=>{we(t.target.activeCues).forEach((t=>{this.fire(ve.CUE_POINT,Vr.fromVTTCue(t))}))})),this.ot.addEventListener("canplay",(t=>{this.Dt.mode="hidden"}))),t=parseFloat(t),isNaN(t))throw new TypeError("Time must be a number.");if(t<0||t>=this.duration)throw new TypeError("Time must be a positive number less than the duration of the video.");const i=new Vr(t,n);return this.Dt.addCue(i.vttCue),i},i.removeCuePoint=function(t){if(!t)throw new TelecineError("InvalidCuePoint","The specified cue point is not valid.");return this.Dt.removeCue(t.vttCue),!0},i.removeAllCuePoints=function(){return this.Dt&&this.Dt.length&&we(this.Dt.cues).forEach((t=>{this.Dt.removeCue(t)})),!0},i.requestPictureInPicture=function(){try{const t=this;return is(function(n,i){var e=function(){if(t.ot.readyState<1)return function(t){if(!void 0)return t&&t.then?t.then(Jr):r.resolve()}(t.Xt())}();return e&&e.then?e.then(i):i()}(0,(function(){switch(Dr.pictureInPictureSupportType){case"pip-api":return t.ot.requestPictureInPicture();case"webkit-presentation-mode":return t.ot.webkitSetPresentationMode(Qr);default:throw new Error("Picture-in-picture is not supported by this browser")}})))}catch(t){return r.reject(t)}},i.Xt=function(){return this.preload="auto",new r((t=>{this.once(he.LOADED_METADATA,t)}))},i.exitPictureInPicture=function(){try{const t=this;switch(Dr.pictureInPictureSupportType){case"pip-api":return is(document.exitPictureInPicture());case"webkit-presentation-mode":return is(t.ot.webkitSetPresentationMode(zr));default:throw new Error("Picture-in-picture is not supported by this browser")}}catch(t){return r.reject(t)}},i.onerror=function(){if(!this.ot.error)return!1;switch(this.ot.error.code){case this.ot.error.MEDIA_ERR_SRC_NOT_SUPPORTED:return this.Pt("MediaSrcNotSupportedError","The media was not suitable."),this.Ct(),!1;case this.ot.error.MEDIA_ERR_DECODE:return-1!==this.gt&&Dr.iOS?(this.ot.load(),this.currentTime=this.gt,this.gt=-1,!1):(this.Pt("MediaDecodeError","The media could not be decoded."),this.Ct(),!1);case this.ot.error.MEDIA_ERR_NETWORK:return this.Pt("MediaNetworkError","A network error ocurred while fetching the media."),!1;case this.ot.error.MEDIA_ERR_ABORTED:return this.Pt("MediaAbortedError","The user agent aborted the fetching of the media."),!1;default:return this.Pt(qr,"An unknown error occurred."),!1}},i.Pt=function(t,n){this.fire(he.ERROR,new TelecineError(t,n))},i.onended=function(){if(this.ot.paused||this.ot.pause(),this.currentTime<this.ot.duration)return!1},i.onwaiting=function(){return!1},i.onwebkitbeginfullscreen=function(){this.wt=!0},i.onwebkitendfullscreen=function(){this.ot.webkitPresentationMode===zr&&!0===this.ot.controls&&(this.ot.controls=!1),this.wt=!1},i.onwebkitpresentationmodechanged=function(){this.fire(this.pictureInPictureActive?he.ENTER_PICTURE_IN_PICTURE:he.LEAVE_PICTURE_IN_PICTURE)},i.shouldHandleVideoEvent=function(t){return!0},i.handleVideoEvent=function(t){t.target===this.ot&&!1!==this.shouldHandleVideoEvent(t)&&("function"==typeof this[`on${t.type}`]&&!1===this[`on${t.type}`](t)||this.fire(t.type))},i.handleAudioEvent=function(){this.fire(ve.AUDIO_TRACK_CHANGED)},i.swapVideo=function(t,n){const i=t.paused;this.removeVideoEventListeners(t),this.removeAudioEventListeners(t),t.parentElement.replaceChild(n,t),t.pause(),n.currentTime=t.currentTime,i||n.play(),this.addVideoEventListeners(n),this.addAudioEventListeners(n),this.ot=n},i.onexternaldisplayactivated=function(t){this.bt||(this.ot!==t.element&&(this.jt=this.ot,this.swapVideo(this.ot,t.element)),this.bt=!0)},i.onexternaldisplaydeactivated=function(t){this.bt&&(this.jt&&(this.swapVideo(t.element,this.jt),this.jt=null),this.bt=!1)},i.setVideoSrc=function(t){this.ot.src=t},i.canSeekTo=function(t){const n=this.duration;if(n&&t>n&&(t=n),this.ot.seekable.length>0)for(let n=0,i=this.ot.seekable.length;n<i;n++)if(this.ot.seekable.start(n)<=t&&this.ot.seekable.end(n)>=t)return!0;return!1},i.seekToTime=function(t){return this.canSeekTo(t)?(this.ot.currentTime=t,r.resolve(this.ot.currentTime)):new r((n=>{const i=()=>{this.canSeekTo(t)&&(Object.keys(he).forEach((t=>{const n=he[t];this.ot.removeEventListener(n,i)})),this.ot.currentTime=t,n(this.ot.currentTime))};Object.keys(he).forEach((t=>{const n=he[t];this.ot.addEventListener(n,i)}))}))},i.takeSnapshot=function(){let t=this.ct.querySelector("[telecine-snapshot]");t||(t=document.createElement("canvas"),t.setAttribute("telecine-snapshot",""),this.ct.appendChild(t)),t.setAttribute("width",`${this.ct.clientWidth}px`),t.setAttribute("height",`${this.ct.clientHeight}px`),t.style.display="";const{width:n,height:i,left:e,top:r}=xr(this.ot.clientWidth,this.ot.clientHeight,this.ot.videoWidth,this.ot.videoHeight);t.style.cssText=`position:absolute;width:${n}px;height:${i}px;left:${e}px;top:${r}px`;const s=t.getContext("2d");t.width>0&&t.height>0&&s.drawImage(this.ot,0,0,t.width,t.height)},i.removeSnapshot=function(){const t=this.ct.querySelector("[telecine-snapshot]");t&&(t.style.display="none")},i.getTrackById=function(t){if(this._t&&this._t[t])return this._t[t];if("function"==typeof this.ot.textTracks.getTrackById)return this.ot.textTracks.getTrackById(t);const n=document.getElementById(t);return n?n.track:null},i.initDrm=function(){const t=this.ft.drmHandler;t&&t.init(this)},i.showExternalDisplayPicker=function(t){if(!this.dt.length)throw new TelecineError("ExternalDisplayUnvailable","No external displays are available.");if(!t)return void this.dt[0].showPicker();const n=this.dt.filter((n=>n.constructor.displayName.replace("ExternalDisplay","")===t))[0];if(!n)throw new TelecineError("InvalidExternalDisplay","The specified external display is not available.");n.showPicker()},i.setCaptionsShouldDisplay=function(t){},i.setCaptionsShouldLoad=function(t){},i.Lt=function(){return this.Ut.length<1?null:this.Ut.slice(0).sort(((t,n)=>t.priority-n.priority))[0]},i.xt=function(){const t=this.Lt();t?this.currentFile=t:this.fire(ve.SCANNER_ERROR,{reason:"all files failed"})},i.Mt=function(t,n){return void 0!==t.timecode&&t.timecode>=0&&t.timecode<=n&&void 0!==t.title},i.Ct=function(){const t=this.Ut.indexOf(this.lt);this.Ut.splice(t,1),this.xt()},d(n,[{key:"audioTracks",get:function(){return this.ot.audioTracks}},{key:"chaptersTrack",get:function(){return this.Nt}},{key:"manifest",get:function(){return this.Ft}},{key:"manifestLoaded",get:function(){return!!this.Ft}},{key:"buffered",get:function(){return Kr.from(this.ot.buffered)}},{key:"cuePoints",get:function(){var t,n;return null!=(t=this.Dt)&&t.cues&&"function"==typeof(null==(n=this.Dt)?void 0:n.cues[z.iterator])?we(this.Dt.cues).map((t=>Vr.fromVTTCue(t))):[]}},{key:"currentFile",get:function(){return this.lt},set:function(t){const i=!this.ot.paused,e=this.currentTime,r=!this.lt||t.video.id!==this.lt.video.id;if(r||this.takeSnapshot(),this.lt=t,r&&(this.ot.preload=this.Tt),this.constructor===n&&this.ot.readyState>0&&(this.ot.currentTime=0),(Dr.iOS||Dr.android)&&this.lt.video.title){let t=this.lt.video.title;this.lt.video.subtitle&&(t=`${t} ${this.lt.video.subtitle}`),this.ot.setAttribute("title",t)}else this.ot.removeAttribute("title");this.setVideoSrc(this.lt.src,r),this.fire(ve.CURRENT_FILE_CHANGE,t),Dr.iOS&&!r&&this.play().catch(this.St.bind(this)),this.constructor!==n||r?i&&this.play().catch(this.St.bind(this)):(this.seekToTime(e).then((t=>(i&&this.play().catch(this.St.bind(this)),t))).catch((()=>{})),this.once("canplay",(()=>this.removeSnapshot())),this.once("playing",(()=>this.removeSnapshot())))}},{key:"currentTime",get:function(){return this.ot.currentTime},set:function(t){this.seekToTime(t)}},{key:"duration",get:function(){return this.ot.duration}},{key:"ended",get:function(){return this.ot.ended}},{key:"externalDisplayAvailable",get:function(){return this.dt.some((t=>t.available))}},{key:"externalDisplayActive",get:function(){return this.dt.some((t=>t.active))}},{key:"loop",get:function(){return this.ot.loop},set:function(t){this.ot.loop=t}},{key:"isLowerProfileAvailable",get:function(){return null}},{key:"muted",get:function(){return this.ot.muted},set:function(t){this.ot.muted=t}},{key:"playsinline",get:function(){return this.ot.playsinline},set:function(t){this.ot.playsinline=t,t?this.ot.setAttribute("playsinline",""):this.ot.removeAttribute("playsinline")}},{key:"paused",get:function(){return this.ot.paused}},{key:"defaultPlaybackRate",get:function(){return this.ot.defaultPlaybackRate},set:function(t){this.ot.defaultPlaybackRate=t}},{key:"playbackRate",get:function(){return this.ot.playbackRate},set:function(t){this.ot.playbackRate=t}},{key:"played",get:function(){return this.ot.played}},{key:"seekable",get:function(){return this.ot.seekable}},{key:"seeking",get:function(){return this.ot.seeking}},{key:"preload",get:function(){return this.Tt},set:function(t){this.ot.preload=t,this.Tt=t}},{key:"autoPictureInPicture",get:function(){return this.ot.autoPictureInPicture},set:function(t){this.ot.autoPictureInPicture=t}},{key:"disablePictureInPicture",get:function(){return this.ot.disablePictureInPicture},set:function(t){this.ot.disablePictureInPicture=t}},{key:"pictureInPictureActive",get:function(){return this.ot.webkitPresentationMode===Qr||!!document.pictureInPictureElement}},{key:"pictureInPictureEnabled",get:function(){if(this.disablePictureInPicture)return!1;switch(Dr.pictureInPictureSupportType){case"pip-api":return document.pictureInPictureEnabled;case"webkit-presentation-mode":return!0;default:return!1}}},{key:"video",get:function(){return this.ft},set:function(t){if(this.reactivate(),this.ft!==t){if(this.ft&&(this.ft.off(ve.FILE_SRC_UPDATE),this.ft.off("texttracksrcupdate")),this.removeAllCuePoints(),this.ft=t,this.Ut=t.files.filter((t=>-1!==this.constructor.supportedVideoTypes.indexOf(t.mime))),this.ft.on(ve.FILE_SRC_UPDATE,(t=>{t===this.lt&&this.xt()})),this.ft.on("texttracksrcupdate",(t=>{this.video.currentScanner&&this.video.currentScanner.setSrcForTrack(t,t.src)})),this.ht.externalDisplays&&this.ht.externalDisplays.length){this.dt=[];let n=this.constructor.supportedExternalDisplays;Array.isArray(n)||(n=[]);const i=n.map((t=>t.displayName));this.ht.externalDisplays.filter((t=>t.supported&&-1!==i.indexOf(t.displayName))).forEach((n=>{const i=new n(t),e=n.displayName.replace("ExternalDisplay","");i.on(he.LOADED_METADATA,(t=>this.fire(he.LOADED_METADATA,t))),i.on("available",(()=>this.fire(le.AVAILABLE,{type:e}))),i.on("unavailable",(()=>this.fire(le.UNAVAILABLE,{type:e}))),i.on("activated",(()=>{"function"==typeof this.onexternaldisplayactivated&&this.onexternaldisplayactivated(i),this.fire(le.ACTIVATED,{type:e})})),i.on("deactivated",(()=>{"function"==typeof this.onexternaldisplaydeactivated&&this.onexternaldisplaydeactivated(i),this.fire(le.DEACTIVATED,{type:e})})),this.dt.push(i)}))}this.xt(),Dr.iOS&&this.dt.forEach((t=>{"AirPlay"===t.constructor.displayName&&(t.element=this.ot)})),this.initDrm()}}},{key:"videoElement",get:function(){return this.ot}},{key:"videoWidth",get:function(){return this.ot.videoWidth}},{key:"videoHeight",get:function(){return this.ot.videoHeight}},{key:"volume",get:function(){return(t=>Math.sqrt(t))(this.ot.volume)},set:function(t){this.ot.volume=(t=>Math.pow(t,2))(t)}},{key:"readyState",get:function(){return this.ot.readyState}}],[{key:"displayName",get:function(){return"HTMLScanner"}},{key:"supportedVideoTypes",get:function(){const t=[];if("function"!=typeof Zr.canPlayType)return t;for(const n in ts){const i=ts[n];Dr.android&&"application/vnd.apple.mpegurl"===n||(Dr.android&&!Dr.mobileAndroid&&"video/mp4"===n&&Dr.android instanceof String?parseInt(Dr.android.split(".")[0],10)>3&&t.push(n):Zr.canPlayType(i).replace(/^no$/,"")&&t.push(n))}return t}},{key:"supportedAudioTypes",get:function(){return[]}},{key:"supportedExternalDisplays",get:function(){return[AirPlayExternalDisplay]}},{key:"supportsVideoElementAudioTracks",get:function(){return void 0!==Zr.audioTracks&&this.supportedVideoTypes.includes("application/vnd.apple.mpegurl")}}])}(bi);function os(t,n=[]){if(0===t.length)return 0;let i=0,e=0;for(let r=0;r<t.length;r++){const s=n[r]||1;e+=s,i+=t[r]*s}return i/e}function us(t){const n=w(t).sort(((t,n)=>t-n)),i=Math.floor(n.length/2);return n.length%2?n[i]:(n[i-1]+n[i])/2}let cs=function(t){function n(){return t.apply(this,arguments)||this}return E(n,t),n}(A(Error));function as(t,n,i){return i?n?n(t):t:(t&&t.then||(t=r.resolve(t)),n?t.then(n):t)}const hs=fs((function(t,n){const i=this;return function(t,n){var e=function(){if(!c(Ss,i))return as(o(Ds,i,Gs).call(i),(function(t){h(Ss,i,new t({keepOriginalTimestamps:!0}))}))}();return e&&e.then?e.then(n):n()}(0,(function(){return new r((e=>{c(Ss,i).on("data",(n=>{c(Ss,i).off("data");let r=new Uint8Array(n.initSegment.byteLength+n.data.byteLength);r.set(n.initSegment,0),r.set(n.data,n.initSegment.byteLength),e(t.data.isInitSegmentRequest?n.initSegment:r)})),c(Ss,i).push(new Uint8Array(n)),c(Ss,i).flush()}))}))}));function fs(t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];try{return r.resolve(t.apply(this,n))}catch(t){return r.reject(t)}}}const ls=fs((function(){const t=this;return function(){var n=function(){if(c(_s,t))return function(t){if(!void 0)return t&&t.then?t.then(ds):r.resolve()}(c(_s,t))}();if(n&&n.then)return n.then(ds)}()}));function ds(){}var vs=new yi,ps=new yi,Es=new yi,ys=new yi,ms=new yi,Ts=new yi,bs=new yi,ws=new yi,gs=new yi,As=new yi,Ss=new yi,_s=new yi,Rs=new yi,Os=new yi,Is=new yi,Ns=new yi,ks=new yi,Ms=new yi,Ds=new WeakSet;let Xs=function(t){function n(n={}){var i;f(i=t.call(this)||this,Ds),a(i,vs,void 0),a(i,ps,void 0),a(i,Es,void 0),a(i,ys,100),a(i,ms,void 0),a(i,Ts,void 0),a(i,bs,void 0),a(i,ws,new dr),a(i,gs,void 0),a(i,As,!1),a(i,Ss,void 0),a(i,_s,void 0),a(i,Rs,!1),a(i,Os,[]),a(i,Is,[]),a(i,Ns,[]),a(i,ks,[]),a(i,Ms,[]),h(ps,i,Ni("Fetcher","color: #586e75"));const{includeWithSpeeds:e=!0,parallel:r=1,retryAbortErrors:s=!0,retryCount:u=3,timeout:c=0}=n;return h(vs,i,e),h(Es,i,r),h(ms,i,s),h(Ts,i,u),h(bs,i,c),o(Ds,i,Cs).call(i),i}E(n,t);var i=n.prototype;return i.getPercentileSpeed=function(t=5,n=.8){return function(t,n){if(0===t.length)return 0;const i=w(t).sort(((t,n)=>t-n));if(n<=0)return i[0];if(n>=1)return i[i.length-1];const e=i.length*n,r=Math.floor(e),s=r+1,o=e%1;return s>=i.length?i[r]:i[r]*(1-o)+i[s]*o}(c(Ms,this).slice(-t),n)},i.getAverageSpeed=function(t=5,n=[]){return os(c(Ms,this).slice(-t),n)},i.getHarmonicAverageSpeed=function(t=5){return function(t){if(0===t.length)return 0;let n=0;for(let i=0;i<t.length;i++)n+=1/t[i];return t.length/n}(c(Ms,this).slice(-t))},i.getMedianSpeed=function(t=5){return us(c(Ms,this).slice(-t))},i.getResponseSpeeds=function(){return c(Ms,this)},i.getProgressSpeeds=function(){return c(ks,this)},i.getFailedSegments=function(){return c(Is,this)},i.getSuccessfulSegments=function(){return c(Ns,this)},i.resetResponseSpeeds=function(){c(Ms,this).length=0},i.add=function(t){return new r(((n,i)=>{const e=o(Ds,this,Us).call(this,t,n,i);o(Ds,this,js).call(this,e),c(As,this)&&!c(Rs,this)&&o(Ds,this,Ls).call(this)}))},i.abort=function(t=null){c(Os,this).filter((n=>!t||t===n.stream)).forEach((t=>{t.reject(new cs("Stream manually aborted")),this.fire("downloadabort",t.identifier)})),h(Os,this,c(Os,this).filter((n=>t&&t!==n.stream))),c(ws,this).forEach((n=>{t&&t!==n.stream||n.request.abort()}))},i.start=function(){c(As,this)||(h(As,this,!0),o(Ds,this,Ls).call(this))},i.stop=function(){h(As,this,!1)},i.saveResponseSpeeds=function(t,n,i){const e=n/1e3,r=t.perfTimings;if(c(vs,this)&&t.includeWithBandwidthChecks){const n=8*i,s=r&&i<=16e3;let o=n/e;if(t.excludeConnectTime&&i>16e3&&i<=2e5){const t=(50*Math.max(0,1-n/16e5)+150)/1e3;o=n/Math.max(.1,e-t)}else if(s){const t=r.fetchStart||r.workerStart||r.requestStart||0;o=n/(e-Math.max(0,r.responseStart-t)/1e3)}c(Ms,this).push(o)}c(Ms,this).length>100&&c(Ms,this).shift()},d(n,[{key:"pendingFetches",get:function(){const t=[];return c(ws,this).forEach((n=>{const i=c(gs,this).get(n);i&&(i.elapsedTime=ji()-n.data.requestSendTime,t.push(i))})),t}}])}(bi);function Ps(t){let n=0;for(;n<c(Os,this).length&&!(c(Os,this)[n].priority>t.priority);n++);c(Os,this).splice(n,0,t)}function Cs(){h(gs,this,new yi),window.addEventListener("online",(()=>{this.start(),c(_s,this)&&(c(_s,this).resolve(),h(_s,this,null))})),window.addEventListener("offline",(()=>{this.stop(),this.abort(),h(_s,this,Xi())}))}function js(t){t.hasOwnProperty("priority")?o(Ds,this,Ps).call(this,t):c(Os,this).push(t)}function Ls(){if(!c(As,this))return;h(Rs,this,!0);const t=c(Es,this)-c(ws,this).size;for(let n=0;n<t;n++)o(Ds,this,Fs).call(this)}function Us(t,n,i){let e=t;return"object"==typeof t&&t.id&&(e=t.id),Object.assign({},t,{identifier:e,resolve:n,reject:i})}function xs(){0!==c(ws,this).size||0!==c(Os,this).length?c(ws,this).size<c(Es,this)&&o(Ds,this,Ls).call(this):h(Rs,this,!1)}function Fs(){if(0===c(Os,this).length)return void h(Rs,this,!1);const t=c(Os,this).shift(),{url:n,byteRange:i,isInitSegmentRequest:e,identifier:r,stream:s,timeout:u}=t,a={stream:s,data:{url:n,isInitSegmentRequest:e,requestSendTime:ji(),uuid:$i()}};let f=c(bs,this);"number"==typeof u&&u>=0&&(f=u);const l={url:n,type:Se.SEGMENT,responseType:ir.ARRAY_BUFFER,retry:c(Ts,this),hooks:{beforeRetry:[o(Ds,this,ls).bind(this)]},onDownloadProgress:o(Ds,this,$s).call(this,r,a),headers:i&&{Range:`bytes=${i}`},retryAbortErrors:c(ms,this),timeout:f};this.fire("downloadstart",r),a.request=We(l).then(o(Ds,this,Hs).call(this,a,t)).catch(o(Ds,this,Vs).call(this,a,t)),c(ws,this).add(a)}function $s(t,n){let i=0,e=0,r=ji();return s=>{if(s.lengthComputable){const o=8*(s.loaded-e),u=ji(),a=u-r,h={startTime:r,length:a,bitrate:o/(a/1e3),index:i};i>0&&(c(ks,this).length>=c(ys,this)&&c(ks,this).shift(),c(ks,this).push(h)),r=u,e=s.loaded,i+=1,c(gs,this).set(n,{bytesTotal:s.total,bytesLoaded:s.loaded,percent:s.loaded/s.total,identifier:t}),this.fire("progress",t)}}}function Hs(t,n){const i=this,e=ji(),{identifier:r,resolve:s}=n;return fs((function(u){let a=ji()-e;return as(u.arrayBuffer(),(function(e){return Object.prototype.hasOwnProperty.call(u,"perfTimings")&&Object.prototype.hasOwnProperty.call(u.perfTimings,"responseStart")&&(n.perfTimings=u.perfTimings),t.data.duration=ji()-t.data.requestSendTime,c(ws,i).delete(t),c(gs,i).delete(t),i.saveResponseSpeeds(n,a,e.byteLength),i.fire("downloadend",r,{request:t,response:u}),c(Ns,i).push({url:t.data.url,status:200,duration:t.data.duration}),as(o(Ds,i,Bs).call(i,t,e),(function(t){s(e=t),o(Ds,i,xs).call(i)}))}))}))}function Bs(t,n){return t.data.url&&t.data.url.match(".ts$")?o(Ds,this,hs).call(this,t,n):r.resolve(new Uint8Array(n))}function Vs(t,n){const{identifier:i,reject:e,size:r}=n;return n=>{const s=ji()-t.data.requestSendTime;if(t.data.duration=s,n instanceof Oe)c(Is,this).push({url:t.data.url,status:"abort",duration:s}),this.fire("downloadabort",i);else if(n instanceof Ie)c(Is,this).push({url:t.data.url,status:n.response.status,duration:s}),this.fire("downloaderror",i,n.response.status);else if(n instanceof ke){if(c(Is,this).push({url:t.data.url,status:"timeout",duration:s}),"number"==typeof r&&r>0&&n.timeoutMs>0){let t=8*r/(n.timeoutMs/1e3);t*=.5,c(ps,this).call(this,"Adding degraded speed of",t,"after timeout of",n.timeoutMs,"ms"),c(Ms,this).push(t)}this.fire("downloadtimeout",i,{timeoutMs:n.timeoutMs})}c(gs,this).delete(t),c(ws,this).delete(t),e(n),o(Ds,this,xs).call(this)}}function Gs(){return Ii("module/mux-mp4.js")}var Ys=new yi,Ks=new yi,Ws=new yi,qs=new yi,zs=new yi,Qs=new yi,Js=new yi,Zs=new yi,to=new yi,no=new yi,io=new yi,eo=new yi,ro=new yi,so=new yi,oo=new yi,uo=new yi,co=new yi,ao=new yi,ho=new yi,fo=new yi,lo=new yi,vo=new yi,po=new yi,Eo=new WeakSet;let yo=function(t){function n(n,i){var e;return f(e=t.call(this)||this,Eo),a(e,Ys,void 0),a(e,Ks,void 0),a(e,Ws,void 0),a(e,qs,void 0),a(e,zs,void 0),a(e,Qs,void 0),a(e,Js,-1),a(e,Zs,!1),a(e,to,!1),a(e,no,{}),a(e,io,void 0),a(e,eo,!0),a(e,ro,null),a(e,so,!0),a(e,oo,!1),a(e,uo,!1),a(e,co,void 0),a(e,ao,null),a(e,ho,void 0),a(e,fo,null),a(e,lo,[]),a(e,vo,void 0),a(e,po,[]),h(Qs,e,Ni("Buffer","color: #586e75")),h(zs,e,i),h(ho,e,n),h(Ys,e,o(Eo,e,To).bind(e)),h(Ks,e,o(Eo,e,So).bind(e)),h(Ws,e,o(Eo,e,Ao).bind(e)),h(qs,e,o(Eo,e,Io).bind(e)),c(ho,e).on("durationset",c(Ys,e)),e}E(n,t);var i=n.prototype;return i.addStream=function(t){t.on("segmentadd",c(qs,this));const n=c(lo,this).push(t)-1;t.index=n,-1===c(Js,this)&&(o(Eo,this,go).call(this,n),h(oo,this,!0))},i.getBufferState=function(){return c(no,this)},i.setBufferState=function(t){h(no,this,t)},i.streamIndexAtTime=function(t){if(c(no,this)[void 0])return this.activeStreamIndex;const n=o(Eo,this,mo).call(this,t)-1,i=c(no,this)[n];return(null==i?void 0:i.stream)||-1},i.switchTo=function(t,n=!0,i={}){let e;e="number"==typeof t?t:t.index;let s=c(Js,this)!==e;const u=s;if(!s&&c(oo,this)&&(s=!0),s){h(oo,this,!1);const t=c(Js,this),i=c(lo,this)[t];this.fire("streamchangestart",t,e),i&&u&&n&&i.abort(),h(vo,this,e),o(Eo,this,go).call(this,e)}return o(Eo,this,Io).call(this),new r((t=>{s?h(ao,this,(()=>{c(vo,this)===e&&(h(ao,this,null),t(),this.fire("streamchange",e,i))})):t()}))},i.isTimeInBuffer=function(t){if(!c(fo,this))return c(Qs,this).warn("SourceBuffer is not set."),!1;for(let n=0;n<c(fo,this).buffered.length;n++){const i=c(fo,this).buffered.start(n),e=c(fo,this).buffered.end(n);if(i<=t&&e>=t)return!0}return!1},i.hasAppendedFinalSegment=function(){return void 0!==c(io,this)&&this.isTimeInBuffer(c(io,this))},i.clear=function(){c(lo,this).forEach((t=>t.clear()))},i.remove=function(t,n=c(ho,this).mediaSource.duration){return new r((i=>{c(po,this).push([t,n,i]),o(Eo,this,Io).call(this)}))},i.removeEventListeners=function(){c(fo,this)&&(c(fo,this).removeEventListener("updateend",c(Ws,this)),o(Eo,this,wo).call(this,c(fo,this))&&c(fo,this).removeEventListener("bufferedchange",c(Ks,this)))},i.removeSorcerer=function(){c(ho,this).off("durationset",c(Ys,this)),h(ho,this,null)},d(n,[{key:"activeStream",get:function(){return c(lo,this)[c(Js,this)]||null}},{key:"activeStreamIndex",get:function(){return c(Js,this)}},{key:"endTime",get:function(){if(!c(fo,this))return void c(Qs,this).warn("SourceBuffer is not set.");const t=c(fo,this).buffered;return t.length>0?t.end(t.length-1):void 0}},{key:"sourceBuffer",get:function(){return c(fo,this)},set:function(t){h(fo,this,t),o(Eo,this,bo).call(this),this.fire("sourcebufferattach")}},{key:"streams",get:function(){return c(lo,this)}}])}(bi);function mo(t){let n=Math.floor(t/6);return t>6&&t%6>=2?n+=1:t<8&&(n=1),n}function To(){const t=c(ho,this).mediaSource.duration,n=o(Eo,this,mo).call(this,t);for(let t=0;t<n;t++)c(no,this)[t]={segment:t,stream:null,type:c(zs,this)}}function bo(){c(fo,this)?(c(fo,this).addEventListener("updateend",c(Ws,this)),o(Eo,this,wo).call(this,c(fo,this))&&c(fo,this).addEventListener("bufferedchange",c(Ks,this))):c(Qs,this).warn("SourceBuffer is not set.")}function wo(t){return"undefined"!=typeof ManagedSourceBuffer&&t instanceof ManagedSourceBuffer}function go(t){h(so,this,!0),h(Js,this,t),c(ho,this).setStreamIndex(t)}function Ao(){o(Eo,this,Ro).call(this),o(Eo,this,Oo).call(this),o(Eo,this,Io).call(this)}function So(t){var n;(null==(n=t.removedRanges)?void 0:n.length)>0&&c(Qs,this).call(this,"Browser removed %s buffer:",c(zs,this),(t=>{const n=[];for(let i=0;i<t.length;i++)n.push(`${t.start(i)}-${t.end(i)}`);return n.join(", ")})(t.removedRanges))}function _o(){if(c(fo,this))try{const t=c(fo,this).buffered,n=c(ho,this).ot.buffered;if(t.length&&n.length){const i=t.start(0),e=n.start(0);i<e&&c(ho,this).removeBuffer(0,e)}}catch(t){c(Qs,this).error("Error failed to handle mismatch between video and sourceBuffer.")}else c(Qs,this).warn("SourceBuffer is not set.")}function Ro(){if(c(to,this)&&this.endTime)return h(to,this,!1),h(io,this,this.endTime),c(ho,this).checkEndOfStream(),void o(Eo,this,_o).call(this);this.activeStream&&!this.activeStream.hasNextSegment()&&void 0!==c(io,this)&&c(io,this)>0&&"open"===c(ho,this).readyState&&c(ho,this).checkEndOfStream()}function Oo(){c(ro,this)&&(this.fire("appendbufferend",c(ro,this)),h(ro,this,null),c(ao,this)&&c(ao,this).call(this))}function Io(){if(!c(fo,this))return c(Qs,this).warn("SourceBuffer is not set. Waiting for sourcebufferattach event."),void this.on("sourcebufferattach",c(qs,this));this.activeStream&&"closed"!==c(ho,this).readyState&&(c(fo,this).updating||(c(po,this).length?o(Eo,this,No).call(this):c(uo,this)||c(Zs,this)||(c(so,this)?o(Eo,this,ko).call(this):o(Eo,this,Mo).call(this))))}function No(){const t=c(fo,this),n=c(po,this).shift();if(!n||!t)return void c(Qs,this).warn("No entries to remove or sourceBuffer is not set.");const[i,e,r]=n,s=()=>{t.removeEventListener("updateend",s),r(),void 0!==c(co,this)&&clearTimeout(c(co,this)),h(co,this,setTimeout((()=>{h(uo,this,!1),o(Eo,this,Io).call(this)}),5e3))};t.addEventListener("updateend",s),t.remove(i,e)}function ko(){h(so,this,!1),h(Zs,this,!0),this.activeStream?this.activeStream.getInitSegment().then((t=>(h(ro,this,null),c(fo,this)&&t&&c(fo,this).appendBuffer(t),h(Zs,this,!1),t))).catch((t=>{c(Qs,this).error("Error appending init segment to the buffer:",t),h(so,this,!0),h(Zs,this,!1)})):c(Qs,this).error("No active stream to append init segment.")}function Mo(){if(!this.activeStream||!c(fo,this))return void c(Qs,this).error("No active stream or sourceBuffer to append segment.");const t=this.activeStream.getNextSegment();if(!t)return;const n=this.activeStream.getIdForSegment(t);this.activeStream.isFinal(t)&&h(to,this,!0),h(ro,this,n),this.fire("appendbufferstart",n);try{c(fo,this).appendBuffer(t),c(no,this)[n.segment]=n,c(eo,this)&&(h(eo,this,!1),this.fire("initialbufferstart"))}catch(n){if("QuotaExceededError"===n.name){h(uo,this,!0),this.fire("quotaexceedederror",c(fo,this).buffered),c(Qs,this).error("Error QuotaExceededError.");const n=6;if(c(ho,this).ot.currentTime>n){const t=0,i=c(ho,this).ot.currentTime-n;c(Qs,this).call(this,`Removing buffer from ${t} to ${i}…`),c(ho,this).removeBuffer(t,i)}this.activeStream.dequeueSegment(t)}}}function Do(){}var Xo=new yi,Po=new yi,Co=new yi,jo=new yi,Lo=new yi,Uo=new yi,xo=new yi;let Fo=function(t){function n(n,i="",e=new Xs){var r;return v(r=t.call(this)||this,"codec",void 0),v(r,"index",NaN),a(r,Xo,void 0),a(r,Po,new yi),a(r,Co,void 0),a(r,jo,void 0),a(r,Lo,!0),a(r,Uo,[]),a(r,xo,{}),h(Xo,r,Ni("Stream","color: #586e75")),h(jo,r,n),r.codec=i,h(Co,r,e),c(Co,r).start(),r}E(n,t),n.isValidSegmentUrl=function(t){return"string"==typeof t||"object"==typeof t&&"url"in t&&"byteRange"in t&&"string"==typeof t.url&&"string"==typeof t.byteRange};var i=n.prototype;return i.getIdForSegment=function(t){return n.isValidSegmentUrl(t)?c(xo,this)[t]:c(Po,this).get(t).id},i.getSegmentUrl=function(t){return"object"==typeof t&&"url"in t?t.url:t},i.getSegmentByteRange=function(t){return"object"==typeof t&&"byteRange"in t?t.byteRange:void 0},i.isFinal=function(t){return c(Po,this).get(t).final},i.addSegment=function(t,{identifier:i=null,isFinalSegment:e=!1,loadOnly:s=!1,priority:o=0,includeWithBandwidthChecks:u=!0,excludeConnectTime:a=!1,timeout:h=null,size:f=null}={}){if(c(Lo,this)&&this.getInitSegment(),n.isValidSegmentUrl(t)){c(xo,this)[t]=i||t;const n=this.getIdForSegment(t);return this.fire("queued",n),c(Co,this).add({byteRange:this.getSegmentByteRange(t),excludeConnectTime:a,id:n,includeWithBandwidthChecks:u,isInitSegmentRequest:!1,priority:o,size:f,stream:this,timeout:h,url:this.getSegmentUrl(t)}).then((r=>{c(Po,this).set(r,{id:i||t,final:e}),c(Uo,this).push(r),this.fire("bufferqueueadd",n),s||this.fire("segmentadd")}))}return c(Po,this).set(t,{id:i,final:e}),c(Uo,this).push(t),this.fire("bufferqueueadd",i),r.resolve()},i.clear=function(){h(Uo,this,[])},i.abort=function(){try{const t=this;return function(t){return t&&t.then||(t=r.resolve(t)),t}(function(n,i){var e=function(){if(c(Lo,t))return function(t){if(t&&t.then)return t.then(Do)}(function(t,n){try{var i=t()}catch(t){return n(t)}return i&&i.then?i.then(void 0,n):i}((function(){return function(t){if(!void 0)return t&&t.then?t.then(Do):r.resolve()}(t.getInitSegment())}),(function(n){c(Xo,t).error("Error getting init segment:",n)})))}();return e&&e.then?e.then(i):i()}(0,(function(){c(Co,t).abort(t)})))}catch(t){return r.reject(t)}},i.hasNextSegment=function(){return c(Uo,this).length>0},i.getNextSegment=function(){return c(Uo,this).shift()},i.dequeueSegment=function(t){c(Uo,this).unshift(t)},i.getInitSegment=function(){const t=this.getSegmentUrl(c(jo,this));return t?(h(Lo,this,!1),n.isValidSegmentUrl(t)?c(Co,this).add({byteRange:this.getSegmentByteRange(c(jo,this)),id:null,isInitSegmentRequest:!0,priority:0,stream:this,url:t}).then((t=>(h(jo,this,t),c(jo,this)))):r.resolve(c(jo,this))):r.resolve(null)},d(n,[{key:"pendingFetches",get:function(){return c(Co,this).pendingFetches}}])}(bi);var $o=new yi,Ho=new yi,Bo=new yi,Vo=new yi,Go=new yi,Yo=new yi,Ko=new yi,Wo=new yi,qo=new yi,zo=new yi,Qo=new yi,Jo=new WeakSet;let Zo=function(){function t(t,n=-1){f(this,Jo),v(this,"streamIndex",void 0),a(this,$o,void 0),a(this,Ho,void 0),a(this,Bo,void 0),a(this,Vo,void 0),a(this,Go,!1),a(this,Yo,void 0),a(this,Ko,{}),a(this,Wo,{}),a(this,qo,0),a(this,zo,0),a(this,Qo,!1),h(Vo,this,t),this.streamIndex=n,h($o,this,this.start.bind(this)),h(Ho,this,this.stop.bind(this)),h(Bo,this,o(Jo,this,eu).bind(this))}var n=t.prototype;return n.init=function(){o(Jo,this,tu).call(this)},n.start=function(){h(Go,this,!0),o(Jo,this,iu).call(this)},n.stop=function(){h(Go,this,!1)},n.destroy=function(){this.stop(),o(Jo,this,nu).call(this)},n.getDroppedFrameRate=function(t,n=-1,i="average"){const e=c(Ko,this)[n];if(!e||e.length<t)return 0;const r=e.slice(-t);return"median"===i?us(r):os(r)},n.getDroppedFrameTotal=function(){return{dropped:o(Jo,this,ru).call(this),total:o(Jo,this,su).call(this)}},t}();function tu(){c(Qo,this)||(c(Vo,this).addEventListener("playing",c($o,this)),c(Vo,this).addEventListener("pause",c(Ho,this)),c(Vo,this).addEventListener("ended",c(Ho,this)),document.addEventListener("visibilitychange",c(Bo,this)),h(Qo,this,!0))}function nu(){c(Vo,this).removeEventListener("playing",c($o,this)),c(Vo,this).removeEventListener("pause",c(Ho,this)),c(Vo,this).removeEventListener("ended",c(Ho,this)),document.removeEventListener("visibilitychange",c(Bo,this)),h(Qo,this,!1)}function iu(){if(!c(Go,this)||-1===this.streamIndex)return;if(Dr.browser.safari&&(document.hidden||"hidden"===document.visibilityState))return;void 0!==c(Yo,this)&&clearTimeout(c(Yo,this));const t=o(Jo,this,ru).call(this),n=t-c(qo,this);h(qo,this,t);const i=o(Jo,this,ou).call(this),e=i-c(zo,this);h(zo,this,i),c(Ko,this)[this.streamIndex]||(c(Ko,this)[this.streamIndex]=[]),c(Wo,this)[this.streamIndex]||(c(Wo,this)[this.streamIndex]=[]),c(Ko,this)[this.streamIndex].length>100&&c(Ko,this)[this.streamIndex].shift(),c(Wo,this)[this.streamIndex].length>100&&c(Wo,this)[this.streamIndex].shift(),c(Ko,this)[this.streamIndex].push(n),c(Wo,this)[this.streamIndex].push(e),h(Yo,this,setTimeout((()=>{o(Jo,this,iu).call(this)}),1e3))}function eu(){!Dr.browser.safari||document.hidden&&"hidden"===document.visibilityState||o(Jo,this,iu).call(this)}function ru(){return"function"==typeof c(Vo,this).getVideoPlaybackQuality?c(Vo,this).getVideoPlaybackQuality().droppedVideoFrames:c(Vo,this).webkitDroppedFrameCount||0}function su(){return"function"==typeof c(Vo,this).getVideoPlaybackQuality?c(Vo,this).getVideoPlaybackQuality().totalVideoFrames:c(Vo,this).webkitDecodedFrameCount||0}function ou(){if("function"==typeof c(Vo,this).getVideoPlaybackQuality){const t=c(Vo,this).getVideoPlaybackQuality();return t.totalVideoFrames-t.droppedVideoFrames}return c(Vo,this).webkitDecodedFrameCount||0}var uu=new yi,cu=new yi,au=new yi,hu=new yi,fu=new yi,lu=new yi,du=new yi,vu=new yi,pu=new yi,Eu=new yi,yu=new yi;let mu=function(t){function n(n,i={}){var e;v(e=t.call(this)||this,"_video",void 0),v(e,"allowSegmentRequests",void 0),a(e,uu,void 0),a(e,cu,void 0),a(e,au,void 0),a(e,hu,void 0),a(e,fu,void 0),a(e,lu,void 0),a(e,du,void 0),a(e,vu,void 0),a(e,pu,void 0),a(e,Eu,void 0),a(e,yu,void 0),v(e,"isInstanceofManagedMediaSource",(t=>"undefined"!=typeof ManagedMediaSource&&t instanceof ManagedMediaSource)),h(lu,e,Ni("MediaSorcerer","color: #586e75")),e.ot=n,h(vu,e,i),e.allowSegmentRequests=!0;const r=c(vu,e).disableMMS;h(du,e,new(Mi(r))),c(lu,e).log("Media Source API: "+e.$t(c(du,e)));const{fetcherTimeout:s=0,fetcherRetryAbortErrors:o=!0}=c(vu,e);return h(pu,e,new Zo(n)),h(fu,e,new Xs({parallel:1,timeout:s,retryAbortErrors:o})),h(uu,e,e.Ht.bind(e)),h(cu,e,e.Bt.bind(e)),h(hu,e,{audio:null,video:null}),h(au,e,[]),h(yu,e,null),e.Vt(),e}E(n,t);var i=n.prototype;return i.setStreamIndex=function(t){c(pu,this).streamIndex=t},i.getCurrentSpeed=function({type:t="average",howMany:n=10,weights:i=[],percentile:e}={}){return"harmonicAverage"===t?c(fu,this).getHarmonicAverageSpeed(n):"average"===t?c(fu,this).getAverageSpeed(n,i):"median"===t?c(fu,this).getMedianSpeed(n):c(fu,this).getPercentileSpeed(n,e)},i.getResponseSpeeds=function(){return c(fu,this).getResponseSpeeds()},i.getFailedSegments=function(){return c(fu,this).getFailedSegments()},i.getSuccessfulSegments=function(){return c(fu,this).getSuccessfulSegments()},i.getDroppedFrameRate=function(t,n=this.activeStreamIndex,i="average"){return c(pu,this).getDroppedFrameRate(t,n,i)},i.getDroppedFrameTotal=function(){return c(pu,this).getDroppedFrameTotal()},i.clear=function(){c(au,this).forEach((t=>t.clear()))},i.initFrameDropper=function(){c(pu,this).init()},i.streamIndexAtTime=function(t,n){const i=c(hu,this)[n];return i?i.streamIndexAtTime(t):-1},i.removeBuffer=function(t=0,n=this.ot.duration){if(t>=(n=n||0))return r.resolve();const i=c(au,this).map((i=>i.remove(t,n)));return r.all(i)},i.setLiveSeekableRange=function(t,n){var i;"open"===(null==(i=c(du,this))?void 0:i.readyState)&&c(du,this).setLiveSeekableRange(t,n)},i.addStream=function(t,n){const i=this.Gt(t);if(!c(hu,this)[i]){const n=new yo(this,i);c(hu,this)[i]=n,c(au,this).push(n),c(Eu,this).then((()=>{let e;try{e=c(du,this).addSourceBuffer(t)}catch(t){if(22!==t.code)return c(lu,this).error(t),void this.fire("srcnotsupported",t);e=c(hu,this)[i]}if(c(vu,this).duration){const t=.1;e.appendWindowEnd=c(vu,this).duration+t}n.sourceBuffer=e})).catch((t=>{c(lu,this).error(t)})),["appendbufferstart","appendbufferend","streamchange","streamchangestart","initialbufferstart","quotaexceedederror"].forEach((t=>{n.on(t,(n=>{this.fire(t,n)}))}))}const e=new Fo(n,t,c(fu,this));["queued","bufferqueueadd"].forEach((t=>{e.on(t,(n=>{this.fire(t,n)}))}));const r=c(hu,this)[i];return r&&r.addStream(e),e},i.checkEndOfStream=function(){if(!c(au,this).every((t=>t.hasAppendedFinalSegment())))return;const t=()=>{this.ot.removeEventListener("timeupdate",t),this.endOfStream()};this.ot.addEventListener("timeupdate",t)},i.abortFetches=function(){c(fu,this).abort()},i.endOfStream=function(){if(!c(au,this).every((t=>t.isTimeInBuffer(this.ot.currentTime)))){const t=1;if(!(Dr.browser.firefox&&this.ot.currentTime<t))return}"open"===c(du,this).readyState&&(this.Yt()||(c(lu,this).log("Firing MediaSource.endOfStream()"),c(du,this).endOfStream(),this.fire("endofstream")))},i.destroy=function(){this.clear(),this.Kt(),this.off(),c(pu,this).destroy(),c(fu,this).abort();const t=this.ot.querySelectorAll("source");(this.ot.src||t.length>0)&&(this.ot.removeAttribute("src"),t.forEach((t=>{this.ot.removeChild(t)})),this.ot.load())},i.$t=function(t){return this.isInstanceofManagedMediaSource(t)?"ManagedMediaSource":"MediaSource"},i.Vt=function(){h(Eu,this,new r((t=>{h(yu,this,t),c(du,this).addEventListener("sourceopen",c(cu,this)),c(du,this).addEventListener("sourceclose",c(uu,this))}))),["downloadstart","downloadend","downloadabort","downloaderror","downloadtimeout","progress"].forEach((t=>{c(fu,this).on(t,((...n)=>{this.fire.apply(this,[t].concat(n))}))})),this.isInstanceofManagedMediaSource(c(du,this))&&(c(du,this).addEventListener("startstreaming",(()=>{c(lu,this).log("startstreaming event fired"),this.allowSegmentRequests=!0})),c(du,this).addEventListener("endstreaming",(()=>{c(lu,this).log("endstreaming event fired"),this.allowSegmentRequests=!1})))},i.Yt=function(){for(let t=0;t<c(du,this).sourceBuffers.length;t++)if(c(du,this).sourceBuffers[t].updating)return!0;return!1},i.Bt=function(){c(lu,this).log("MediaSource open"),c(du,this).removeEventListener("sourceopen",c(cu,this)),URL.revokeObjectURL(this.ot.src),this.ot.querySelectorAll("source").forEach((t=>{var n;0===(null==(n=t.src)?void 0:n.indexOf("blob"))&&URL.revokeObjectURL(t.src)})),c(vu,this).duration&&(c(du,this).duration=c(vu,this).duration,this.fire("durationset")),c(yu,this)&&c(yu,this).call(this)},i.Ht=function(){c(lu,this).log("MediaSource closed"),c(du,this).removeEventListener("sourceclose",c(uu,this)),this.fire("sourceclose")},i.Kt=function(){c(au,this).forEach((t=>t.removeEventListeners()))},i.Gt=function(t){return 0===t.indexOf("audio")?"audio":"video"},d(n,[{key:"activeStreamIndex",get:function(){return 1===c(au,this).length&&this.video?this.video.activeStreamIndex:(c(lu,this).warn("The activeStreamIndex property on MediaSorcerer only works with single streams"),-1)}},{key:"mediaSource",get:function(){return c(du,this)}},{key:"pendingFetches",get:function(){return c(fu,this).pendingFetches}},{key:"readyState",get:function(){return c(du,this).readyState}},{key:"streams",get:function(){return 1===c(au,this).length&&this.video?this.video.streams:(c(lu,this).warn("The streams property on MediaSorcerer only works with single streams"),!1)}},{key:"audio",get:function(){return c(hu,this).audio?c(hu,this).audio:(c(lu,this).warn("No audio streams have been added to MediaSorcerer"),!1)}},{key:"video",get:function(){return c(hu,this).video?c(hu,this).video:(c(lu,this).warn("No video streams have been added to MediaSorcerer"),!1)}}])}(bi);let Tu=function(t){function n(n,i={}){var e;return(e=t.call(this,n,i)||this).BANDWIDTH_UPSWITCH_THRESHOLD=.85,e.BANDWIDTH_DOWNSWITCH_THRESHOLD=.9,e.DEFAULT_TIMEOUT=8e3,e.SEGMENT_RELATIVE_TIMEOUT_RATIO=4/3,e.MINIMUM_TIMEOUT=1e3,e.FRAME_DROP_WINDOW_SECONDS=10,e}E(n,t);var i=n.prototype;return i.shouldPowerUp=function(t,n,i){i&&this.ht.startingBandwidthThreshold&&(this.BANDWIDTH_UPSWITCH_THRESHOLD=this.ht.startingBandwidthThreshold);let e=t.indexOf(n);if(-1===e&&(e=0),!this.canPowerUp(t,e))return r.resolve({index:!1,reasonForSwitch:null});const s=this.getCurrentSpeed();if(!s)return r.resolve({index:!1,reasonForSwitch:null});const o=this.Wt(s,this.BANDWIDTH_UPSWITCH_THRESHOLD,t);return o===e||!i&&o>e&&Ci(this.scanner.currentTime,this.scanner.ot.buffered)<1.5*this.SEGMENT_DURATION?r.resolve({index:!1,reasonForSwitch:null}):r.resolve({index:o,reasonForSwitch:3})},i.shouldPowerDown=function(t,n){const i=t.indexOf(n);if(-1===i){const n=this.isTimeInBuffer(this.scanner.ot.duration,this.scanner.ot.buffered,this.scanner.ot.duration);return this.whitelisted.length||this.blacklisted.length||!n?r.resolve({index:t.length-1,reasonForSwitch:6}):r.resolve({index:!1,reasonForSwitch:null})}if(!this.canPowerDown(t,i))return r.resolve({index:!1,reasonForSwitch:null});const e=this.getCurrentSpeed();if(!e)return r.resolve({index:!1,reasonForSwitch:null});if(this.hasTooManyDroppedFrames(i,n,this.ht.droppedFrameSwitchPercent))return this.blacklist(i),r.resolve({index:i-1,reasonForSwitch:2});const s=this.Wt(e,this.BANDWIDTH_DOWNSWITCH_THRESHOLD,t);return s===i?r.resolve({index:!1,reasonForSwitch:null}):r.resolve({index:s,reasonForSwitch:1})},i.hasTooManyDroppedFrames=function(t,n,i){return this.scanner.sorcerer.getDroppedFrameRate(this.FRAME_DROP_WINDOW_SECONDS,t,"median")/n.framerate*100>=i},i.getTimeEstimateToLoad=function(t,n){var i;const e=null==n||null==(i=n.segments)?void 0:i[t];if(!e)return 3;const r=this.getCurrentSpeed(),s=e.end-e.start;return e.size?(8*e.size+n.audioBitrate*s)/r*1.3:s*(n.avg_bitrate+n.audioBitrate)/r*1.3},i.canPlayFromTimeInStream=function(t,n){if(!this.isTimeInBuffer(t,this.scanner.ot.buffered,this.scanner.ot.duration))return!1;if(!n)return!1;const i=this.getSegmentsToLoad(!1,this.STREAM_TYPE_VIDEO,n);if(0===i.length)return!0;const e=Ci(t,this.scanner.ot.buffered);return this.getTimeEstimateToLoad(i[0],n)<e},i.getSegmentsToLoad=function(t,n=this.STREAM_TYPE_VIDEO,i){const e=this.scanner.ot;if(e.webkitCurrentPlaybackTargetIsWireless)return[];const r=this.scanner.currentTime,s=[],o=r+this.qt(r,e.duration,i),u=this.scanner.sorcerer[n].activeStreamIndex,c=this.scanner.zt[n][u];if(!c)return s;const a=this.scanner.sorcerer[n].sourceBuffer;let h=null;a&&(h=a.buffered);for(let n=0;n<c.segments.length;n++){const i=c.segments[n];if(i.end<r||i.start>o)continue;const e=r>=i.start&&r<i.end,u=this.Qt(i,h,this.scanner.ot.duration,this.scanner.zt);!t&&u||t&&u&&e||(e||o>=i.start)&&s.push(n)}return s},i.getSegmentRelativeTimeout=function(t,n,i){var e;const r=null==n?void 0:n.avg_bitrate,s=null==(e=t[0])?void 0:e.avg_bitrate;if(!r||!s||!i)return this.DEFAULT_TIMEOUT;if(r===s)return this.DEFAULT_TIMEOUT;const o=i*this.SEGMENT_RELATIVE_TIMEOUT_RATIO;return Math.max(this.MINIMUM_TIMEOUT,Math.min(this.DEFAULT_TIMEOUT,o))},i.Wt=function(t,n,i){let e=0;for(let r=e;r<i.length;r++)t*n>i[r].avg_bitrate+i[r].audioBitrate&&(e=r);return e},d(n,[{key:"displayName",get:function(){return"Skyfire"}}])}(function(t){function n(n,i={}){var e;return(e=t.call(this,n)||this).ht=i,e.blacklisted=[],e.whitelisted=[],e.MAX_LOADABLE_SEGMENTS_AUTO=3,e.MAX_LOADABLE_SEGMENTS_LOCKED=15,e.SEGMENT_DURATION=6,e}E(n,t);var i=n.prototype;return i.isTimeInBuffer=function(t,n,i){return this.Jt(t,t,n,i,1)},i.getDistanceFromBuffer=function(t,n){let i=t;for(let e=0;e<n.length;e++)if(n.start(e)<=t&&n.end(e)>=t){i=n.end(e);break}return i-t},i.blacklist=function(t){this.blacklisted[t]=1},i.lock=function(t=[]){this.whitelisted=t},i.filterStreams=function(t,n,i,e=null){const r=[];let s,o=!1;for(let u=0;u<t.length;u++)if(s&&s[0]===t[u].width&&s[1]===t[u].height)r.push(t[u]);else{if(o)break;this.blacklisted[u]&&-1===this.whitelisted.indexOf(u)||this.whitelisted.length&&-1===this.whitelisted.indexOf(u)||(this.whitelisted.length?r.push(t[u]):(this.Zt(n,i,t[u].width,t[u].height,e)>=(i<1e3/(window.devicePixelRatio||1)?1.75:1)&&(o=!0),r.push(t[u]),s=[t[u].width,t[u].height]))}return r},i.getCurrentSpeed=function(){let t="average",n=3,i=[1,2,5];return this.ht.tests&&this.ht.tests.harmonic_average&&this.ht.tests.harmonic_average.group&&(t="harmonicAverage",n=this.tn(),i=[]),this.scanner.sorcerer.getCurrentSpeed({type:t,howMany:n,weights:i})},i.shouldUseSurroundSound=function(t,n){return"240p"!==t[n].quality},i.getAudioIndexFromVideo=function(t,n,i){if(0===n.length)return!1;if(!t[i])return 0;const e=n.filter((({channels:t})=>t>2));if(e.length>0&&this.shouldUseSurroundSound(t,i)){const t=e[e.length-1];return n.indexOf(t)}return n.length>1&&0===i&&t[i].height<=360&&t.length>1?"mp4a.40.2"===n[0].codecs&&n[0].bitrate<8e4&&"240p"!==t[i].quality?1:0:n.length-1},i.nn=function(t,n,i,e){const r=i/e,s=t-n*r,o=n-t/r;let u=t-s,c=n-o;return s>0&&(c=n),o>0&&(u=t),[u,c]},i.Zt=function(t,n,i,e,r=null){const s=this.nn(t,n,i,e);let o=i*e;r&&(o*=r);const u=window.devicePixelRatio||1;return o/(s[0]*s[1]*u*u)},i.tn=function(){const t=function(t,n){return t&&t.tests&&t.tests[n]?t.tests[n]:null}(this.ht,"lookahead_count");return t&&t.group&&t.data.count?t.data.count:t&&t.data.segment_lookahead_count?t.data.segment_lookahead_count:this.MAX_LOADABLE_SEGMENTS_AUTO},i.qt=function(t,n,i){const e=i&&i.bitrate>11e6;return 1===this.whitelisted.length?e?30:this.MAX_LOADABLE_SEGMENTS_LOCKED*this.SEGMENT_DURATION:this.tn()*this.SEGMENT_DURATION},i.Jt=function(t,n,i,e,r=0){if(!i)return!1;n=Math.min(n,e);for(let e=0;e<i.length;e++){const s=i.start(e),o=i.end(e),u=Hr(s)-r,c=Hr(o)+r;if(u<=t&&c>=n){if(n<s||t>o)continue;return!0}}return!1},i.rn=function(t){return t.video.length>0&&t.audio.length>0},i.Qt=function(t,n,i,e){let r=1;return this.rn(e)&&(r=.1),this.Jt(t.start,t.end,n,i,r)},d(n,[{key:"displayName",get:function(){return"MediaSource"}}])}(function(){function t(t){this.scanner=t,this.STREAM_TYPE_VIDEO="video",this.STREAM_TYPE_AUDIO="audio"}var n=t.prototype;return n.destroy=function(){},n.shouldPowerUp=function(t,n){return!1},n.shouldPowerDown=function(t,n){return!1},n.canPowerUp=function(t,n){return 1!==t.length&&n<t.length-1},n.canPowerDown=function(t,n){return 1!==t.length&&n>0},n.filterStreams=function(t){return t},d(t,[{key:"displayName",get:function(){return"Brain"}}])}())),bu=function(){function t(t,n){this.ot=t,this.sn=n}var n=t.prototype;return n.start=function(){return clearInterval(this.un),this.un=setInterval(this.cn.bind(this),200),this.cn()},n.stop=function(){clearInterval(this.un)},n.onSegmentAppended=function(){this.cn()},n.cn=function(){const t=this.ot.buffered,n=this.ot.currentTime,i=this.an(t,n);if(0===this.ot.readyState)return!1;if(this.ot.paused)return!1;const e=this.ot.duration;if(n>=e)return this.ot.currentTime=e-.1,!0;if(t.length<=i)return!1;const r=t.start(i);return!(r>=e)&&!(r-n>.5||0!==i||(this.stop(),this.hn("audio",r),this.hn("video",r),this.ot.currentTime=r,0))},n.an=function(t,n){if(!t||!t.length)return null;let i=0;for(;i<t.length;i++){const e=t.start(i),r=t.end(i);if(e>n&&(0===i||r-n<=.1))break}return i>=0?i:null},n.hn=function(t,n){const i=this.sn(0,t);i&&i.segments&&i.segments[0]&&(i.segments[0].start=n)},t}();const wu="br",gu="bl",Au="pr",Su="sid",_u="cid",Ru="sf",Ou="st",Iu="ot";let Nu=function(){function t(t,n={}){this.fn=t,this.sessionId=n.sessionId,this.clipId=n.clipId}var n=t.prototype;return n.getLogAsQueryParam=function(t,n){return this.ln(this.dn(t,n))},n.dn=function(t,n){let i={};return Object.assign(i,this.vn()),Object.assign(i,this.pn(t,n)),i},n.ln=function(t){return Ui({CMCD:this.En(t)})},n.vn=function(){return{[Su]:`"${this.sessionId}"`,[_u]:`"${this.clipId}"`,[Ou]:this.yn(),[Ru]:this.mn()}},n.pn=function(t,n){return{[Au]:this.fn.playbackRate,[wu]:this.fn.getBitrateAtTime(this.fn.currentTime,n,"max")/1e3,[Iu]:this.Tn(n),[gu]:this.bn(t)}},n.Tn=function(t){switch(t){case"audio":return"a";case"video":return"v";default:return"av"}},n.bn=function(t){return Math.round(1e3*(parseFloat(t.end)-parseFloat(t.start)))},n.yn=function(){switch(this.fn.displayName){case"HLSLiveScanner":case"NativeHLSLiveScanner":return"l";default:return"v"}},n.mn=function(){switch(this.fn.displayName){case"HLSLiveScanner":case"NativeHLSLiveScanner":return'"hls"';default:return'"dash"'}},n.En=function(t){let n=[],i="";for(var e=0,r=Object.entries(t);e<r.length;e++){const[t,i]=r[e];n.push({key:t,value:i})}return n.sort((function(t,n){return t.key.localeCompare(n.key)})).forEach((({key:t,value:n})=>{i+=`${t}=${n},`})),i.replace(/,\s*$/,"")},t}();function ku(t,n,i){return i?n?n(t):t:(t&&t.then||(t=r.resolve(t)),n?t.then(n):t)}const Mu=["supported"];function Du(t,n){var i=t();return i&&i.then?i.then(n):n(i)}const Xu=new ge;function Pu(t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];try{return r.resolve(t.apply(this,n))}catch(t){return r.reject(t)}}}const Cu=Ni("MediaCapabilities","color: white; background-color: green"),ju=Pu((function(t){let n;const i=xu(t);return Xu.get(i)||Du((function(){if(Dr.mediaCapabilities){const e=t.codecs.replace(/,.+/,""),r={type:"media-source",video:{contentType:`${t.mime_type}; codecs=${e}`,width:t.width,height:t.height,bitrate:t.bitrate,framerate:t.framerate}};return ku(navigator.mediaCapabilities.decodingInfo(r),(function(t){n=t,Xu.set(i,n)}))}}),(function(){return n}))})),Lu=Pu((function(t=[]){let n=!1,i=t,e=[],s=[];return Du((function(){if(Dr.mediaCapabilities)return function(){if(0!==t.length)return function(o,u){try{var c=ku(r.all(t.map((function(t){return ku(ju(t))}))),(function(r){if(r){if(i=function(t,n){return t.filter(((t,i)=>Mu.every((t=>n[i][t]))||(Cu(`Stream ${t.quality} is not supported`,n[i]),!1)))}(t,r),0===i.length)return Cu("No compatible streams found. Returning all available streams as safeguard."),n=!0,{compatibleStreams:t,incompatibleStreams:e,incompatibleStreamsAttributes:s};i.length<t.length?(e=t.filter((t=>-1===i.indexOf(t))),s=e.map(Uu),Cu("Some streams are not supported. Returning compatible streams.")):Cu("All streams are supported.")}}))}catch(t){return u(t)}return c&&c.then?c.then(void 0,u):c}(0,(function(t){Cu("Error checking stream capabilities",t)}));Cu("No streams to check for MediaCapabilities support")}();Cu("MediaCapabilities API not supported")}),(function(t){return n?t:{compatibleStreams:i,incompatibleStreams:e,incompatibleStreamsAttributes:s}}))}));function Uu(t){const n=xu(t),i=Xu.get(n);return i?Mu.filter((t=>!i[t])):[]}function xu(t){return`${t.mime_type};${t.codecs};${t.width};${t.height};${t.bitrate};${t.framerate}`}function Fu(t,n,i,e){const s=function(t){const n=t.audio||[],i=t.video||[];return[{video:"HW_SECURE_ALL",audio:"SW_SECURE_CRYPTO"},{video:"HW_SECURE_DECODE",audio:"SW_SECURE_CRYPTO"},{video:"HW_SECURE_CRYPTO",audio:"SW_SECURE_CRYPTO"},{video:"SW_SECURE_DECODE",audio:"SW_SECURE_CRYPTO"},{video:"SW_SECURE_CRYPTO",audio:"SW_SECURE_CRYPTO"}].map((t=>{const e={persistentState:"optional",sessionTypes:["temporary"],videoCapabilities:[],audioCapabilities:[]};return i.length&&(e.videoCapabilities=i.map((n=>({contentType:n,robustness:t.video})))),n.length&&(e.audioCapabilities=n.map((n=>({contentType:n,robustness:t.audio})))),e}))}(e),o=Object.keys(t).map((e=>{const o=t[e].id;if(n||i){let t=null;const i=n?window.WebKitMediaKeys:window.MSMediaKeys;try{t=new i(o)}catch(t){}return r.resolve({name:o,keySystem:t})}return navigator.requestMediaKeySystemAccess(o,s).then((t=>t.createMediaKeys())).catch((t=>{})).then((t=>({name:o,keySystem:t})))}));return r.all(o)}function $u(t,n,i){return i?n?n(t):t:(t&&t.then||(t=r.resolve(t)),n?t.then(n):t)}function Hu(t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];try{return r.resolve(t.apply(this,n))}catch(t){return r.reject(t)}}}const Bu="video",Vu="audio";let Gu=function(t){function n(n,i={}){var e;return(e=t.call(this,n,i)||this).reset(),e.manifestLoadDurations=[],e.wn=!1,i.mediaSourceScanner&&(e.gn=i.mediaSourceScanner.maxPreloadStreamIndex),e}E(n,t),n.supported=function(t){const n=Mi(t);return void 0!==n&&n.isTypeSupported};var i=n.prototype;return i.deactivate=function(){t.prototype.deactivate.call(this),this.sorcerer&&this.sorcerer.destroy(),this.reset()},i.reset=function(){this.An=new dr,this.Sn={},Dr.browser.safari&&(this._n=new bu(this.ot,this.sn.bind(this))),this.resetBrain(),this.Rn(),this.On=!1,this.In=!1,this.Ft=null,this.zt={},this.zt[Vu]=[],this.zt[Bu]=[],this.Nn=[],this.kn=null,this.Mn=null,this.Dn=null,this.Xn=null,this.Pn=null,this.Cn=null,this.jn=!1,this.Ln=null,this.Un=!1,this.xn=!1,this.Fn=null,this.$n=null,this.Hn=!1,this.Bn=[],this.Vn={},this.Gn=0,this.Yn=null,this.wn=!1,clearInterval(this.Kn),clearTimeout(this.Wn)},i.resetBrain=function(){const t=this.ht.mediaSourceScanner||{};t.tests=this.ht.tests,this.qn&&this.qn.destroy(),this.qn=new Tu(this,t)},i.preloadStream=function(){if(this.Fn)return this.Fn;let t=0,n=1;this.zt.audio.length&&(n=2);let i=this.sorcerer.video.activeStreamIndex;this.Bn.length&&(i=this.Bn[0]);let e=0;const s=this.qn.getSegmentsToLoad(!1,Bu,i);s.length>0&&(e=s[0]);let o=()=>{};const u=(t=!1)=>{t&&(i=this.sorcerer.video.activeStreamIndex),this.Yn=i,this.zn(!0)},c=i=>{t+=1,t<n||(i.segment===e&&0===this.Bn.length?this.Qn(!0).then((n=>{let{index:e,reasonForSwitch:r}=n,s={reasonForSwitch:r};if(!1!==e&&e>i.stream){if(this.sorcerer.video.switchTo(e,!1,s),this.zt.audio.length){const t=this.qn.getAudioIndexFromVideo(this.zt.video,this.zt.audio,e);this.sorcerer.audio.switchTo(t,!1)}return t=0,void u(!0)}o()})).catch(console.error):o())};return this.Fn=new r((t=>{o=()=>{const n=this.sn(i).segments[0].end,e=this.Jn(!0);if(this.currentTime>=e&&(this.currentTime=e),this.currentTime>n&&(this.sorcerer.clear(),this.An=new dr),this.sorcerer.video.switchTo(i,!1),this.zt.audio.length){const t=this.qn.getAudioIndexFromVideo(this.zt.video,this.zt.audio,i);this.sorcerer.audio.switchTo(t,!1)}this.sorcerer.off("bufferqueueadd",c),this.Yn=null,this.On=!0,t()},this.sorcerer.on("bufferqueueadd",c),u()})),this.Fn},i.loadManifest=function(t){try{const n=this;return $u(n.video.metadata.p2pReady,(function(){const i=Date.now();return Dr.browser.ie&&t&&-1!==t.indexOf("archive_playlist")?(setTimeout((()=>{n.Pt(qr,"An unknown error occurred.")}),250),new r((()=>{}))):We({url:t,timeout:1e4,type:Se.MANIFEST}).then((e=>(e.url&&e.url!==t&&-1!==e.url.indexOf("live-archive")&&(n.Mn=e.url.split("/").slice(0,-2).join("/")),n.manifestLoadDurations.push({url:t,status:e.status,duration:Date.now()-i}),n.fire(ve.MANIFEST_LOADED),e.text()))).then(Hu((function(i){let e;return function(r,s){var o=function(){if(-1!==t.indexOf(".mpd"))return $u(n.Zn(),(function({parseMPD:r}){const s=n.ft.enabledAudioTrack,o={audioLang:null==s?void 0:s.language};e=r(i,t,o)}));e=JSON.parse(i)}();return o&&o.then?o.then(s):s()}(0,(function(){return e}))}))).catch((e=>{if(n.manifestLoadDurations.push({url:t,status:e.response&&e.response.status,duration:Date.now()-i}),n.reset(),e instanceof Ie&&410===e.response.status)return n.fire(ve.MEDIA_URL_EXPIRED),new r((()=>{}));throw e instanceof Ie&&400===e.response.status?n.fire(ve.MEDIA_URL_BAD_REQUEST,e.response.url):e instanceof ke&&n.fire(ve.MANIFEST_TIMEOUT),e}))}))}catch(t){return r.reject(t)}},i.setVideoSrc=function(t,n,i=!0){if(i&&!n&&this.kn){var e;if(("metadata"===this.Tt||"none"===this.Tt&&!this.paused)&&!this.On)return void this.kn.then((()=>{const n=this.paused;this.setVideoSrc(t,n,!1)})).catch(console.error);if("sd-fallback"===(null==(e=this.ft.drmHandler)?void 0:e.state))return void this.kn.then((()=>{this.setVideoSrc(t,!0,!1),this.paused&&this.play()})).catch(console.error);if("auto"===this.Tt)return void this.kn.then((()=>{this.setVideoSrc(t,!1,!1)})).catch(console.error)}n&&this.reset(),n||!this.paused||this.sorcerer||(n=!0);let r=this.ti;n&&(r=this.ni);const s=t.split("/");s.pop();const o=`${s.join("/")}/`;this.jn=!n,this.kn=this.ii(t,this.Tt).then(this.loadManifest.bind(this)).then((t=>("string"==typeof this.Mn&&-1!==this.Mn.indexOf("live-archive")||(this.Mn=o),t))).then(r.bind(this)),n&&"auto"===this.Tt&&(this.kn=this.ei(this.kn,this.preloadStream.bind(this),!1)),this.kn=this.ri(this.kn)},i.getBitrateAtTime=function(t,n="video",i="average"){if(!this.sorcerer)return 0;const e=this.sorcerer.streamIndexAtTime(t,n),r=this.zt[n][e];return r?r["average"===i?"avg_bitrate":"bitrate"]??r.bitrate:0},i.lockStreamIndexes=function(){const t=this.Bn.map((t=>this.zt[Bu].indexOf(this.zt[Bu][t]))),n=!this.paused;if(n&&(this.si=!0,this.ot.pause()),this.Vn[Bu]=!1,this.qn.lock(t),!this.In&&"auto"!==this.Tt)return;const i=Math.max(this.currentTime-7,0),e=Math.min(this.currentTime+7,this.ot.duration);this.sorcerer.removeBuffer(i,e).then((()=>{!this.In&&"auto"===this.Tt||this.ended?this.oi():(this.seekToTime(this.currentTime),n&&this.paused&&(this.ui=!0,this.ot.play()))})).catch(console.error)},i.seekToTime=function(t){if(t===this.currentTime)return r.resolve();if(null===this.Xn||(this.ci&&(this.ci(),this.ci=null),this.ai=null,this.Xn=null,this.Pn=null),this.Xn=t,this.hi(),this.On)for(const t in this.zt)if(this.zt[t].length>0){const n=this.sorcerer[t].activeStreamIndex;this.sorcerer[t].streams[n].abort()}return this.ai=this.fi(t),r.all([this.kn,this.$n]).then((()=>{this.oi()})).catch(console.error),this.li&&0===t&&this.fire(he.SEEKING),this.kn.then((()=>this.ai)).catch((t=>{}))},i.takeSnapshot=function(){this.At&&t.prototype.takeSnapshot.call(this)},i.initDrm=function(){},i.onstalled=function(){return!1},i.onseeked=function(t){this.In&&this.zn()},i.onended=function(n){return t.prototype.onended.call(this,n),!0},i.onseeking=function(t){this.In},i.hi=function(){this.di(),clearTimeout(this.pi),this.pi=setTimeout((()=>{this.Ei()}),200)},i.di=function(){this.yi||(this.yi=!0)},i.Ei=function(){this.yi=!1},i.ontimeupdate=function(n){if(!this.sorcerer)return!1;if(t.prototype.ontimeupdate.call(this),this._n&&this._n.stop(),0===this.currentTime)return this.In;if(this.Xn)return!1;if(this.In||(this.In=!0),this.xn&&this.currentTime>=this.xn){const t=2;this.sorcerer.removeBuffer(0,this.xn-t),this.xn=!1}const i=this.sorcerer.getDroppedFrameTotal();this.fire(ve.DROPPED_FRAMES,i);const e=this.sorcerer.getResponseSpeeds(),r=this.zt[Bu][this.sorcerer.video.activeStreamIndex],s=this.ht.tests&&this.ht.tests.download_bitrate;if((!s||!s.group)&&r&&this.qn.getCurrentSpeed){const t={speed:this.qn.getCurrentSpeed(),bitrate:r.avg_bitrate,speeds:e};this.fire(ve.BANDWIDTH,t)}const o=this.ot.buffered.length;if(!o)return!0;const u=this.ot.buffered.end(o-1);return Math.ceil(u)===Math.ceil(this.ot.duration)||(Math.abs(this.currentTime-u)<.2?(this.Hn||(this.fire(ve.STREAM_BUFFER_START,{hasLowerStreamIndex:this.sorcerer[Bu].activeStreamIndex>0}),this.Hn=!0),!1):void 0)},i.mi=function(){return!!this.ended||Math.ceil(this.currentTime)===Math.ceil(this.ot.duration)},i.Ti=function(){if(!this.sorcerer)return!1;if("closed"===this.sorcerer.readyState)return!1;if(this.ot.webkitCurrentPlaybackTargetIsWireless)return!1;if(this.mi())return!1;if(null!==this.Yn){try{this.bi()}catch(t){return this.wi(t),!1}return!0}if(0===this.currentTime&&!this.On)return this.In;const t=this.oi();return t&&"function"==typeof t.catch&&t.catch(this.wi.bind(this)),!0},i.wi=function(t){t.code===DOMException.INVALID_STATE_ERR?this.fire(ve.SCANNER_ERROR,{reason:t}):this.fire(ve.LOAD_SEGMENT_FAILED,new TelecineError(`${ve.LOAD_SEGMENT_FAILED} - ${t.name}`,t.message)),clearInterval(this.Kn)},i.onprogress=function(){this.qn.canPlayFromTimeInStream(this.currentTime,this.sn())&&this.Hn&&(this.fire(ve.STREAM_BUFFER_END),this.Hn=!1)},i.onwaiting=function(){return!this._n||!this._n.start()},i.onerror=function(){return!!this.ot.error&&(this.ot.error.code===this.ot.error.MEDIA_ERR_DECODE?(this.fire(ve.SCANNER_ERROR,{reason:`encountered media decode error. Message: "${this.ot.error.message}"`}),!1):this.ot.error.code===this.ot.error.MEDIA_ERR_SRC_NOT_SUPPORTED?(this.wn=!0,this.fire(ve.SCANNER_ERROR,{reason:`encountered media source not supported error. Message: "${this.ot.error.message}"`}),!1):t.prototype.onerror.call(this))},i.pause=function(){t.prototype.pause.call(this)},i.play=function(){return this.zn(),t.prototype.play.call(this,(()=>(this.Cn&&this.Cn(),this.jn||this.On||"auto"===this.Tt||(this.kn=this.ei(this.kn,this.preloadStream.bind(this))),this.kn.then((()=>r.resolve(this.ai))))))},i.onpause=function(){return this.si?(this.si=!1,!1):(t.prototype.onpause.call(this),!0)},i.onplay=function(){return!this.ui||(this.ui=!1,!1)},i.ei=function(t,n,i=!0){let e=t.then(n);return i&&(e=this.ri(e)),e},i.ri=function(t){return t.catch((t=>(this.fire(ve.FILE_ERROR,{reason:t}),new r((()=>{})))))},i.gi=function(){this.On&&this.zt[Bu][this.sorcerer.video.activeStreamIndex].bitrate/1e3>12e3&&(this.$n=this.sorcerer.removeBuffer())},i.ii=function(t,n){return new r((i=>{"none"!==n||this.jn&&!this.paused?i(t):this.Cn=()=>{i(t),this.Cn=null}}))},i.fi=function(t=this.Xn){return new r((n=>{const i=this.In&&0===t,e=this.qn.canPlayFromTimeInStream(t,this.sn());i||e?n(t):(this.gi(),this.Pn=n)})).then((t=>{this.Xn=null,this.ai=null;const n=new r(((t,n)=>{this.ci=n;const i=()=>{t(this.ot.currentTime),this.ot.removeEventListener("seeked",i)};this.ot.addEventListener("seeked",i)}));return this.ot.currentTime=t,n}))},i.Ai=function(t,n){"auto"!==t&&"auto"===n&&(this.kn=this.ei(this.kn,this.preloadStream.bind(this))),t!==n&&"none"!==n&&this.Cn&&this.Cn()},i.Si=function(t){const n=t.audio.reduce(((t,n)=>t+n.duration),0),i=t.video.reduce(((t,n)=>t+n.duration),0),e=n/t.audio.length,r=i/t.video.length;return e+4<r?r-e:0},i._i=function(t){return t.video.every((t=>t.segments.every((t=>"size"in t))))},i.ti=function(t){const n=this;return new r(Hu((function(i,e){if(n.Ft=t,n.zt[Bu]=n.Ri(t.video),t.audio){const i=n.Si(t);if(i>0)return n.fire(ve.AV_DURATION_MISMATCH,i),n.fire(ve.SCANNER_ERROR,{reason:"Encountered A/V duration mismatch"}),void e();const r=t.audio.filter((t=>"opus"===t.codecs)),s=t.audio.filter((t=>"opus"!==t.codecs)),o=Dr.browser.safari||Dr.iOS||Dr.iPadOS||!Mi().isTypeSupported('audio/mp4; codecs="opus"')||!r.length?s:r;n.zt[Vu]=n.Oi(o)}for(let i=0;i<n.zt[Bu].length;i++){let e=0;if(t.audio){const t=n.qn.getAudioIndexFromVideo(n.zt.video,n.zt.audio,i),r=n.zt[Vu][t];r&&(e=r.avg_bitrate)}n.zt[Bu][i].audioBitrate=e}return n.Ii(n.zt[Bu],n.zt[Vu],n.Ft.key_info),n._i(t)||n.resetBrain(),n.fire(ve.STREAMS_LOADED,n.zt),$u(Lu(n.zt[Bu]),(function({compatibleStreams:t,incompatibleStreams:e,incompatibleStreamsAttributes:r}){n.zt[Bu]=t,e.length&&(n.fire(ve.AVAILABLE_STREAMS_CHANGED),n.fire(ve.MEDIA_CAPABILITY_STREAMS_UNSUPPORTED,{incompatibleStreams:e,incompatibleStreamsAttributes:r})),i()}))})))},i.Ni=function(t,n){if(this.sorcerer&&this.sorcerer.destroy(),this.sorcerer=new mu(t,n),this.sorcerer.isInstanceofManagedMediaSource(this.sorcerer.mediaSource)){const n=document.createElement("source");n.type="video/mp4",n.src=URL.createObjectURL(this.sorcerer.mediaSource),t.appendChild(n);const{src:i,mime:e}=this.ft.externalDisplayFiles.AirPlay,r=document.createElement("source");r.type=e,r.src=i,t.appendChild(r)}else t.src=URL.createObjectURL(this.sorcerer.mediaSource);this.successfulSegments=this.sorcerer.getSuccessfulSegments(),this.failedSegments=this.sorcerer.getFailedSegments(),this.zn()},i.zn=function(t=!1){this.ki(500),clearTimeout(this.Wn),this.Wn=setTimeout((()=>{this.ki(5e3)}),6e4),t&&this.Ti()},i.ki=function(t){clearInterval(this.Kn),this.Kn=setInterval((()=>{this.Ti()}),t)},i.Jn=function(t=!1){let n=t?1/0:0;for(const i in this.zt)this.zt[i].length&&(n=Math[t?"min":"max"](n,this.zt[i][0].duration));return n},i.ni=function(t){return this.ti(t).then((()=>{const n=this.video&&this.video.metadata.percentShown?this.video.metadata.percentShown:null,i=this.qn.filterStreams(this.zt[Bu],this.ot.clientWidth,this.ot.clientHeight,n).length-1;let e=this.zt[Bu][0];this.Bn.length&&(e=this.zt[Bu][this.Bn[0]]),void 0!==this.gn&&i<=this.zt[Bu].indexOf(t.video[this.gn])&&(e=this.zt[Bu][i]),this.Ni(this.ot,{duration:this.Jn(),fetcherTimeout:8e3,fetcherRetryAbortErrors:!1,disableMMS:this.ht.disableMMS}),this.sorcerer.on("srcnotsupported",(()=>{this.fire(ve.SCANNER_ERROR,{reason:"this codec is not supported for mediasource playback"})})),this.ot.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",(t=>{const n=!this.ot.webkitCurrentPlaybackTargetIsWireless,i="closed"===this.sorcerer.readyState;n&&i&&this.fire(ve.SCANNER_ERROR,{reason:"MediaSource was closed during AirPlay, falling back to Native HLS playback."})}));const r=this.zt[Bu].indexOf(e);for(const t in this.zt)this.zt[t].forEach(((n,i)=>{let e=this.Mi(i,"init",t);this.Di(i,t)&&this.zt[t][i].init_segment_range&&(e={url:e,byteRange:this.Xi(i,"init",t)}),this.sorcerer.addStream(`${n.mime_type}; codecs="${this.zt[t][i].codecs}"`,e)}));this.sorcerer.video.switchTo(r,!0,{reasonForSwitch:7}),this.sorcerer.on("queued",this.Pi.bind(this)),this.sorcerer.on("downloadabort",this.Ci.bind(this)),this.sorcerer.on("appendbufferend",this.ji.bind(this)),this.sorcerer.on("downloadstart",this.Li.bind(this)),this.sorcerer.on("downloadend",this.Ui.bind(this)),this.sorcerer.on("downloaderror",this.xi.bind(this)),this.sorcerer.on("downloadtimeout",this.Fi.bind(this)),this.sorcerer.on("quotaexceedederror",this.$i.bind(this)),this.sorcerer.video.on("streamchange",this.Hi.bind(this)),this.sorcerer.video.on("streamchangestart",this.Bi.bind(this)),this.sorcerer.mediaSource.addEventListener("sourceended",(()=>{this.fire(he.PROGRESS)}))}))},i.Ri=function(t){const n=t.slice(0);return n.sort((function(t,n){const i=t.width*t.height*t.avg_bitrate,e=n.width*n.height*n.avg_bitrate;return t.width===n.width&&t.height===n.height?t.framerate-n.framerate:i-e})),n},i.Oi=function(t){const n=t.slice(0);return n.sort((function(t,n){return t.avg_bitrate*t.channels-n.avg_bitrate*n.channels})),n},i.Di=function(t,n){return!!this.zt[n][t].segments[0].range},i.Xi=function(t,n,i){return"init"===n?this.zt[i][t].init_segment_range:this.zt[i][t].segments[n].range},i.Vi=function(t,n,i=Bu){return"init"===n?0:this.zt[i][t].segments[n].start},i.Mi=function(t,n,i=Bu,e=!1){if("init"===n&&!this.zt[i][t].init_segment_url)return function(t){return Ur(t).buffer}(this.zt[i][t].init_segment);let r=this.Mn;const s=this.Ft.base_url&&-1!==this.Ft.base_url.indexOf("//");if(s&&(r=this.Ft.base_url),this.Ft.base_url&&!s&&(r+=this.Ft.base_url),this.zt[i][t].base_url&&(r+=this.zt[i][t].base_url),this.Di(t,i))return r;if("init"===n)return r+=this.zt[i][t].init_segment_url,r;const o=this.zt[i][t].segments[n];o.url&&(r+=o.url);const u=-1!==r.indexOf("akamaized"),c=-1===r.indexOf("?")?"?":"&";return e&&this.CMCDLogger&&u&&(r+=`${c}${this.CMCDLogger.getLogAsQueryParam(o,i)}`),r},i.Gi=function(t,n,i){return`${t}:${n}:${i}`},i.Yi=function(t,n,i){return n===this.zt[i][t].segments.length-1},i.Ki=function(t,n){const i=[],e=this.Sn[t];if(!e)return i;for(let r=0;r<e.length;r++)this.An.has(this.Gi(e[r],t,n))&&i.push(e[r]);return i},i.getCurrentStream=function(t="video"){return this.sn(0,t)},i.sn=function(t=0,n=Bu){return void 0!==this.sorcerer&&(t=this.sorcerer[n].activeStreamIndex),this.zt[n][t]},i.Qn=function(t){let n=this.zt[Bu];const i=this.video&&this.video.metadata.percentShown?this.video.metadata.percentShown:null;if(n=this.qn.filterStreams(n,this.ot.clientWidth,this.ot.clientHeight,i),0===n.length)return r.resolve({index:!1,reasonForSwitch:null});if(this.Vn[Bu])return r.resolve({index:!1,reasonForSwitch:null});const e=n[n.length-1];if(e.id!==this.Dn){this.Dn=e.id;const t={index:this.zt[Bu].indexOf(e),streams:this.zt[Bu]};this.fire(ve.STREAM_TARGET_CHANGE,t)}const s=this.sn();return this.qn.shouldPowerUp(n,s,t).then((t=>!1===t.index?this.qn.shouldPowerDown(n,s).then((t=>!1===t.index?{index:t.index,reasonForSwitch:t.reasonForSwitch}:{index:this.zt[Bu].indexOf(n[t.index]),reasonForSwitch:t.reasonForSwitch})):{index:this.zt[Bu].indexOf(n[t.index]),reasonForSwitch:t.reasonForSwitch}))},i.Wi=function(t=Bu){return this.sorcerer.allowSegmentRequests?this.Qn(!1).then((n=>{let{index:i,reasonForSwitch:e}=n,r={reasonForSwitch:e};t===Vu&&(!1===i&&(i=this.sorcerer[Bu].activeStreamIndex),i=this.qn.getAudioIndexFromVideo(this.zt.video,this.zt.audio,i),this.sorcerer[Vu].activeStreamIndex===i&&(i=!1));let s=!1;!1!==i&&(s=i>this.sorcerer[t].activeStreamIndex,this.Vn[t]=!0,this.sorcerer[t].switchTo(i,!0,r).then((()=>{this.Vn[t]=!1})).catch(console.error));let o=s;const u=this.qn.getSegmentsToLoad(o,t,this.sn()),c=this.sorcerer[t].activeStreamIndex;for(let n=0;n<u.length;n++){const i=this.Mi(c,u[n],t,!0),e=this.Ki(u[n],t);if(e.length>1)continue;if(1===e.length&&c<=e[0])continue;const r=this.Yi(c,u[n],t),s={stream:c,segment:u[n],type:t},o=this.sorcerer[t].streams[c];let a=i;this.Di(c,t)&&(a={url:a,byteRange:this.Xi(c,u[n],t)});const h=this.Vi(c,u[n],t),f=t===Bu;let l=null;0===c&&t===Bu&&(l=16e3);let d=null;try{d=this.zt[t][c].segments[u[n]].size}catch(t){}o.addSegment(a,{identifier:s,isFinalSegment:r,priority:h,includeWithBandwidthChecks:f,timeout:l,size:d}).catch((t=>{}))}})).catch((t=>{throw t})):r.resolve()},i.bi=function(){for(const t in this.zt){if(0===this.zt[t].length)continue;let n=0;const i=this.qn.getSegmentsToLoad(!1,t,this.sn());i.length>0&&(n=i[0]);let e=this.Yn;t===Vu&&(e=this.qn.getAudioIndexFromVideo(this.zt.video,this.zt.audio,this.Yn));const r=this.Gi(e,n,t);if(this.An.has(r))continue;const s=this.Mi(e,n,t),o=this.Yi(e,n,t),u=this.sorcerer[t].streams[e],c={stream:e,segment:n,type:t},a=!0;let h=s;this.Di(e,t)&&(h={url:h,byteRange:this.Xi(e,n,t)}),u.addSegment(h,{identifier:c,isFinalSegment:o,loadOnly:a,priority:0}).catch((t=>{}))}},i.oi=function(){const t=this.ot.webkitCurrentPlaybackTargetIsWireless,n="closed"===this.sorcerer.readyState;return t||n?r.resolve():this.kn&&this.kn.then((()=>{const t=[];for(const n in this.zt)this.zt[n].length>0&&t.push(this.Wi(n));return r.all(t)}))},i.Pi=function(t){this.An.add(this.Gi(t.stream,t.segment,t.type)),this.Sn[t.segment]||(this.Sn[t.segment]=[]),-1===this.Sn[t.segment].indexOf(t.stream)&&this.Sn[t.segment].push(t.stream)},i.qi=function(t){(this.Sn[t.segment]||[]).forEach((n=>{this.An.delete(this.Gi(n,t.segment,t.type))}))},i.Ci=function(t){this.Sn[t.segment]&&this.qi(t)},i.ji=function(t){this.fire(ve.APPEND_BUFFER_END,{identifier:t}),this.zn(),this.Un&&t.stream===this.Ln&&(this.Un=!1,this.xn=this.zt[Bu][t.stream].segments[t.segment].start),this.Sn[t.segment]&&this.qi(t);const n=this.qn.canPlayFromTimeInStream(this.Xn,this.sn());null!==this.Xn&&this.Pn&&n&&(this.Pn(this.Xn),this.Pn=null),this._n&&this._n.onSegmentAppended()},i.Li=function(t){this.fire(ve.DOWNLOAD_START,{identifier:t})},i.Ui=function(t,n){this.fire(ve.DOWNLOAD_END,{identifier:t,data:n})},i.xi=function(t,n){this.qi(t);let i=ve.DOWNLOAD_ERROR;410===n&&(i=ve.MEDIA_URL_EXPIRED),502===n&&this.video.metadata.drm&&(i=ve.DRM_FAILURE),this.fire(i,{identifier:t,status:n})},i.Fi=function(t,n){this.fire(ve.DOWNLOAD_TIMEOUT,{identifier:t,data:n}),this.Sn[t.segment]&&this.qi(t),t.type===Bu?this.Vn[Bu]=!1:t.type===Vu&&(this.Vn[Vu]=!1)},i.$i=function(t){this.fire(ve.QUOTA_EXCEEDED_ERROR,{buffered:t})},i.Bi=function(t,n){const i={previousStreamIndex:this.Ft.video.indexOf(this.zt[Bu][t]),index:this.Ft.video.indexOf(this.zt[Bu][n]),streams:this.Ft.video};this.fire(ve.STREAM_CHANGE_START,i)},i.Hi=function(t,n){var i;if(null==(i=this.Ft)||!i.video)return;t>this.Ln&&this.currentTime>0&&(this.Un=!0),this.Ln=t;const e={index:this.Ft.video.indexOf(this.zt[Bu][t]),streams:this.Ft.video,metadata:n};this.fire(ve.STREAM_CHANGE,e)},i.Ii=function(t=[],n=[],i={}){const e=this.ft.drmHandler;if(!e)return;const r=function(t,n){const i={audio:t.map((t=>`${t.mime_type};codecs="${t.codecs}"`)),video:[]};for(let t=0;t<n.length;t++){const[e,r]=n[t].codecs.split(",");i.video[t]=`${n[t].mime_type};codecs="${e}"`,r&&i.audio.push(`audio/mp4;codecs="${r}"`)}return i}(n,t);e.init(this,r,i),e.setFallbackCallback((()=>{this.paused||this.ot.pause()}))},i.Rn=function(){var t;null!=(t=this.ht.tests)&&null!=(t=t.cmcd)&&t.group&&(this.CMCDLogger=new Nu(this,this.ht.sessionMetadata))},i.Zn=function(){return Ii("module/media-manifest.js")},d(n,[{key:"preload",get:function(){return this.Tt},set:function(t){this.Ai(this.Tt,t),this.Tt=t}},{key:"videoElement",get:function(){return this.ot}},{key:"videoWidth",get:function(){const t=this.sn();return t?t.width:this.ot.videoWidth}},{key:"videoHeight",get:function(){const t=this.sn();return t?t.height:this.ot.videoHeight}},{key:"restrictedStreamIndexes",get:function(){return this.Bn},set:function(t){this.Bn.join(",")!==t.join(",")&&(this.Bn=t,this.kn.then((()=>this.lockStreamIndexes())).catch(console.error))}},{key:"currentTime",get:function(){return null!==this.Xn?this.Xn:this.ot.currentTime},set:function(t){(this.In||0!==t)&&this.seekToTime(t)}},{key:"downloadSpeed",get:function(){return this.Gn}},{key:"brainDebug",get:function(){const t=this.sorcerer&&this.qn&&this.qn.getCurrentSpeed?this.qn.getCurrentSpeed():null;let n=this.sorcerer&&this.sorcerer.getResponseSpeeds?this.sorcerer.getResponseSpeeds():null;return n=n?n.slice(-20):[],{currentSpeed:t,responseSpeeds:n}}},{key:"isLowerProfileAvailable",get:function(){return this.sorcerer?this.sorcerer[Bu].activeStreamIndex>0:null}},{key:"videoStreams",get:function(){return this.zt[Bu]}}],[{key:"displayName",get:function(){return"MediaSourceScanner"}},{key:"supportedVideoTypes",get:function(){return["application/vnd.vimeo.dash+json","video/vnd.mpeg.dash.mpd"]}}])}(ss),Yu=function(){function t(t){this.fn=t,this.zi=0,this.Qi=setInterval(this.Ji.bind(this),500)}var n=t.prototype;return n.destroy=function(){clearInterval(this.Qi)},n.Ji=function(){const t=this.fn.videoElement,n=this.fn.getCurrentStream();if(!t||!n)return;this.zi=t.currentTime;const i=this.Zi();null!==i&&(this.te=i,this.fn.fire(pe.LATENCY_UPDATED,i),this.fn.lowLatencyMode&&(Dr.browser.ie||Dr.browser.safari||null!==this.fn.presentationDelay&&(t.playbackRate=1)))},n.ne=function(){const t=this.fn.getCurrentStream();return t?t.edge+t.age:null},n.Zi=function(){const t=this.ne();return null===t||0===this.zi?null:t-this.zi},n.ee=function(){const t=this.fn.videoElement,n=this.fn.getCurrentStream();if(!t||!n)return 0;const i=t.buffered.length;return i?t.buffered.end(i-1):n.edge-this.zi},d(t,[{key:"latency",get:function(){return this.te}},{key:"liveSyncPosition",get:function(){const t=this.ne(),n=this.fn.presentationDelay,i=this.fn.getCurrentStream();return null===t||null===n||null===i?0:t-n-this.edgeStalled}},{key:"edgeStalled",get:function(){const t=this.fn.getCurrentStream();if(!t)return 0;const n=3*(this.fn.lowLatencyMode&&t.partTargetDuration||t.targetDuration);return Math.max(t.age-n,0)}}])}();const Ku=[1,2,5];let Wu=function(t){function n(n,i={}){var e;return(e=t.call(this,n,i)||this).re=.4,e.se=.6,e.consecutiveStreamIndex={},e.isNewPlayback=!0,e}E(n,t);var i=n.prototype;return i.optimalStream=function(t,n){var i,e;this.isNewPlayback&&((null==(e=this.scanner.sorcerer)?void 0:e.getResponseSpeeds().length)>=2&&(this.isNewPlayback=!1));if(1===t.length)return{index:0,reasonForSwitch:6};if(this.isNewPlayback){let n=0,i=0,e=this.scanner.videoElement.clientHeight,r=[];for(let s=0;s<t.length;s++){let o=t[s].height;r.push(o),o<e&&o>i&&(n=s,i=t[s].height)}return n=Math.max(0,n-1),{index:n,reasonForSwitch:4}}const r=this.getCurrentSpeed();let s=n,o=n;for(let n=0;n<t.length;n++)r*this.re>t[n].bandwidth&&(s=n),r*this.se>t[n].bandwidth&&(o=n);const u=n<s?s:o;this.oe(u),this.consecutiveStreamIndex[u]++;const c=this.scanner.lowLatencyMode?.5:1.5,a=this.scanner.segmentLength*c,h=this.scanner.videoElement,f=h.buffered,l=null==(i=this.ht.mediaSourceScanner)?void 0:i.droppedFrameSwitchPercent;return f&&0!==f.length?f.end(f.length-1)-h.currentTime<a?{index:0!==n?n-1:0,reasonForSwitch:1}:n>0&&!isNaN(l)&&this.hasTooManyDroppedFrames(n,this.scanner.getCurrentStream(),l)?(this.blacklist(n),this.scanner.fire(ve.DROPPED_FRAME_PERCENT_EXCEEDED),{index:n-1,reasonForSwitch:2}):this.consecutiveStreamIndex[u]>2&&u!==n?{index:u,reasonForSwitch:3}:{index:n,reasonForSwitch:null}:{index:0,reasonForSwitch:5}},i.getCurrentSpeed=function(){var t;return null==(t=this.scanner.sorcerer)?void 0:t.getCurrentSpeed({type:"average",howMany:5,weights:Ku})},i.oe=function(t){this.consecutiveStreamIndex[t]||(this.consecutiveStreamIndex[t]=0);for(const n in this.consecutiveStreamIndex)this.consecutiveStreamIndex.hasOwnProperty(n)&&parseInt(n,10)!==t&&(this.consecutiveStreamIndex[n]=0)},i.getAvailabilityStart=function(t,n){return this.ue(t,n.edge)},i.getAvailabilityEnd=function(t,n){return this.ce(t,n.edge)},i.canPlayFromTimeInStream=function(t,n){return!!n&&this.isTimeInBuffer(t,this.scanner.ot.buffered,this.scanner.ot.duration)},i.getSegmentsToLoad=function(t,n,i){var e,r;const{currentTime:s,liveTailTime:o,sorcerer:u,bufferTarget:c,atLiveEdge:a}=this.scanner,h=null==(e=u[n])||null==(e=e.sourceBuffer)?void 0:e.buffered,f=null!=h&&h.length?h.start(h.length-1):0,l=Pi(Math.max(s,f),h);if(!t&&l>=c)return[];const d=Math.max(s,o),v=a?i.edge:d,p=this.ue(v,i.edge),E=this.ce(v,i.edge),y=this.scanner.lowLatencyMode&&(null==(r=i.parts)?void 0:r.length),m=[].concat(w(i.segments),w(i.parts??[])),T=(y?i.parts:m).filter((n=>!!n.uri&&(t||!this.scanner.isSegmentAdded(n))&&!(n.end<p||n.start>E)));return y&&T.forEach(((t,n)=>{for(;t=t.dependentOn;)T.includes(t)||this.scanner.isStreamSegmentAdded(t)||T.splice(n,0,t)})),u[n].activeStreamIndex,T},i.ue=function(t,n){const i=n-this.ae();return Math.max(0,Math.min(t,i))},i.ce=function(t,n){const i=t+this.scanner.bufferTarget;return Math.min(i,n)},i.ae=function(){return this.scanner.presentationDelay||this.scanner.manifest.presentationDelay},d(n,[{key:"displayName",get:function(){return"Live"}}])}(Tu);const qu=["disabled","hidden","showing"],zu=["subtitles","captions","descriptions","chapters","metadata"],Qu=["ar","fa","he","iw","ku","ps","sd","ur","yi"],Ju=new yi,Zu=new yi;let TelecineTextTrack=function(t){function TelecineTextTrack({kind:n,src:i=null,label:e="",language:r="",id:s=$i()},o){var u;if(u=t.call(this)||this,-1===zu.indexOf(n))throw Gr(12,"SYNTAX_ERR","Syntax Error");return Object.defineProperties(u,{kind:{value:n,enumerable:!0},label:{value:e,enumerable:!0},language:{value:r,enumerable:!0},id:{value:`${s}`,enumerable:!0},rtl:{value:-1!==Qu.indexOf(r.substr(0,2)),enumerable:!0}}),u.video=o,u.src=i,u.Ot=!1,Ju.set(u,"disabled"),u}return E(TelecineTextTrack,t),TelecineTextTrack.prototype.dispatchEvent=function(t){this.fire(t,{target:this})},d(TelecineTextTrack,[{key:"mode",get:function(){return Ju.get(this)},set:function(t){if(qu.indexOf(t)>-1){if(this.Ot=!0,Ju.get(this)===t)return;Ju.set(this,t),this.video.currentScanner&&this.video.currentScanner.setModeForTrack(this,t),this.dispatchEvent("modechange")}}},{key:"src",get:function(){return Zu.get(this)},set:function(t){Zu.set(this,t),this.video.fire(ve.TEXT_SRC_UPDATE,this)}},{key:"cues",get:function(){return this.video.currentScanner?this.video.currentScanner.getCuesForTrack(this):[]}},{key:"activeCues",get:function(){return this.video.currentScanner?this.video.currentScanner.getActiveCuesForTrack(this):[]}},{key:"trackElement",get:function(){return document.getElementById(`telecine-track-${this.id}`)}}])}(bi);function tc(t){var n=/^(?:(\d{2,}):)?(\d{2}):(\d{2})[,.](\d{3})$/.exec(t);if(!n)return-1;var i=parseInt(n[4],10)/1e3;return i+=parseInt(n[3],10),n[2]&&(i+=60*parseInt(n[2],10)),n[1]&&(i+=60*parseInt(n[1],10)*60),i}function nc(t){var n=0,i=t.split(/(?:(?:\r\n|\n){2,})/),e=[],r=null;do{0===n&&/^\uFEFF?WEBVTT(?: .*)?/.test(i[n])&&n++,(r=/^(?:(.*)(?:\r\n|\n))?([\d:,.]+) --> ([\d:,.]+)(.*)?(?:\r\n|\n)([\s\S]*)/.exec(i[n]))&&e.push({startTime:tc(r[2]),endTime:tc(r[3]),text:r[5]}),n++}while(n<i.length);return e}function ic(t,n,i){return i?n?n(t):t:(t&&t.then||(t=r.resolve(t)),n?t.then(n):t)}function ec(t,n){try{var i=t()}catch(t){return n(t)}return i&&i.then?i.then(void 0,n):i}function rc(t,n){return t&&t.then?t.then(n):n(t)}function sc(){}function oc(t,n){var i=t();return i&&i.then?i.then(n):n(i)}function uc(t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];try{return r.resolve(t.apply(this,n))}catch(t){return r.reject(t)}}}function cc(t,n){if(!n)return t&&t.then?t.then(sc):r.resolve()}const ac=Dr.browser.ie||Dr.browser.edge?.5:.2,hc=8e3;let fc=function(t){function n(n,i={}){var e,r;return(r=t.call(this,n,i)||this).he=!1,r.fe=!1,r.le=!1,r.de=!0,r.ve=!1,r.pe=2e3,r.Ee=1e4,r.reset(),r.defaultPresentationDelay=i.presentationDelay??(i.lowLatencyMode?3:12),r.defaultBufferTarget=i.lowLatencyMode?3:12,r.bufferTarget=r.defaultBufferTarget,r.presentationDelay=r.defaultPresentationDelay,r.lowLatencyMode=i.lowLatencyMode??!1,r.disableDeltaUpdates=i.disableDeltaUpdates??!1,Object.defineProperty(r,"eventIsLowLatency",{value:i.lowLatencyMode??!1,writable:!1}),Object.defineProperty(r,"eventHasDVREnabled",{value:i.dvrEnabled??!1,writable:!1}),r.ye=null==(e=r.ht.tests)||null==(e=e.llhls_timeout)?void 0:e.group,window.addEventListener("online",(()=>{r.play()})),r}E(n,t),n.supported=function(t){const n=Mi(t);return void 0!==n&&n.isTypeSupported};var i=n.prototype;return i.deactivate=function(){t.prototype.deactivate.call(this),this.reset()},i.reset=function(){var t,n,i;null==(t=this.me)||t.destroy(),null==(n=this.Te)||n.stop(),null==(i=this.be)||i.destroy(),this.we=Xi(),this.me=null,this.zt={},this.zt.video=[],this.zt.audio=[],this.Ln=0,this.ge=!1,this.Ae=!1,this.Se=0,this._e=Number.NEGATIVE_INFINITY,this.Re=-1,this.Xn=null,this.Pn=null,this.Oe=new Wu(this,this.ht),this.be=new Yu(this),this.Bn=[],this.Vn={},this.Ie={},this.Ne={},this.ke={},this.Me={}},i.endLive=function(){var n;this.ge=!1,this.Ae=!0,this.eventHasDVREnabled&&!this.atLiveEdge||(null==(n=this.Te)||n.stop(),this.me&&(this.me.abortFetches(),this.me.endOfStream()),this.eventHasDVREnabled||t.prototype.deactivate.call(this),this.fire(he.ENDED))},i.De=function(){this.ge||(this.ge=!0,this.fire(pe.STREAM_ONLINE))},i.Xe=function(){this.ge&&(this.ge=!1,this.fire(pe.STREAM_OFFLINE))},i.Pe=function(t){t?this.De():this.Xe()},i.Ce=function(t){try{const n=this;if(n.Ae)return ic();n.Te&&(n.Te.stop(),n.Te.off());let i=[n.Zn()];return n.video.metadata.p2pReady&&i.push(n.video.metadata.p2pReady),ic(r.allSettled(i),(function([i]){const{M3U8Loader:e,PLAYLIST_UPDATE:s,PLAYLIST_ERROR:o,convertTsCodecs:u}=i.value;return n.Te=new e({disableDeltaUpdates:n.disableDeltaUpdates}),n.Te.lowLatencyMode=n.lowLatencyMode,n.Te.dvrEnabled=n.eventHasDVREnabled,n.Te.on(s,n.je.bind(n)),n.Te.on(o,(t=>{n.Xe()})),rc(ec((function(){const i=n.video.metadata.playlistRefreshUrl;return ic(n.Te.start(t,i),(function(t){n.Ft=t,n.De()}))}),(function(t){throw n.Xe(),n.endLive(),t})),(function(t){n.zt.video=lc(function(t){return t.filter((n=>n.codecs.split(".")[0]===t[0].codecs.split(".")[0]))}(function(t){const n=t.slice(0);return n.sort((function(t,n){const i=t.width*t.height*t.avg_bitrate,e=n.width*n.height*n.avg_bitrate;return t.width===n.width&&t.height===n.height?t.framerate-n.framerate:i-e})),n}(n.Ft.video))),n.zt.audio=lc(function(t){return t.filter(((t,n,i)=>i.indexOf(t)===n))}(function(t,n){return t.reduce(((t,i,e,r)=>t.concat(n(i,e,r))),[])}(n.zt.video,(({audio:t})=>t))));const{index:i,reasonForSwitch:e}=n.Le("video",!0);let s={reasonForSwitch:e};return ic(n.Te.switchTo("video",i),(function(){let t,e=[];if(n.zt.audio.length){let{index:i}=n.Le("audio",!0);t=i,e.push(n.Te.switchTo("audio",t))}if(n.manifest.captions&&n.manifest.captions.length>0){const{index:t}=n.Le("subtitles",!0);e.push(n.Te.switchTo("subtitles",t))}return ic(r.all(e),(function(){var e,r;null==(e=n.me)||e.destroy(),n.me=new mu(n.ot,{fetcherRetryAbortErrors:!1,fetcherTimeout:hc,disableMMS:n.ht.disableMMS}),n.me.initFrameDropper(),n.zt.video.forEach((t=>{n.me.addStream(u($r(n.Te.activeStream("video").mimeType,t.codecs)),t.initSegment)})),n.zt.audio.forEach((t=>{n.me.addStream(u($r(n.Te.activeStream("audio").mimeType,t.codecs)),t.initSegment)})),n.fire(ve.STREAMS_LOADED,n.zt),n.manifest.captions&&n.manifest.captions.length>0&&(n.manifest.captions.forEach(n.Ue.bind(n)),n.fire(ve.TEXT_TRACKS_AVAILABLE)),n.xe(),n.me.video.switchTo(i,!1,s),n.zt.audio.length&&(null==(r=n.me.audio)||r.switchTo(t,!1))}))}))}))}))}catch(t){return r.reject(t)}},i.Fe=function(){try{const t=this;return ic(function(t){if(t&&t.then)return t.then(sc)}(ec((function(){return ic(t.Te.update(),(function(){t.De()}))}),(function(){t.Xe()}))))}catch(t){return r.reject(t)}},i.xe=function(){this.me.video.on("streamchange",this.Hi.bind(this)),this.me.video.on("streamchangestart",this.Bi.bind(this)),this.me.on("downloadend",this.Ui.bind(this)),this.me.on("downloadtimeout",this.Fi.bind(this)),this.me.on("downloadabort",this.$e.bind(this)),this.me.on("appendbufferend",this.He.bind(this))},i.Ui=function(t,n){if(t&&t.isInitSegmentRequest)return;const i=this.sn();n.extraContext={liveAvail:{start:this.Oe.getAvailabilityStart(this.currentTime,i),end:this.Oe.getAvailabilityEnd(this.currentTime,i)}},this.fire(ve.DOWNLOAD_END,{identifier:t,data:n})},i.Fi=function(t,n){t&&t.isInitSegmentRequest||(this.Gi(t),this.Be(t),this.Vn[t.type]=!1,this.fire(ve.DOWNLOAD_TIMEOUT,{identifier:t,data:n}))},i.$e=function(t){t&&t.isInitSegmentRequest||(this.Gi(t),this.Be(t))},i.Bi=function(t,n){const i={previousStreamIndex:this.zt.video.indexOf(this.zt.video[t]),index:this.zt.video.indexOf(this.zt.video[n]),streams:this.zt.video};this.fire(ve.STREAM_CHANGE_START,i)},i.Hi=function(t,n={}){this.fire(ve.STREAM_CHANGE,{index:t,streams:this.zt.video,metadata:n})},i.Ve=function(t,n){for(let i=0;i<(null==n?void 0:n.length);i++)if(n.start(i)>t)return i},i.He=function(t){const{type:n,stream:i}=t,e=this.sorcerer[n].sourceBuffer.buffered,r=this.Ge(t);if(r&&e.length&&(this.zt[n][i].playlist.timeOffset=e.end(e.length-1)-(r.end-r.timeOffset)),null===this.Xn||!this.Pn)return;const s=this.Ve(this.currentTime,e),o=(null==e?void 0:e.start(s))??0,u=Pi(o,e);if(void 0!==s&&u>this.bufferTarget)return Number((o-this.currentTime).toFixed(3)),void(this.currentTime=o);this.Xn<this.liveTailTime&&(this.Xn=this.liveTailTime),this.Oe.canPlayFromTimeInStream(this.Xn,this.sn())&&(this.Pn(this.Xn),this.Pn=null)},i.Gi=function({type:t,segment:n,part:i}){return`${t}_${n}_${i}`},i.Ge=function({type:t,stream:n,segment:i,part:e}){const r=this.zt[t][n].getSegmentBySN(i);return(null==r?void 0:r.getPart(e))||r},i.Be=function(t){if(t.part>0){const n=T(T({},t),{},{part:t.part-1});this.Be(n)}const n=this.Gi(t);delete this.Ie[n]},i.isSegmentAdded=function(t){return!!this.Ie[this.Gi(t)]},i.isStreamSegmentAdded=function(t){const n=this.Gi(t),i=this.me[t.type].activeStreamIndex;return!!this.Ie[n]&&this.Ie[n].stream===i},i.je=function(t,n){try{var i;const r=this,{type:s}=t;var e;return null==(i=r.me)||i.setLiveSeekableRange(r.liveTailTime,r.liveEdgeTime),r.fire(ve.STREAM_UPDATED,t),"subtitles"===s?((r.fe||r.le)&&(null==(e=r.manifest.captions)?void 0:e.length)>0&&r.Ye(),ic()):(n||r.Wi(s),r.Pe(r.Ke(s)||!r.We()),r.qe(),(r.lowLatencyMode||r.video.metadata.p2pReady)&&r.ze(),ic())}catch(t){return r.reject(t)}},i.Ue=function({label:t,language:n},i){if(!this.Qe){const e=new TelecineTextTrack({label:t,id:i,kind:"captions",language:n},this.ft);this.ft.textTracks=Lr([e]),this.Qe=this.addTextTrack(e)}},i.Je=function(t){return`${t.type}_${t.mediaSequenceNumber}`},i.Ze=function(t){const n=this.Je(t),i=this.Ne[n],e=t.end>=this.currentTime&&t.start<=this.currentTime+this.bufferTarget;return this.fe&&!i&&e},i.tr=function(t){const n=this.Je(t),i=this.ke[n],e=t.end>=this.liveEdgeTime-t.duration&&t.start<=this.liveEdgeTime+this.bufferTarget;return this.le&&!i&&e},i.nr=function(t){try{const n=this,i=n.Je(t);return ic(oc((function(){if(!n.Me[i])return ic(We(t.url).text(),(function(t){const e=nc(t),r=function(t){const n=t.match(/=MPEGTS:(\d+),/);return(n&&n[1]||0)/9e4}(t),s=e.map((t=>(t.startTime=r+t.startTime,t.endTime=r+t.endTime,new(window.VTTCue||window.TextTrackCue)(t.startTime,t.endTime,t.text))));n.Me[i]=s}))}),(function(){return n.Me[i]})))}catch(t){return r.reject(t)}},i.Ye=function(){try{const t=this;return ic(t.we,(function(){t.manifest.captions&&t.manifest.captions[0].segments.forEach(uc((function(n){const i=t.Je(n),e=t.Ze(n),r=t.tr(n);return function(){var s=function(){if(e||r)return ic(t.nr(n),(function(n){e&&(t.Ne[i]=!0,n.forEach((n=>{t.Qe.addCue(n)}))),r&&(t.ke[i]=!0,t.fire(ve.SEGMENT_CUES_LOADED,n))}))}();if(s&&s.then)return s.then(sc)}()})))}))}catch(t){return r.reject(t)}},i.Ke=function(t){var n;const i=this.sn(t),e=3*(this.lowLatencyMode?3:1);return(null==(n=i.playlist)?void 0:n.misses)<e},i.oi=function(){try{const t=this;return ic(t.we,(function(){const n=t.ot.webkitCurrentPlaybackTargetIsWireless,i="closed"===t.me.readyState;if(!n&&!i)for(const n in t.zt)t.zt[n].length>0&&t.Wi(n)}))}catch(t){return r.reject(t)}},i.Wi=function(t){try{const n=this;return ic(n.we,(function(){if(!n.me.allowSegmentRequests)return;const{index:i,reasonForSwitch:e}=n.Le(t);let r;return oc((function(){if(i>=0&&i!==n.sorcerer[t].activeStreamIndex)return r=i>n.sorcerer[t].activeStreamIndex,n.Vn[t]=!0,ic(n.Te.switchTo(t,i),(function(){let r={reasonForSwitch:e};n.sorcerer[t].switchTo(i,!0,r).then((()=>{n.Vn[t]=!1})).catch(console.error)}))}),(function(){return ic(_i(0),(function(){const i=n.lowLatencyMode&&void 0!==r,e=n.me[t].activeStreamIndex,s=n.sn(t,e),o=n.Oe.getSegmentsToLoad(i,t,s),u=n.ir();o.forEach((i=>{const r=n.Gi(i),o={type:t,stream:e,segment:i.segment,part:i.part},c="video"===t&&!i.hint;let a=u;if(i.hint&&n.he&&i.start>n.currentTime){const t=1e3*(i.start-n.currentTime);a=Math.min(hc,t+u)}const h=s.avg_bitrate/8*i.duration,f=n.sorcerer[t].streams[e],l=n.er(i);f.addSegment(l,{identifier:o,includeWithBandwidthChecks:c,priority:i.programDateTime,excludeConnectTime:n.lowLatencyMode,timeout:n.ye||n.lowLatencyMode?a:hc,size:n.ye||n.lowLatencyMode?h:void 0}).catch((t=>{t instanceof cs||t instanceof Oe||n.Be(o)})),n.Ie[r]=o}))}))}))}))}catch(t){return r.reject(t)}},i.er=function(t){var n;let i=null==t?void 0:t.url;const e=null==(n=this.Te)?void 0:n.baseUrl;return e&&i&&!i.startsWith(e)&&(i=`${e}${t.uri}`),i},i.Le=function(t,n=!1){var i;let e;if(this.Vn[t])return{index:-1,reasonForSwitch:null};if("subtitles"===t)return e=this.Te.activeStream("video"),{index:e.subtitles[e.currentRenditions.subtitles].index,reasonForSwitch:null};if("audio"===t)return e=this.Te.activeStream("video"),{index:e.audio[e.currentRenditions.audio].index,reasonForSwitch:null};if(!n&&Li(this.Se)<this.pe)return{index:this.Ln,reasonForSwitch:null};this.Se=ji();const r=null==(i=this.video)||null==(i=i.metadata)?void 0:i.percentShown,s=this.Oe.filterStreams(this.zt.video,this.ot.clientWidth,this.ot.clientHeight,r);if(0===s.length)return{index:this.Ln,reasonForSwitch:null};const{index:o,reasonForSwitch:u}=this.Oe.optimalStream(s,this.Ln),c=s[o],a=this.zt.video.indexOf(c);if(a>=0&&(n||a!==this.Ln)){if(a>this.Ln&&Li(this._e)<this.Ee)return{index:this.Ln,reasonForSwitch:u};a<this.Ln&&(this._e=ji());const t={index:a,streams:this.zt.video};return this.fire(ve.STREAM_TARGET_CHANGE,t),this.Ln=a,{index:a,reasonForSwitch:u}}return{index:this.Ln,reasonForSwitch:u}},i.getCurrentStream=function(t="video"){return this.sn(t)},i.sn=function(t="video",n=0){return void 0!==this.me&&null!==this.me&&(n=this.me[t].activeStreamIndex),this.zt[t][n]},i.ze=function(){if(this.ot.currentTime===this.Re&&ji()-this.rr>=1e3&&this.sr()){const t=`Jumping forward 0.1s because of stall at time of ${this.ot.currentTime}`;this.fire(pe.STALL_JUMP,{msg:t}),this.ot.currentTime+=.1}this.Re=this.ot.currentTime,this.rr=ji()},i.sr=function(){return this.ot.readyState!==this.ot.HAVE_NOTHING&&!!this.ot.buffered.length&&!this.ot.paused&&this.ur(this.ot.buffered,this.ot.currentTime)},i.ur=function(t,n){for(let i=0;i<t.length;i++)if(!(n<t.start(i)-.1||n>t.end(i)-.5))return!0;return!1},i.qe=function(){const t=this.buffered;if(!t.length)return;const n=t.length,i=this.ot.currentTime;let e,r,s,o;try{e=function(t,n){if(!t||!t.length)return null;if(1===t.length&&t.end(0)-t.start(0)<1e-6)return null;let i;for(let e=0;e<t.length;e++)if(t.start(e)>n&&(0===e||t.end(e-1)-n<=.5)){i=e;break}return i>=0?i:null}(t,i)}catch(t){throw DOMException,t}if(null===e)return;if(this.ot.readyState===this.ot.HAVE_NOTHING)return;if(this.ot.paused)return;if(n<=e)return;try{r=t.start(e),s=t.end(n-1)}catch(t){throw DOMException,t}const u=r-i,c=s-r,a=this.lowLatencyMode?1:2;if(c>0&&c<=this.segmentLength*a)return o=`Preventing jump too close to buffered end time. Would have jumped to: ${r}. Last buffered end time ${s}.`,void this.fire(pe.BUFFER_GAP_JUMP_PREVENT,{msg:o});0===e?(o=`Jumping forward ${u} seconds because of gap before start time of ${r}`,this.fire(pe.BUFFER_GAP_JUMP,{msg:o})):(o=`Jumping forward ${u} seconds because of gap starting at ${t.end(e-1)} and ending at ${r}`,this.fire(pe.BUFFER_GAP_JUMP,{msg:o})),this.ot.currentTime=r+.1},i.We=function(){const t=this.buffered;return!!(t&&t.length&&this.ot.currentTime+ac>t.end(t.length-1))},i.setVideoSrc=function(t){try{const n=this;return ic(n.ii(n.Tt),(function(){return ic(n.Ce(t),(function(){return oc((function(){if(n.sorcerer.isInstanceofManagedMediaSource(n.sorcerer.mediaSource)){const t=document.createElement("source");t.type="video/mp4",t.src=URL.createObjectURL(n.sorcerer.mediaSource),n.ot.appendChild(t);let{src:i,mime:e}=n.ft.externalDisplayFiles.AirPlay;const r=document.createElement("source");return r.type=e,ic(fr(i),(function(t){r.src=t,n.ot.appendChild(r)}))}n.ot.src=URL.createObjectURL(n.sorcerer.mediaSource)}),(function(){n.we.resolve()}))}))}))}catch(t){return r.reject(t)}},i.ii=function(t){try{const n=this;return n.cr=Xi(),"none"===t&&n.paused||n.cr.resolve(),ic(n.cr)}catch(t){return r.reject(t)}},i.getBitrateAtTime=function(t,n="video",i="average"){if(!this.me)return 0;const e=this.me.streamIndexAtTime(t,n),r=this.zt[n][e];return r?r["average"===i?"avg_bitrate":"bitrate"]??r.bitrate:0},i.onprogress=function(){this.qe()},i.ondurationchange=function(){this.qe()},i.ontimeupdate=function(){if(!this.me)return;if(t.prototype.ontimeupdate.call(this),null!==this.Xn)return;this.atLiveTail=this.ar(this.ot.currentTime),this.hr(this.ot.currentTime)?this.atLiveEdge=!0:(this.ot.playbackRate<1||this.lr())&&(this.atLiveEdge=!1),this.fire(ve.DROPPED_FRAMES,this.me.getDroppedFrameTotal());const n=this.sn();if(n){const t={speed:this.Oe.getCurrentSpeed(),bitrate:n.avg_bitrate,speeds:this.me.getResponseSpeeds()};this.fire(ve.BANDWIDTH,t)}!this.ge&&this.We()&&this.fire(pe.STREAM_OFFLINE),!this.lowLatencyMode&&Li(this.Se)>this.pe&&this.oi()},i.hr=function(t){return t>=this.liveEdgeTime-1*this.segmentLength},i.lr=function(t){return t>=this.liveEdgeTime-2*this.segmentLength},i.ar=function(t){return t<=this.liveTailTime+2*this.segmentLength},i.fi=function(t=this.Xn){return new r((n=>{this.Oe.canPlayFromTimeInStream(t,this.sn())?n(t):this.Pn=n})).then((t=>(this.Xn=null,this.ai=null,this.ot.currentTime=t,new r(((t,n)=>{this.ci=n;const i=()=>{t(this.ot.currentTime),this.ot.removeEventListener("seeked",i)};this.ot.addEventListener("seeked",i)})))))},i.seekToTime=function(t){if(!this.eventHasDVREnabled||t===this.currentTime)return r.resolve();let n;if(null===this.Xn||(this.ci&&(this.ci(),this.ci=null),this.ai=null,this.Xn=null,this.Pn=null),this.Xn=t,!this.Oe.canPlayFromTimeInStream(t,this.sn()))try{this.Ie={};for(const t in this.zt)if(this.zt[t].length>0){const n=this.sorcerer[t].activeStreamIndex;this.sorcerer[t].streams[n].abort()}n=this.me.removeBuffer()}catch(t){}return this.ai=this.fi(t),r.all([this.we,n]).then((()=>(this.oi(),this.ai))).catch((t=>{}))},i.onpause=function(){var n;t.prototype.onpause.call(this),this.eventHasDVREnabled?this.atLiveEdge=!1:(null==(n=this.Te)||n.stop(),this.me&&(this.me.abortFetches(),this.Ie={},this.me.removeBuffer().catch((()=>{}))))},i.onplay=function(){this.eventHasDVREnabled||this.he&&this.Fe()},i.pause=function(){this.eventHasDVREnabled&&(this.atLiveEdge=!1),t.prototype.pause.call(this)},i.play=function(){const n=this;return t.prototype.play.call(this,uc((function(){return n.cr.resolve(),null!==n.Xn?r.resolve(n.ai):oc((function(){if(n.he&&!n.eventHasDVREnabled)return n.Ie={},rc(ec((function(){return cc(n.me.removeBuffer())}),(function(t){})),(function(){return cc(n.Fe())}))}),(function(){return ic(n.we,(function(){return n.oi(),ic(n.dr(),(function(){const t=Math.max(n.be.liveSyncPosition,n.ot.buffered.start(0));return n.de?n.currentTime=t:n.currentTime=n.ot.currentTime,n.he=!0,r.resolve()}))}))}))})))},i.dr=function(){return new r((t=>{const n=()=>{this.buffered.length&&(this.me.off("appendbufferend",n),t())};this.me.on("appendbufferend",n),n()}))},i.ir=function(){return this.Oe.getSegmentRelativeTimeout(this.zt.video,this.sn("video"),1e3*this.segmentLength)},i.Zn=function(){return Ii("module/media-manifest.js")},i.setCaptionsShouldDisplay=function(t){this.fe=t},i.setCaptionsShouldLoad=function(t){this.le=t},d(n,[{key:"preload",get:function(){return this.Tt},set:function(t){this.Tt!==t&&"none"!==t&&this.cr.resolve(),this.Tt=t}},{key:"latency",get:function(){var t;return null==(t=this.be)?void 0:t.latency}},{key:"lowLatencyMode",get:function(){return this._lowLatencyMode},set:function(t){this._lowLatencyMode=t,this.Te&&(this.Te.lowLatencyMode=t)}},{key:"downloadSpeed",get:function(){return this.Oe.getCurrentSpeed()}},{key:"restrictedStreamIndexes",get:function(){return this.Bn},set:function(t){this.Bn.join(",")!==t.join(",")&&(this.Bn=t,this.Oe.lock(this.Bn))}},{key:"videoWidth",get:function(){return this.pr?this.pr.width:this.ot.videoWidth}},{key:"videoHeight",get:function(){return this.pr?this.pr.height:this.ot.videoHeight}},{key:"currentTime",get:function(){return null!==this.Xn?this.Xn:this.ot.currentTime},set:function(t){this.ot.readyState<=this.ot.HAVE_NOTHING||(this.eventHasDVREnabled&&this.he?this.hr(t)?(this.atLiveEdge=!0,this.seekToTime(this.liveEdgeTime)):(this.atLiveEdge=!1,this.seekToTime(Math.max(t,this.liveTailTime))):this.ot.currentTime=t)}},{key:"liveEdgeTime",get:function(){return this.be.liveSyncPosition}},{key:"atLiveEdge",get:function(){return this.de},set:function(t){this.atLiveEdge!==t&&this.eventHasDVREnabled&&(this.de=t,this.ot.playbackRate>1&&t&&(this.ot.playbackRate=1),this.lowLatencyMode=!!this.eventIsLowLatency&&t,this.bufferTarget=t?this.defaultBufferTarget:18,t&&(this.presentationDelay=this.defaultPresentationDelay))}},{key:"atLiveTail",get:function(){return this.ve},set:function(t){this.atLiveTail!==t&&this.eventHasDVREnabled&&(this.ve=t,this.ot.playbackRate<1&&t&&(this.ot.playbackRate=1))}},{key:"liveTailTime",get:function(){var t;const n=(null==(t=this.sn())||null==(t=t.segments)||null==(t=t[0])?void 0:t.start)??0;return Math.max(n,0)}},{key:"ended",get:function(){return this.Ae}},{key:"isLowerProfileAvailable",get:function(){return this.me?this.me.video.activeStreamIndex>0:null}},{key:"sorcerer",get:function(){return this.me}},{key:"segmentLength",get:function(){var t,n;return this.lowLatencyMode&&(null==(t=this.Te)||null==(t=t.activeStream("video"))?void 0:t.partTargetDuration)||(null==(n=this.Te)||null==(n=n.activeStream("video"))?void 0:n.targetDuration)}}],[{key:"displayName",get:function(){return"HLSLiveScanner"}},{key:"supportedVideoTypes",get:function(){return["application/x-mpegURL"]}}])}(ss);function lc(t){return t.forEach(((t,n)=>{t.index=n})),t}const dc=document.createElement("video"),vc={"application/x-mpegURL":"application/x-mpegURL"};let pc=function(t){function n(n,i={}){var e;return(e=t.call(this,n,i)||this).Er=null,e.he=!1,e.de=!0,e.ve=!1,e.yr=0,e.mr=!1,e.reset(),e.dvrEnabled=i.dvrEnabled??!1,e.getLiveEventStartTimeEpoch=i.getLiveEventStartTimeEpoch,window.addEventListener("online",(()=>{e.play()})),e}E(n,t),n.supported=function(){return n.supportedVideoTypes.length>0};var i=n.prototype;return i.deactivate=function(){t.prototype.deactivate.call(this),this.reset()},i.reset=function(){this.Tr&&clearTimeout(this.Tr),this.kn=null,this.Tr=null,this.ge=!1,this.Ae=!1,this.br=null,this.wr=0,this.Tr=null,this.yr=0,this.mr=!1,this.Oe=new Wu(this,this.ht),this.Bn=[]},i.endLive=function(){this.ge=!1,this.Ae=!0,clearTimeout(this.Tr),this.ot.pause(),function(t){setTimeout(t,0)}((()=>{t.prototype.deactivate.call(this),this.fire(he.ENDED)}))},i.gr=function(){const t=xi(this.video.metadata.playlistRefreshUrl.split("?")[1]);t.expires&&(this.Tr=setTimeout((()=>{this.Ar()}),1e3*(t.expires-10)))},i.Ar=function(t=0){const n=this.video.metadata.playlistRefreshUrl;return We(n).json().then((i=>{if(!("url"in i))throw new Error(`Error parsing 'url' key from player live API refresh endpoint: ${n} ${i}`);return this.Sr(i.url.hls).then((()=>(this.play(),this._r(5e3),null))).catch((()=>this.Ar(++t)))})).catch((()=>{if(t>=3)throw new Error(`Manifest failed to load after ${t} attempts.`);return++t,this.Ar(t)}))},i.Rr=function(){this.on(pe.STREAM_OFFLINE,(()=>{this.ge=!1}))},i.Or=function(t){return this.Rr(),this.ge=!0,this.fire(pe.STREAM_ONLINE),this._r(5e3),r.resolve(t)},i.Sr=function(t){return this.Er=t,/json=1/.test(t)?We(t).json().then((t=>{if(!("url"in t))throw new Error(`Error parsing 'url' key from Live API manifest endpoint: ${this.Er} ${t}`);this.ot.src=this.Ir(t.url),this.gr()})).catch((t=>{const n=this.video.metadata.playlistRefreshUrl;return We(n).json().then((t=>{if(!("url"in t))throw new Error(`Error parsing 'url' key from player live API refresh endpoint: ${n} ${t}`);this.Er=t.url.ios,this.ot.src=this.Ir(t.url.ios),this.gr()}))})):(this.ot.src=this.Ir(t),this.gr(),r.resolve())},i.Ir=function(t){if(this.dvrEnabled)return t;const n=new URL(t);return n.searchParams.set("min_seconds","30"),n.toString()},i.Nr=function(){const t=this.ot.textTracks;if(null!=t&&t.length)for(let n=0;n<t.length;n++){const i=t[n];this.Ue(i)}},i.Ue=function(t){if(t&&!this.Qe){const{label:n,kind:i,language:e,id:r}=t,s=new TelecineTextTrack({label:n,kind:i,language:e,id:r},this.ft);this.ft.textTracks=Lr([s]),this.Rt(s,t),this.fire(ve.TEXT_TRACKS_AVAILABLE),this.Qe=t}},i.setModeForTrack=function(t,n){return this.Qe&&this.Qe.mode!==n&&(this.Qe.mode=n),this},i.getActiveCuesForTrack=function(t){return this.Qe&&"disabled"!==this.Qe.mode?this.Qe.activeCues:[]},i.addTextTrack=function(t){return this.Qe||this.Nr(),this.Qe},i._r=function(t){"number"==typeof Dr.iOS&&Dr.iOS<9||this.br||(this.br=setTimeout((()=>{if(!this.ge)return;const t=new XMLHttpRequest;t.onload=()=>{410!==t.status?(200!==t.status&&this.fire(pe.STREAM_OFFLINE),t.response.match(/^#EXTM3U\n#EXT-X-VERSION:3\n$/)&&this.fire(pe.STREAM_OFFLINE)):this.Ar()},t.onerror=()=>{this.fire(pe.STREAM_OFFLINE)},/json=1/.test(this.Er)?We(this.Er).json().then((n=>{"url"in n||this.fire(pe.STREAM_OFFLINE),t.open("GET",n.url),t.send()})).catch((()=>{t.open("GET",this.Er),t.send()})):(t.open("GET",this.Er),t.send())}),t))},i.hr=function(t){return t>=this.liveEdgeTime-3},i.lr=function(t){return t>=this.liveEdgeTime-6},i.ar=function(t){return t<=this.liveTailTime+6},i.setVideoSrc=function(t){this.kn=this.Or(t).then((()=>(this.Er=t,this.Sr(t))))},i.ontimeupdate=function(){t.prototype.ontimeupdate.call(this),this.atLiveTail=this.ar(this.ot.currentTime),this.hr(this.ot.currentTime)?this.atLiveEdge=!0:(this.ot.playbackRate<1||this.lr())&&(this.atLiveEdge=!1)},i.onplaying=function(){this.he=!0},i.oncanplay=function(){if(!this.he){const t=this.ot.seekable.length;t>0&&(this.ot.currentTime=this.ot.seekable.end(t-1))}if(!this.mr){this.mr=!0;const t=this.ot.getStartDate().getTime()/1e3;this.yr=t-this.getLiveEventStartTimeEpoch()}this.Nr()},i.onprogress=function(){this.br&&(clearTimeout(this.br),this.br=null)},i.onstalled=function(){this._r(1e4)},i.onerror=function(){return this.ot.error.code===this.ot.error.MEDIA_ERR_SRC_NOT_SUPPORTED?(We(this.Er).then((()=>{t.prototype.onerror.call(this)})).catch((n=>{n instanceof Ne?this.fire(he.ERROR,new TelecineError("MediaNetworkError","A network error ocurred while fetching the media.")):t.prototype.onerror.call(this)})),!1):t.prototype.onerror.call(this)},i.onwaiting=function(){this._r(1e4)},i.pause=function(){this.dvrEnabled&&(this.atLiveEdge=!1),t.prototype.pause.call(this)},i.play=function(){return t.prototype.play.call(this,(()=>this.kn))},d(n,[{key:"currentTime",get:function(){return this.yr+this.ot.currentTime},set:function(t){if(this.liveEdgeTime){const n=t>=this.liveEdgeTime-3;this.atLiveEdge=n}this.ot.currentTime=t-this.yr}},{key:"liveEdgeTime",get:function(){const t=this.ot.seekable.length;return t>0?this.yr+this.ot.seekable.end(t-1):0}},{key:"atLiveEdge",get:function(){return this.de},set:function(t){this.dvrEnabled&&(this.de=t,this.ot.playbackRate>1&&t&&(this.ot.playbackRate=1))}},{key:"atLiveTail",get:function(){return this.ve},set:function(t){this.dvrEnabled&&(this.ve=t,this.ot.playbackRate<1&&t&&(this.ot.playbackRate=1))}},{key:"liveTailTime",get:function(){return this.ot.seekable.length>0?this.yr+this.ot.seekable.start(0):0}},{key:"ended",get:function(){return this.Ae}},{key:"supportsPlaybackRate",get:function(){return t.prototype.supportsPlaybackRate&&this.dvrEnabled}}],[{key:"displayName",get:function(){return"NativeHLSLiveScanner"}},{key:"supportedVideoTypes",get:function(){const t=[];if("function"!=typeof dc.canPlayType)return t;for(const n in vc){const i=vc[n];dc.canPlayType(i).replace(/^no$/,"")&&t.push(n)}return t}}])}(ss),Ec=function(){function t(t,n={}){this.kr=t,this.ct=t.ct,this.ht=n}var n=t.prototype;return n.activate=function(){throw new TelecineError("NotImplemented","The effect must implement the activate method.")},n.deactivate=function(){throw new TelecineError("NotImplemented","The effect must implement the deactivate method.")},d(t,null,[{key:"displayName",get:function(){return"Effect"}},{key:"supported",get:function(){return!1}},{key:"supportedScanners",get:function(){return[]}}])}();const yc=new yi,mc=new yi;let TelecineFile=function(){return d((function({src:t,mime:n,id:i=$i(),priority:e=0,metadata:r={}},s){if(!t)throw new TypeError("Must provide a src for the file.");if(!n)throw new TypeError("Must provide a mime type for the file.");Object.defineProperties(this,{mime:{value:n,enumerable:!0},id:{value:`${i}`,enumerable:!0},metadata:{value:r,enumerable:!0}}),this.video=s,this.priority=e,this.src=t}),[{key:"priority",get:function(){return yc.get(this)},set:function(t){if(!("number"==typeof(t=parseInt(t,10))&&isFinite(t)&&Math.floor(t)===t&&t>=0))throw new TypeError("The file priority must be an integer greater than or equal to 0.");yc.set(this,t)}},{key:"src",get:function(){return mc.get(this)},set:function(t){mc.set(this,t),this.video.fire(ve.FILE_SRC_UPDATE,this)}},{key:"restrictedStreamIndexes",get:function(){if(!Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this.video.currentScanner),"restrictedStreamIndexes"))throw new ReferenceError("The current scanner does not support streams.");return this.video.currentScanner.restrictedStreamIndexes},set:function(t){if(!Array.isArray(t))throw new TypeError("Indexes must be an array.");if(!Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this.video.currentScanner),"restrictedStreamIndexes"))throw new ReferenceError("The current scanner does not support streams.");this.video.currentScanner.restrictedStreamIndexes=t}}])}(),Tc=function(t){function n({enabled:n=!1,id:i=$i(),kind:e="",label:r="",language:s="",provenance:o=""},u){var c;return(c=t.call(this)||this).Mr=n,Object.defineProperties(c,{kind:{value:e,enumerable:!0},label:{value:r,enumerable:!0},language:{value:s,enumerable:!0},id:{value:`${i}`,enumerable:!0},provenance:{value:o,enumerable:!0}}),c.video=u,c}return E(n,t),n.prototype.dispatchEvent=function(t){this.fire(t,{target:this})},d(n,[{key:"enabled",get:function(){return this.Mr},set:function(t){this.Mr=t}},{key:"active",get:function(){return this.Mr}}])}(bi);const bc="default";let wc=function(){function t(){this.Dr={},this.Xr={},this.Pr={},this.Cr={},this.jr={},this.Lr={},this.Ur=bc,this.Fr={KEYCHAIN_DEFAULT:bc,KEYCHAIN_SD_FALLBACK:"sd-fallback"}}var n=t.prototype;return n.getAllKeySessions=function(){return Object.values(this.Lr)||[]},n.getCdms=function(t){return this.Dr[t]},n.getAllPreferredKeySystems=function(){return this.Xr},n.addCdms=function(t,n){this.Dr[n]=t},n.addKeySession=function(t,n){this.Lr[n]=t},n.addLicenseTokenUrl=function(t,n){this.Pr[n]=t},n.addLicenseUrl=function(t,n){this.Cr[n]=t},n.addPreferredKeySystem=function(t,n){this.Xr[n]=t},n.closeAllKeySessions=function(){for(let t in this.Lr)this.Lr[t]&&this.Lr[t].sessionId&&this.Lr[t].close()},d(t,[{key:"state",get:function(){return this.Ur},set:function(t){Object.values(this.Fr).indexOf(t)<0||(this.Ur=t)}},{key:"activeKeySession",get:function(){return this.Lr[this.Ur]}},{key:"activeKeySystem",get:function(){return this.Xr[this.Ur]}},{key:"keyTypes",get:function(){return this.Fr}},{key:"activeLicenseTokenUrl",get:function(){return this.Pr[this.Ur]}},{key:"activeLicenseUrl",get:function(){return this.Cr[this.Ur]}}])}();function gc(t,n,i){return i?n?n(t):t:(t&&t.then||(t=r.resolve(t)),n?t.then(n):t)}let Ac=function(){function t(t,n,i={}){this.$r=!!t.fallback_asset,this.Hr=n,this.Br=i,this.Vr=()=>null,this.zi=0,this.Gr=!0,this.Yr=null,this.Kr=this.Wr.bind(this),this.qr=this.zr.bind(this),this.Qr=new wc,this.Fr=this.Qr.keyTypes,this.Qr.state=this.Fr.KEYCHAIN_DEFAULT,this.Qr.addCdms(t.cdms,this.Fr.KEYCHAIN_DEFAULT),this.$r&&this.Qr.addCdms(t.fallback_cdms,this.Fr.KEYCHAIN_SD_FALLBACK)}var n=t.prototype;return n.init=function(t,n={},i={}){try{const e=this;if(e.ot=t.ot,e.fn=t,e.Jr=!!window.MSMediaKeys,!(window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration||window.WebKitMediaKeys||e.Jr))return e.fn.fire(ve.EME_UNSUPPORTED),r.reject();if(i=e.Zr(i),e.Qr.state===e.Fr.KEYCHAIN_SD_FALLBACK)return gc(e.setUpKeySystem(n,i,e.Fr.KEYCHAIN_SD_FALLBACK).then((()=>{e.fn.currentTime=e.zi,e.fn.play()})));const s=e.Qr.getCdms(e.Fr.KEYCHAIN_DEFAULT);return s?gc(Fu(s,e.Hr,e.Jr,n),(function(t){let r=!1;const{keySystem:s}=t.find((t=>t.keySystem))??{};return function(t,n){var i=function(){if(e.$r){const t=null==s?void 0:s.getStatusForPolicy;return gc(t?s.getStatusForPolicy({minHdcpVersion:"1.0"}):"usable",(function(t){if("output-restricted"===t){const t=e.ns();return r=!0,t}}),!t)}}();return i&&i.then?i.then(n):n(i)}(0,(function(t){return r?t:e.setUpKeySystem(n,i).then((()=>e.setUpKeySystem(n,i,e.Fr.KEYCHAIN_SD_FALLBACK)))}))})):r.reject()}catch(t){return r.reject(t)}},n.Zr=function(t={}){if(void 0===t||void 0===t.inits)return t;for(var n=0,i=Object.entries(t.inits);n<i.length;n++){const[s,o]=i[n];for(var e=0,r=Object.entries(o);e<r.length;e++){const[n,i]=r[e];if(void 0===i||void 0===i.initData)return t;i.initData=Ur(i.initData)}}return t},n.setUpKeySystem=function(t,n,i=this.Fr.KEYCHAIN_DEFAULT){return new r(((e,r)=>{const s=this.Qr.getCdms(i);return s||r(),Fu(s,this.Hr,this.Jr,t).then((t=>{this.Qr.addPreferredKeySystem(t.find((t=>t.keySystem)),i);const e=this.Qr.activeKeySystem&&function(t,n){let i=null;return Object.keys(t).forEach((e=>{n.name===t[e].id&&(i=t[e])})),i}(s,this.Qr.activeKeySystem);if(!e)throw this.fn.fire(ve.EME_UNSUPPORTED),new Error("No valid key system was found.");this.Qr.addLicenseTokenUrl(e.license_url,i);const r=n&&n.inits&&n.inits[e.id];return r||this.es(e,i),this.rs(i).then((()=>{const t=this.Qr.state===i;return r&&t&&this.Wr(r.cenc,i)}))})).then(e)}))},n.destroy=function(){this.Qr&&this.Qr.closeAllKeySessions(),this.ot&&this.ot.removeEventListener(this.Yr,this.Kr)},n.ss=function(t){return new r((n=>{var i;this.Qr.state=t,null==(i=this.Qr.activeKeySession)||i.addEventListener("message",(t=>this.us(t))),n()}))},n.es=function(t,n){this.Yr="encrypted",this.Qr.addLicenseUrl(t.license_url,n),this.Hr?(this.cs=t.certificate_url,this.Yr="webkitneedkey"):this.Jr&&(this.Yr="msneedkey"),this.ot.addEventListener(this.Yr,this.Kr)},n.rs=function(t){return new r((n=>{if(this.Jr){const t=()=>{this.ot.msSetMediaKeys(this.Qr.activeKeySystem.keySystem),this.ot.removeEventListener("loadedmetadata",t),n()};this.ot.readyState>=1?t():this.ot.addEventListener("loadedmetadata",t)}else{if(this.Hr)this.ot.webkitSetMediaKeys(this.Qr.activeKeySystem.keySystem);else{const n=this.ot.mediaKeys||this.Qr.activeKeySystem.keySystem;this.Qr.addKeySession(this.hs(n),t),t===this.Qr.state&&this.Qr.activeKeySession.addEventListener("message",(t=>this.us(t))),this.ot.mediaKeys||this.ot.setMediaKeys(this.Qr.activeKeySystem.keySystem)}n()}}))},n.hs=function(t,n,i){const e=t.createSession(n,i);if(!e)throw new Error("Could not create key session");return e},n.Wr=function(t,n){n=n||this.Qr.state;const i=new Error("A decryption key error was encountered");return"com.apple.fps.1_0"===this.Qr.activeKeySystem.name?(this.fs(this.cs).then((e=>{this.ls=function(t){var n=function(t){const n=new Uint16Array(t.buffer);return String.fromCharCode.apply(null,n)}(t),i=document.createElement("a");return i.href=n,i.hostname}(t.initData);const r=function(t,n,i){"string"==typeof n&&(n=function(t){const n=new ArrayBuffer(2*t.length),i=new Uint16Array(n);for(let n=0,e=t.length;n<e;n++)i[n]=t.charCodeAt(n);return i}(n));let e=0;const r=new ArrayBuffer(t.byteLength+4+n.byteLength+4+i.byteLength),s=new DataView(r);new Uint8Array(r,e,t.byteLength).set(t),e+=t.byteLength,s.setUint32(e,n.byteLength,!0),e+=4;const o=new Uint8Array(r,e,n.byteLength);return o.set(n),e+=o.byteLength,s.setUint32(e,i.byteLength,!0),e+=4,new Uint8Array(r,e,i.byteLength).set(i),new Uint8Array(r,0,r.byteLength)}(t.initData,this.ls,e);return this.Qr.addKeySession(this.hs(this.Qr.activeKeySystem.keySystem,"video/mp4",r),n),this.Qr.activeKeySession.contentId=this.ls,this.Qr.activeKeySession.addEventListener("webkitkeymessage",(t=>this.us(t))),this.Qr.activeKeySession.addEventListener("webkitkeyerror",(t=>{throw i})),e})).catch((t=>{this.fn.fire(t.error,t.payload)})),!0):"com.microsoft.playready"===this.Qr.activeKeySystem.name?(this.Qr.addKeySession(this.hs(this.ot.msKeys,"video/mp4",t.initData),n),this.Qr.activeKeySession.addEventListener("mskeymessage",(t=>this.us(t))),this.Qr.activeKeySession.addEventListener("mskeyerror",(t=>{throw i})),!0):!this.Qr.activeKeySession.sessionId&&!this.ds&&(this.Qr.activeKeySession.addEventListener("keystatuseschange",this.qr),this.ds=this.Qr.activeKeySession.generateRequest(t.initDataType,t.initData).catch((()=>{this.fn.fire(ve.DRM_FAILURE)})),!0)},n.zr=function(){let t=!1;const n=we(this.Qr.activeKeySession.keyStatuses.values());if(n.forEach(((n,i)=>{"expired"===n&&(t=!0)})),n.length&&n.every((t=>"output-restricted"===t))){if(this.$r)return void this.ns();this.fn.fire(ve.DRM_OUTPUT_RESTRICTED)}t&&this.Qr.activeKeySession.close()},n.us=function(t){return this.vs(this.Qr.activeLicenseTokenUrl).then((n=>new r(((i,e)=>{this.Qr.addLicenseUrl(n,this.Qr.state),this.ds=null;const r=new XMLHttpRequest;r.keySession=t.target,r.open("POST",this.Qr.activeLicenseUrl),r.responseType="arraybuffer";let s=t.message;if("com.microsoft.playready"===this.Qr.activeKeySystem.name){const n=function(t,n=!0){const i=n?t.buffer:t,e=String.fromCharCode.apply(null,new Uint16Array(i)),r=(new DOMParser).parseFromString(e,"application/xml"),s={},o=r.getElementsByTagName("HttpHeader");for(let t=0;t<o.length;++t){const n=o[t].querySelector("name"),i=o[t].querySelector("value");s[n.textContent]=i.textContent}return[s,t=Ur(r.querySelector("Challenge").textContent)]}(t.message),i=n[0];Object.keys(i).forEach((t=>{r.setRequestHeader(t,i[t])})),s=n[1]}"com.apple.fps.1_0"===this.Qr.activeKeySystem.name&&(s=new Uint8Array(s),r.setRequestHeader("Content-type","application/octet-stream")),r.onload=()=>{if(403!==r.status)if(r.status>=400)e(new TelecineError(ve.DRM_FAILURE));else try{this.fn.fire(ve.DRM_AUTH_SUCCESS);const t=new Uint8Array(r.response);r.keySession.update(t),i()}catch(t){e(new TelecineError(ve.DRM_FAILURE,`Error updating key session: ${t}`))}else e(new TelecineError(ve.DRM_AUTH_FAILURE))},r.onerror=e,r.send(s)})).catch((t=>{this.fn.fire(t.name,{text:t.message||"License request failed."})}))))},n.vs=function(t){const n=((t,n)=>{const i=new URL(t),e=i.searchParams,{atid:r,dnt:s,context:o,leadUUID:u,playerLocation:c,firstLog:a,playbackRoute:h}=n;return r&&e.set("atid",r),o&&e.set("context",o),1===s&&e.set("dnt","1"),a&&e.set("first_log","1"),u&&e.set("lead_uuid",u),c&&e.set("player_location",c),e.set("playback_route",h),i.toString()})(t,T(T({},this.Br),{},{firstLog:this.Gr}));return new r(((t,i)=>{const e=new XMLHttpRequest;e.withCredentials=!0,e.open("GET",n),e.onload=()=>{if(e.status>=400)i(new TelecineError(ve.DRM_FAILURE));else try{try{const n=JSON.parse(e.response),{licenseAcquisitionUrl:i,token:r}=n;if(!i&&!r)throw new Error;t(`${i}?ExpressPlayToken=${r}`)}catch(n){t(e.response)}}catch(t){i(new TelecineError(ve.DRM_FAILURE,`Error retrieving License Acquisition URL (LA_URL): ${t}`))}},e.onerror=i,e.send(),this.Gr=!1}))},n.fs=function(t){return new r(((n,i)=>{const e=new XMLHttpRequest;e.open("GET",t),e.responseType="arraybuffer",e.setRequestHeader("Pragma","Cache-Control: no-cache"),e.setRequestHeader("Cache-Control","max-age=0"),e.onload=()=>{if(403!==e.status)if(e.status>=400)i({error:ve.DRM_FAILURE});else try{n(new Uint8Array(e.response))}catch(t){i(t)}else i({error:ve.DRM_AUTH_FAILURE})},e.onerror=i,e.send()}))},n.ns=function(){this.zi=this.fn.currentTime,this.ss(this.Fr.KEYCHAIN_SD_FALLBACK).then((()=>{this.Vr(),this.fn.fire(ve.DRM_KEY_SWITCH,this.Fr.KEYCHAIN_SD_FALLBACK)})).catch((t=>{this.fn.fire(ve.DRM_OUTPUT_RESTRICTED)}))},n.setFallbackCallback=function(t){this.Vr=()=>t()},d(t,[{key:"state",get:function(){return this.Qr.state}},{key:"hasFallbackAssets",get:function(){return this.$r}}])}();const Sc=(()=>{const t=navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)\.([0-9]+)\./);return!!t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}})(),_c=document.createElement("video"),Rc=((()=>{if(Dr.android&&Sc&&"object"==typeof Sc&&Sc.major<52)return!1;const t=_c.playbackRate;_c.playbackRate=.5*t;_c.playbackRate;_c.playbackRate=t})(),(()=>{if(Dr.android||Dr.iOS||Dr.iPadOS)return!1;const t=_c.volume;_c.volume=.5*t,_c.volume})(),void 0!==_c.textTracks&&"undefined"!=typeof TextTrackList&&_c.textTracks instanceof TextTrackList),Oc=new yi;let TelecineVideo=function(t){function TelecineVideo({files:n,id:i=$i(),title:e=null,subtitle:r=null,metadata:s={},textTracks:o=Lr(),audioTracks:u=Lr(),externalDisplayFiles:c={},chapters:a=[],duration:h}){var f;if(f=t.call(this)||this,!n||!Array.isArray(n))throw new TypeError("Must provide files for the video.");const l=function(t=[]){return t.getFileById=jr,t}(n.map((t=>t instanceof TelecineFile?(t.video=f,t):new TelecineFile(t,f)))),d=Lr(o.map((t=>t instanceof TelecineTextTrack?(t.video=f,t):new TelecineTextTrack(t,f))));if(f.ps=u,Object.keys(c).forEach((t=>{!c[t]||c[t]instanceof TelecineFile||(c[t]=new TelecineFile(c[t],f))})),Object.defineProperties(f,{id:{value:`${i}`,enumerable:!0},title:{value:e,enumerable:!0},subtitle:{value:r,enumerable:!0},metadata:{value:s,enumerable:!0},files:{value:l,enumerable:!0},textTracks:{value:d,enumerable:!0,writable:!0},chapters:{value:a,enumerable:!0},duration:{value:h,enumerable:!0},externalDisplayFiles:{value:c,enumerable:!0}}),s.drm){const{drm:t,useHls:n,drmLaUrlParams:i}=s;f.Es=new Ac(t,n,i)}return f}return E(TelecineVideo,t),TelecineVideo.prototype.deactivate=function(){this.Es&&this.Es.destroy(),this.textTracks.forEach((t=>this.currentScanner.removeTextTrack(t)))},d(TelecineVideo,[{key:"drmHandler",get:function(){return this.Es||null}},{key:"currentFile",get:function(){return this.currentScanner.currentFile},set:function(t){this.currentScanner.currentFile=t}},{key:"currentScanner",get:function(){return Oc.get(this)},set:function(t){this.currentScanner&&Rc&&this.textTracks.forEach((t=>this.currentScanner.removeTextTrack(t))),Rc&&this.textTracks.forEach((n=>t.addTextTrack(n))),Oc.set(this,t)}},{key:"chapters",get:function(){return this.chapters}},{key:"audioTracks",get:function(){return Lr((this.currentScanner.constructor.supportsVideoElementAudioTracks?we(this.currentScanner.audioTracks):this.ps).map((t=>t instanceof Tc?(t.video=this,t):new Tc(t,this))))}},{key:"enabledAudioTrack",get:function(){return this.audioTracks.find((t=>!!t.enabled))}}])}(bi),Ic=function(t){function n(n,i={}){var e;return(e=t.call(this)||this).kr=n,e.ht=i,e.ys=null,e.Ts=e.ht.embedTime?e.ht.embedTime:0,e.bs=!1,e.ws=!1,e.As=!1,e.playInitiated=!1,e.Ss=!1,e._s=250,e.Rs=e.Os.bind(e),e.Is=e.Ns.bind(e),e.ks=e.Ms.bind(e),e.Ds=e.Xs.bind(e),e.Ps=e.Cs.bind(e),e.Ls=e.Us.bind(e),e.xs(e.kr.on),e.ht.noInterval||e.Fs(),e}E(n,t);var i=n.prototype;return i.destroy=function(){clearInterval(this.ys),this.xs(this.kr.off),this.Os()},i.xs=function(t){t(he.PAUSE,this.Is),t(he.PLAYING,this.Rs),t(he.SEEKING,this.ks),t(he.SEEKED,this.Ds),t(pe.STREAM_ONLINE,this.Ps),t(pe.STREAM_OFFLINE,this.Ls)},i.Ns=function(){this.userPlayState=!1},i.Os=function(){this.bs&&(this.bs=!1,this.fire(ve.BUFFER_ENDED))},i.Ms=function(){this.ws=!0},i.Xs=function(){this.ws=!1},i.Cs=function(){this.Ss=!0},i.Us=function(){this.Ss=!1},i.Fs=function(){clearInterval(this.ys),this.ys=setInterval(this.runIntervalCheck.bind(this),this._s)},i.runIntervalCheck=function(){if(!this.kr.video)return;const t=this.kr.video.currentScanner;if(!t)return;const n=this.kr.isLive(),i=t.currentTime,e=this._s/2/1e3;if(this.playInitiated&&(!this.ws||n)&&(!this.kr.paused||this.userPlayState)&&!this.bs&&i<this.Ts+e){if(n&&!this.Ss)return;const t=this.kr.buffered;for(let n=0;n<t.length;n++)if(i>=t.start(n)&&i+.2<=t.end(n))return void(this.Ts=i);if(i+e>=this.kr.duration)return;this.bs=!0,this.fire(ve.BUFFER_STARTED)}(this.playInitiated&&this.bs&&i>this.Ts+e||n&&!this.Ss&&this.bs)&&(this.bs=!1,this.fire(ve.BUFFER_ENDED)),this.Ts=i},d(n,[{key:"userPlayState",get:function(){return this.As},set:function(t){this.As=t,t||this.Os()}}])}(bi);function Nc(){let t,n;function i(){if(!n)return r.reject();t.preload="";let i=t.play();return void 0===i&&(i=new r((n=>{t.addEventListener("playing",n)}))),i}function e(){n&&(n.resolve(),n=null)}function s(t){n&&(n.reject(t),n=null)}return{set video(n){t=n},get video(){return t},get active(){return!!n},start:function(o=r.resolve.bind(r)){return n||(n=Xi()),t.currentSrc?document.createElement("video").load():t.load(),o().then(i).then(e).catch(s),n},cancel:function(){n&&(n.reject(new TelecineError("PlayInterrupted","The play() request was interrupted by a call to pause()")),n=null)}}}let kc=function(t){function n(n,i,e={}){var r;return(r=t.call(this)||this).ct=n,r.$s=i,r.ht=e,r.ot=null,r._t=Lr(),r.Hs={},r.Bs=new ss(n),r.ht.playRequest=new Nc,r.Vs=[],r.Gs=[],r.Ys=null,r.At=!1,r.Ks=!1,r}E(n,t);var i=n.prototype;return i.supportsEffect=function(t){return!!t.supported&&t.supportedScanners.some((t=>this.Ws(this.Bs)===t.displayName))},i.getEffectByName=function(t){let n=null;return this.Gs.forEach((i=>{t===this.qs(i)&&(n=i)})),n},i.activateEffect=function(t,n){const i=new t(this,n);return i.activate(),this.Gs.push(i),i},i.deactivateEffect=function(t){return this.Gs.some(((n,i)=>n.constructor===t&&(n.deactivate(),this.Gs.splice(i,1),!0)))},i.deactivateEffects=function(){this.Gs.forEach((t=>this.deactivateEffect(t.constructor)))},i.play=function(){if(!this.ot||this.ot.files.length<1)throw new TelecineError("NoFiles","There are no files to play.");this.zs.playInitiated||(this.zs.playInitiated=!0),this.zs.userPlayState=!0;const t=this.Bs.play();return this.Hs.paused=!1,t},i.pause=function(){if(!this.ot||this.ot.files.length<1)throw new TelecineError("NoFiles","There are no files to play.");return this.zs.userPlayState=!1,this.Bs.pause(),this.Hs.paused=!0,this},i.isLive=function(){return this.currentScannerName.includes("Live")},i.endLive=function(){this.Bs.endLive()},i.getBitrateAtTime=function(t,n="video",i="average"){var e,r;return"MediaSourceScanner"!==this.Ws(this.Bs)&&"HLSLiveScanner"!==this.Ws(this.Bs)||"audio"===n&&this.Bs.zt[n].length<=1?0:(null==(e=(r=this.Bs).getBitrateAtTime)?void 0:e.call(r,t,n,i))||0},i.getCurrentStream=function(t="video"){var n,i;return null==(n=(i=this.Bs).getCurrentStream)?void 0:n.call(i,t)},i.showExternalDisplayPicker=function(t){this.Bs.showExternalDisplayPicker(t)},i.requestPictureInPicture=function(){return this.Bs.requestPictureInPicture()},i.exitPictureInPicture=function(){return this.Bs.exitPictureInPicture()},i.addChapter=function(t,n){this.Bs.addChapter(t,n)},i.removeChapter=function(t){this.Bs.removeChapter(t)},i.addCuePoint=function(t,n){return this.Bs.addCuePoint(t,n)},i.removeCuePoint=function(t){return this.Bs.removeCuePoint(t)},i.removeAllCuePoints=function(){return this.Bs.removeAllCuePoints()},i.enableAudioTrack=function(t){return this.Bs.enableAudioTrack(t)},i.addVideoEventListeners=function(){return this.Bs.addVideoEventListeners()},i.removeVideoEventListeners=function(){return this.Bs.removeVideoEventListeners()},i.Qs=function({textTrackSupport:t=!1}={}){if(t&&!Rc)return null;const n=this.ot.files.sort(((t,n)=>t.priority-n.priority)),i=this.$s;for(const t in n){let e=n[t];for(const t in i){let n=i[t];if(n.supported(this.ht.disableMMS)&&-1===this.Vs.indexOf(this.Ws(n))&&n.supportedVideoTypes.some((t=>e.mime===t)))return n}}return null},i.reactivate=function(){var t;null!=(t=this.Bs)&&t.reactivate&&this.Bs.reactivate(),this.play()},i.checkRebuffer=function(t,n){this.zs&&(this.zs.playInitiated=t,this.zs.userPlayState=n,this.zs.runIntervalCheck())},i.Js=function(t,n){if(this.Bs.constructor===t&&this.Bs.video===n)return;const i=!this.isLive()&&this.Bs.wn;this.At?(this.Ys=this.Bs,this.Ys.At=!0,this.Ks||(this.Ys.takeSnapshot(),this.Ks=!0),this.Ys.deactivate()):this.Bs.deactivate();const e=new t(this.ct,this.ht);Object.keys(me).forEach((t=>{const n=me[t];e.on(n,(t=>this.Zs(n,t,e)))})),this.Bs=e,n.currentScanner=e,this.Bs.video=n;const r=Object.keys(this.Hs);for(let t=0;t<r.length;t++){const n=r[t];"paused"!==n?("currentTime"!==n||i)&&(this.Bs[n]=this.Hs[n]):!1===this.Hs.paused&&this.Bs.play()}this.Bs.addChapters(n.chapters,n.duration),this.fire(ve.SCANNER_CHANGE,this.Ws(this.Bs)),this.Bs.on(["canplay","playing"],(()=>{this.Ys&&(this.Ys.At=!1,this.Ys.removeSnapshot(),this.Ys=null,this.Ks=!1)}))},i.no=function(){if(null===this.ot)return;const t=this.Qs({textTrackSupport:this.ot.textTracks.length>0});t?this.Js(t,this.ot):this.Pt("FilesNotPlayable","None of the files could be played in this browser.")},i.io=function(){this.Bs.deactivate(),this.Bs=new ss(this.ct)},i.Zs=function(t,n,i){if(i===this.Bs){switch(t){case he.ERROR:return void(n instanceof TelecineError&&this.fire(he.ERROR,n));case ve.SCANNER_ERROR:this.Pt("ScannerError",`The current scanner can no longer be used because ${n.reason}`),this.Vs.push(this.Ws(this.Bs)),this.no([]);break;case ve.FILE_ERROR:this.Pt("FileError",`The current file can no longer be used because ${n.reason}`),this.Bs.Ct();break;case ve.DOWNLOAD_ERROR:this.Pt("DownloadError",n),this.Bs.Ct();break;case ve.EME_UNSUPPORTED:this.Pt(Wr,{text:null,code:"emeunsupported"});break;case ve.DRM_FAILURE:case ve.DRM_AUTH_FAILURE:this.Pt(Wr,{text:n.text,code:n.code});break;case ve.DRM_OUTPUT_RESTRICTED:this.Pt(Wr,{text:null,code:"outputrestricted"});break;case ve.DRM_AUTH_SUCCESS:this.fire(ve.DRM_AUTH_SUCCESS);break;case he.TIME_UPDATE:this.Hs.currentTime=this.Bs.currentTime;break;case ve.MEDIA_URL_EXPIRED:this.Pt("MediaUrlExpired",n);break;case ve.MEDIA_URL_BAD_REQUEST:this.Pt("MediaUrlBadRequest",n);break;case Ee.SPATIAL_UNSUPPORTED:this.getEffectByName("ThreeSixtyEffect").deactivate();break;case he.ENDED:const t=!this.ht.dvrEnabled||this.atLiveEdge;this.Hs.paused=t;break;case he.WAITING:this.fire(he.WAITING)}this.Gs.forEach((n=>{"function"==typeof n[`on${t}`]&&n[`on${t}`]()})),this.fire(t,n)}},i.Pt=function(t,n){this.fire(he.ERROR,new TelecineError(t,n))},i.Ws=function(t){return t instanceof ss?t.constructor.displayName:t.prototype.constructor.displayName},i.Fs=function(){this.zs&&this.zs.destroy(),this.zs=new Ic(this,this.ht),this.zs.on(ve.BUFFER_STARTED,(()=>{this.fire(ve.BUFFER_STARTED)})),this.zs.on(ve.BUFFER_ENDED,(()=>{this.fire(ve.BUFFER_ENDED)}))},i.qs=function(t){return t instanceof Ec?t.constructor.displayName:t.prototype.constructor.displayName},i.setCaptionsShouldDisplay=function(t){"HLSLiveScanner"===this.Ws(this.Bs)&&this.Bs.setCaptionsShouldDisplay(t)},i.setCaptionsShouldLoad=function(t){"HLSLiveScanner"===this.Ws(this.Bs)&&this.Bs.setCaptionsShouldLoad(t)},d(n,[{key:"element",get:function(){return this.ct}},{key:"videoElement",get:function(){return this.Bs.videoElement}},{key:"manifest",get:function(){return this.Bs.manifest||{video:[]}}},{key:"supportsVideoElementAudioTracks",get:function(){return this.Bs.constructor.supportsVideoElementAudioTracks}},{key:"activeEffects",get:function(){return this.Gs}},{key:"latency",get:function(){return this.Bs.latency}},{key:"downloadSpeed",get:function(){return this.Bs.downloadSpeed||0}},{key:"pictureInPictureActive",get:function(){return this.Bs.pictureInPictureActive}},{key:"pictureInPictureEnabled",get:function(){return this.Bs.pictureInPictureEnabled}},{key:"isLowerProfileAvailable",get:function(){return this.Bs.isLowerProfileAvailable}},{key:"buffered",get:function(){return this.Bs.buffered}},{key:"bufferTarget",get:function(){return this.Bs.bufferTarget},set:function(t){this.Hs.bufferTarget=t,this.Bs.bufferTarget=t}},{key:"presentationDelay",get:function(){return this.Bs.presentationDelay},set:function(t){this.Hs.presentationDelay=t,this.Bs.presentationDelay=t}},{key:"lowLatencyMode",get:function(){return this.Bs.lowLatencyMode},set:function(t){this.Hs.lowLatencyMode=t,this.Bs.lowLatencyMode=t}},{key:"manifestLoadDurations",get:function(){return this.Bs.manifestLoadDurations?this.Bs.manifestLoadDurations:[]}},{key:"successfulSegments",get:function(){return this.Bs.successfulSegments?this.Bs.successfulSegments:[]}},{key:"failedSegments",get:function(){return this.Bs.failedSegments?this.Bs.failedSegments:[]}},{key:"cuePoints",get:function(){return this.Bs.cuePoints}},{key:"currentChapterID",get:function(){if(this.Bs&&this.Bs.chaptersTrack&&this.Bs.chaptersTrack.activeCues.length){const{activeCues:t}=this.Bs.chaptersTrack;return t[t.length-1].id}return null}},{key:"chapters",get:function(){return this.Bs.chaptersTrack?this.Bs.chaptersTrack.cues:[]}},{key:"chaptersTrack",get:function(){return this.Bs.chaptersTrack}},{key:"currentFile",get:function(){return this.Bs.currentFile},set:function(t){if("string"==typeof t&&(t=this.Ut.filter((n=>n.id===t))[0]),!t)throw new TelecineError("FileNotValid","The file is not valid.");this.Bs.currentFile=t}},{key:"currentScannerName",get:function(){return this.Ws(this.Bs)}},{key:"currentScanner",get:function(){return this.Bs}},{key:"currentTime",get:function(){return this.Bs.currentTime},set:function(t){this.Hs.currentTime=t,this.Bs.currentTime=t}},{key:"liveEdgeTime",get:function(){const t=this.Bs.liveEdgeTime;return null==t?this.eo:(this.eo=t,t)}},{key:"atLiveEdge",get:function(){return this.Bs.atLiveEdge??this.isLive()}},{key:"liveTailTime",get:function(){const t=this.Bs.liveTailTime;return null==t?this.ro:(this.ro=t,t)}},{key:"atLiveTail",get:function(){return this.Bs.atLiveTail??!1}},{key:"duration",get:function(){return this.Bs.duration}},{key:"ended",get:function(){return this.Bs.ended}},{key:"externalDisplayAvailable",get:function(){return this.Bs.externalDisplayAvailable}},{key:"externalDisplayActive",get:function(){return this.Bs.externalDisplayActive}},{key:"loop",get:function(){return this.Bs.loop},set:function(t){this.Hs.loop=t,this.Bs.loop=t}},{key:"muted",get:function(){return this.Bs.muted},set:function(t){this.Hs.muted=!!t,this.Bs.muted=!!t}},{key:"playsinline",get:function(){return this.Bs.playsinline},set:function(t){this.Hs.playsinline=!!t,this.Bs.playsinline=!!t}},{key:"paused",get:function(){return this.Bs.paused}},{key:"played",get:function(){return this.Bs.played}},{key:"seekable",get:function(){return this.Bs.seekable}},{key:"seeking",get:function(){return this.Bs.seeking}},{key:"defaultPlaybackRate",get:function(){return this.Bs.defaultPlaybackRate},set:function(t){this.Hs.defaultPlaybackRate=t,this.Bs.defaultPlaybackRate=t}},{key:"playbackRate",get:function(){return this.Bs.playbackRate},set:function(t){this.Hs.playbackRate=t,this.Bs.playbackRate=t}},{key:"preload",get:function(){return this.Bs.preload},set:function(t){this.Hs.preload=t,this.Bs.preload=t}},{key:"autoPictureInPicture",get:function(){return this.Bs.autoPictureInPicture},set:function(t){this.Hs.autoPictureInPicture=!!t,this.Bs.autoPictureInPicture=!!t}},{key:"disablePictureInPicture",get:function(){return this.Bs.disablePictureInPicture},set:function(t){this.Hs.disablePictureInPicture=!!t,this.Bs.disablePictureInPicture=!!t}},{key:"video",get:function(){return this.ot},set:function(t){this.ot&&this.ot.deactivate(),this.Vs=[],this.Fs(),null===t?(this.ot=null,this.io()):(this.ot=new TelecineVideo(t),this.no())}},{key:"videoWidth",get:function(){return this.Bs.videoWidth}},{key:"videoHeight",get:function(){return this.Bs.videoHeight}},{key:"volume",get:function(){return this.Bs.volume},set:function(t){if(t<0||t>1)throw new TelecineError("IndexSizeError",`Failed to set the 'volume' property: The volume provided (${t}) is outside of the range [0, 1].`);this.Hs.volume=t,this.Bs.volume=t}},{key:"videoElementAudioTracks",get:function(){return this.Bs.audioTracks}},{key:"brainDebug",get:function(){return this.Bs.brainDebug}}])}(bi),Mc=function(t){function n(n,i={}){var e;return(e=t.call(this,n,i)||this).so=!1,e.ot=e.kr.Bs.ot,e}E(n,t);var i=n.prototype;return i.activate=function(){this.so=!0,this.oo=document.createElement("canvas"),this.oo.className="vp-canvas-effect",this.oo.style.cssText="\n            position: absolute;\n            top:0;\n            left:0;\n            bottom:0;\n            right:0;\n        ",this.uo=this.oo.getContext("2d",{alpha:!1}),this.ct.appendChild(this.oo),this.co()},i.deactivate=function(){this.oo&&this.ct.removeChild(this.oo),this.ao(),this.so=!1},i.co=function(){this.ho()},i.ho=function(){this.fo=window.requestAnimationFrame(this.lo.bind(this))},i.lo=function(){const t=this.ot,n=this.oo;n.width=t.clientWidth,n.height=t.clientHeight;const i=Math.floor(this.do()),e=Math.floor(this.vo()),r=Math.floor((t.clientWidth-i)/2),s=Math.floor((t.clientHeight-e)/2);this.uo.fillStyle="#000",this.uo.fillRect(0,0,n.width,n.height),this.uo.drawImage(t,r,s,i,e),this.ho()},i.po=function(){return this.ot.videoHeight/this.ot.videoWidth},i.do=function(){return Math.min(this.ot.clientHeight/this.po(),this.ot.clientWidth)},i.vo=function(){return Math.min(this.ot.clientWidth*this.po(),this.ot.clientHeight)},i.ao=function(){this.fo&&(window.cancelAnimationFrame(this.fo),this.fo=null)},d(n,null,[{key:"displayName",get:function(){return"CanvasEffect"}},{key:"supported",get:function(){return!0}},{key:"supportedScanners",get:function(){return[ss,Gu]}}])}(Ec),Dc=function(){return d((function(){}),null,[{key:"Equirect",get:function(){return"equirectangular"}}])}(),Xc=function(){return d((function(){}),null,[{key:"Mono",get:function(){return"mono"}},{key:"TopBottom",get:function(){return"top-bottom"}},{key:"LeftRight",get:function(){return"left-right"}}])}(),Pc=function(){function t(t,n,i){this.isStereo=n!==Xc.Mono,this.Eo=null,this.yo=null,t===Dc.Equirect?this.createEquirectProjection(i,n):this.createEquirectProjection(i,Xc.Mono)}var n=t.prototype;return n.createEquirectProjection=function(t,n){n!==Xc.Mono?(this.Eo=this.mo(t),this.yo=this.mo(t),this.Eo.layers.set(1),this.yo.layers.set(2),n===Xc.TopBottom&&(this.To(this.Eo.geometry,.5,.5),this.To(this.yo.geometry,.5,0)),n===Xc.LeftRight&&(this.To(this.Eo.geometry,.5,0,0),this.To(this.yo.geometry,.5,.5,0))):this.Eo=this.mo(t)},n.mo=function(n,i,e,r){const s=new THREE.SphereBufferGeometry(i||t.SPHERE_RADIUS,e||t.TESSELATION_WIDTH,r||t.TESSELATION_HEIGHT);s.scale(-1,1,1);const o=new THREE.MeshBasicMaterial({map:n});return new THREE.Mesh(s,o)},n.To=function(t,n,i,e=1){for(let r=0;r<t.attributes.uv.array.length;r+=2)t.attributes.uv.array[r+e]*=n,t.attributes.uv.array[r+e]+=i},d(t,[{key:"left",get:function(){return this.Eo}},{key:"right",get:function(){return this.yo}}],[{key:"TESSELATION_WIDTH",get:function(){return 120}},{key:"TESSELATION_HEIGHT",get:function(){return 80}},{key:"SPHERE_RADIUS",get:function(){return 500}}])}(),Cc=function(){function t(t){this.bo=t}var n=t.prototype;return n.hasVRHeadset=function(){return Dr.webvr?navigator.getVRDisplays().then((t=>t.length>0?(this.bo.vr.setDevice(t[0]),t[0]):null)):null},n.enter=function(){return this.bo.vr.getDevice()&&this.bo.vr.getDevice().requestPresent([{source:this.bo.domElement}])},n.exit=function(){return this.bo.vr.getDevice()&&this.bo.vr.getDevice().exitPresent()},d(t,[{key:"supported",get:function(){return Dr.webvr}},{key:"device",get:function(){return this.bo&&this.bo.vr.getDevice()?this.bo.vr.getDevice():null}},{key:"isPresenting",get:function(){return!(!this.bo||!this.bo.vr.getDevice())&&this.bo.vr.getDevice().isPresenting}}])}(),jc=function(t){function n(n,i={}){var e;return(e=t.call(this,n,i)||this).so=!1,e.wo=null,e.Ao=null,e.bo=null,e.isUserInteracting=!1,e.So=0,e._o=0,e._coordinates={lat:0,long:0},e.Ro={lat:0,long:0},e.Oo={lat:0,long:0},e.Io=e.cameraProps,e.No=0,e.ko=0,e.Mo=0,e.ot=e.kr.Bs.ot,e.Do=null,e.Xo={x:0,y:0},e.Po={lat:0,long:0},e.Co={videoFps:e.ht.fps,motionRenderSpeed:60},e.jo=1e3/e.Co.videoFps,e.Lo=[],e.Uo=!1,e.xo=!1,e.Fo=!1,e.$o={up:!1,down:!1,left:!1,right:!1},e}E(n,t),n.frustumSurfaceArea=function(t,n,i){const e=2*Pc.SPHERE_RADIUS*2*Math.sin(Math.PI/180*(t/2));return e*(e*n/i)/(4*Math.PI*Math.pow(Pc.SPHERE_RADIUS,2))};var i=n.prototype;return i.activate=function(){return new r((t=>{if(window.THREE)return void t();const n=document.createElement("script");n.src=this.ht.threeUrl,document.body.appendChild(n),n.onload=()=>{t()}})).then((()=>this.ni()))},i.ni=function(){this.so=!0,this.wo=new THREE.PerspectiveCamera(this.ht.fieldOfView,this.ot.clientWidth/this.ot.clientHeight,1,2*Pc.SPHERE_RADIUS),this.wo.target=new THREE.Vector3(0,0,0),this.wo.layers.enable(1),this.Ho(this.ht.directorTimeline),this.Ao=new THREE.Scene,this.Bo=new THREE.VideoTexture(this.ot),this.Bo.generateMipmaps=!1,this.Bo.minFilter=THREE.NearestFilter,this.Bo.maxFilter=THREE.NearestFilter,this.Bo.format=THREE.RGBFormat,this.Vo=new Pc(this.ht.projection,this.ht.stereoMode,this.Bo),this.Vo.isStereo&&this.Ao.add(this.Vo.right),this.Ao.add(this.Vo.left),this.bo=new THREE.WebGLRenderer,this.bo.vr.enabled=!0,this.bo.setPixelRatio(window.devicePixelRatio),this.Go=document.createElement("div"),this.bo.domElement.style.margin="0 auto",this.Go.appendChild(this.bo.domElement),this.ct.appendChild(this.Go),this.Yo(),this.kr.Bs.ot.setAttribute("crossorigin","anonymous"),this.co(),this.kr.Bs.paused||this.Ko(),this.Wo=new Cc(this.bo),this.Wo.supported&&this.Wo.hasVRHeadset().then((t=>{setTimeout((()=>{this.kr.fire(Ee.WEBVR_HARDWARE_AVAILABLE,this.Wo.device)}),100)})).catch((t=>{}))},i.toggleVR=function(){if(this.Wo.isPresenting)this.Wo.exit().then((()=>{this.adjustRenderSize()})).catch((t=>{}));else{if(this.kr.Bs.paused)return;this.Wo.enter().then((()=>{this.adjustRenderSize()})).catch((t=>{}))}},i.onplay=function(){this.so&&(this.Ko(),this.adjustRenderSize())},i.deactivate=function(){this.Go&&this.ct.removeChild(this.Go),this.ao(),this.so=!1},i.snapToCenter=function(){this.Lo.forEach((t=>clearTimeout(t)));const t=((this._coordinates.long>=180?360:0)-this._coordinates.long)/11,n=(0-this._coordinates.lat)/11;this.Mo=0;for(let i=0;i<50;i++)this.Lo.push(setTimeout((()=>{0===i&&(this.Uo=!0,this.ht.isMobile||(this.jo=1e3/this.Co.motionRenderSpeed)),49===i&&(this.Uo=!1,this.ht.isMobile||(this.jo=1e3/this.Co.videoFps)),this.qo(this._coordinates.lat+n/Math.pow(1.1,i),this._coordinates.long+t/Math.pow(1.1,i)),this.Po.lat=THREE.Math.radToDeg(this.Xo.x)+this._coordinates.lat+n/Math.pow(1.1,i),this.Po.long=THREE.Math.radToDeg(this.Xo.y)+this._coordinates.long+n/Math.pow(1.1,i)}),i*this.jo))},i.isStereo=function(){return!!this.Vo&&this.Vo.isStereo},i.Ho=function(t){t&&t[0]&&void 0!==t[0].p&&"undefined"!==t[0].y&&this.qo(t[0].p,t[0].y)},i.qo=function(t,n){this.Ro.long=this._coordinates.long,this.Ro.lat=this._coordinates.lat,t%=360,this._coordinates.lat=Math.max(-85,Math.min(85,t)),n=(n%=360)>=0?n:360+n,this._coordinates.long=n},i.makeContact=function(t){this.isUserInteracting=!0,this.Lo.forEach((t=>clearTimeout(t))),this.Uo=!1,this.zo={x:t.x,y:t.y},this.Oo.long=this._coordinates.long,this.Oo.lat=this._coordinates.lat,this.Qo={long:this._coordinates.long,lat:this._coordinates.lat},this.ht.isMobile||(this.jo=1e3/this.Co.motionRenderSpeed)},i.move=function(t){this.Po.lat=THREE.Math.radToDeg(this.Xo.x)+this.Ro.lat,this.Po.long=THREE.Math.radToDeg(this.Xo.y)+this.Ro.long;const n=this.Qo.lat-.2*(this.zo.y-t.y),i=.2*(this.zo.x-t.x)+this.Qo.long;this.qo(n,i)},i.moveWheel=function(t){this.Po.lat=THREE.Math.radToDeg(this.Xo.x)+this.Ro.lat,this.Po.long=THREE.Math.radToDeg(this.Xo.y)+this.Ro.long;const n=this._coordinates.lat-.1*t.y,i=this._coordinates.long+.1*t.x;this.qo(n,i)},i.moveDevice=function(t,n,i,e){this.Fo=!0;const r=new THREE.Quaternion;let s=window.orientation;null===s&&(s=this.ot.clientWidth>this.ot.clientHeight?90:0),t=t?THREE.Math.degToRad(t):0,n=n?THREE.Math.degToRad(n):0,i=i?THREE.Math.degToRad(i):0;const o=s?THREE.Math.degToRad(s):0,u=new THREE.Vector3(0,0,1),c=new THREE.Euler,a=new THREE.Quaternion,h=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5));c.set(n,t,-i,"YXZ"),r.setFromEuler(c),r.multiply(h),r.multiply(a.setFromAxisAngle(u,-o)),this.Xo=(new THREE.Euler).setFromQuaternion(r,"YXZ"),this.Mo=this.Xo.z,this.isUserInteracting||this.Uo||this.qo(THREE.Math.radToDeg(this.Xo.x)-this.Po.lat,-THREE.Math.radToDeg(this.Xo.y)+this.Po.long),this.xo||(this.snapToCenter(),this.kr.fire(Ee.MOTION_START),this.xo=!0)},i.releaseContact=function(t){if(this.Po.lat=THREE.Math.radToDeg(this.Xo.x)-this._coordinates.lat,this.Po.long=THREE.Math.radToDeg(this.Xo.y)+this._coordinates.long,this.isUserInteracting=!1,this.Qo&&!t){const t=Math.hypot(this._coordinates.long-this.Qo.long,this._coordinates.lat-this.Qo.lat);this.Jo(t)}},i.abandonMotion=function(){this.isUserInteracting=!1,this.Qo=null},i.keyPress=function(t){this.ht.keyboardDisabled||(this.Zo()||(this.isUserInteracting=!0,this.Lo&&this.Lo.forEach((t=>clearTimeout(t)))),this.$o[t]||(this.$o[t]=!0))},i.keyUp=function(t){this.$o[t]=!1,this.Zo()||(this.isUserInteracting=!1,this.Jo(1/0))},i.tu=function(){Object.keys(this.$o).forEach((t=>{if(this.$o[t])switch(t){case"up":this.qo(this._coordinates.lat+2,this._coordinates.long);break;case"down":this.qo(this._coordinates.lat-2,this._coordinates.long);break;case"left":this.qo(this._coordinates.lat,this._coordinates.long-2);break;case"right":this.qo(this._coordinates.lat,this._coordinates.long+2)}}))},i.Zo=function(){return Object.keys(this.$o).map((t=>this.$o[t])).some((t=>t))},i.Jo=function(t){if(t>=20){const n={long:this._coordinates.long-this.Ro.long,lat:this._coordinates.lat-this.Ro.lat};t===1/0&&(n.long/=2,n.lat/=2);for(let t=1;t<50;t++)this.Lo.push(setTimeout((()=>{1===t&&(this.Uo=!0),49===t&&(this.Uo=!1,this.jo=1e3/this.Co.videoFps);const i=2/Math.pow(t,1.5);this.Po.lat=THREE.Math.radToDeg(this.Xo.x)+this._coordinates.lat+n.lat,this.Po.long=THREE.Math.radToDeg(this.Xo.y)+this._coordinates.long+n.long,this.qo(this._coordinates.lat+n.lat*i,this._coordinates.long+n.long*i)}),t*this.jo))}},i.onseeked=function(){this.so&&this.nu()},i.onresize=function(){this.adjustRenderSize(),this.isUserInteracting=!1},i.nu=function(){if(!this.isVRPresenting){this.No=THREE.Math.degToRad(90+this._coordinates.lat),this.ko=THREE.Math.degToRad(this._coordinates.long),this.wo.position.set(Math.sin(this.No)*Math.cos(this.ko),Math.cos(this.No),Math.sin(this.No)*Math.sin(this.ko)),this.wo.lookAt(this.wo.target),this.wo.rotation.z+=this.Mo;const t=this.cameraProps;this.kr.fire(Ee.CAMERA_UPDATE,t),this.Io.yaw===t.yaw&&this.Io.pitch===t.pitch&&this.Io.roll===t.roll&&this.Io.fov===t.fov||(this.Io=t,this.kr.fire(Ee.CAMERA_CHANGE,t))}this.bo.render(this.Ao,this.wo)},i.adjustRenderSize=function(){if(this.isVRPresenting)this.wo.aspect=this.ot.clientWidth/this.ot.clientHeight,this.wo.updateProjectionMatrix(),this.bo.setSize(this.ot.clientWidth,this.ot.clientHeight);else{this.ot.clientWidth>this.ot.clientHeight?this.wo.aspect=Math.max(1,Math.min(2,this.ot.clientWidth/this.ot.clientHeight)):this.wo.aspect=Math.max(1/3,Math.min(3,this.ot.clientWidth/this.ot.clientHeight)),this.wo.updateProjectionMatrix();const t=xr(this.ot.clientWidth,this.ot.clientHeight,this.wo.aspect,1);this.bo.setSize(t.width,t.height),this.Go.style.paddingTop=`${t.top}px`}},i.co=function(){this.bo.setAnimationLoop((()=>{this.Zo()&&this.tu(),this.nu()}))},i.ao=function(){this.bo.setAnimationLoop(null)},i.Ko=function(){this.iu({backgroundColor:"#000",display:"block"})},i.Yo=function(){this.iu({backgroundColor:"#000",display:"none"})},i.iu=function({backgroundColor:t,display:n}={}){this.Go.style.cssText=`position:absolute;left:0;top:0;margin-left:auto;margin-right:auto;padding:0;background:${t};width:100%;height:100%;text-align:center;display:${n}`},d(n,[{key:"isUserInteracting",get:function(){return this.eu},set:function(t){t!==this.eu&&(this.eu=t,t?this.ht.isMobile||this.kr.fire(Ee.MOTION_START):this.ht.isMobile||this.kr.fire(Ee.MOTION_END))}},{key:"currentCoordinates",get:function(){return this._coordinates},set:function([t,n]){if(t>90||t<-90)throw new RangeError("Latitude should be a float between -90 and 90.");if(n<0||n>360)throw new RangeError("Longitude should be a float between 0 and 360.");this.qo(t,n),this.nu()}},{key:"cameraProps",get:function(){return{yaw:this._coordinates.long,pitch:this._coordinates.lat,roll:this.roll,fov:this.fieldOfView}},set:function(t){t=T(T({},this.cameraProps),t),this.fieldOfView=t.fov,this.roll=t.roll,this.currentCoordinates=[t.pitch,t.yaw]}},{key:"roll",get:function(){return 180*this.Mo/Math.PI},set:function(t){if(t<-180||t>180)throw new RangeError("Roll should be a float between -180 and 180.");this.Mo=THREE.Math.degToRad(t)}},{key:"isVRPresenting",get:function(){return this.Wo&&this.Wo.isPresenting}},{key:"fieldOfView",get:function(){return this.wo?this.wo.fov:this.ht.fieldOfView},set:function(t){this.wo.fov=t,this.wo.updateProjectionMatrix(),this.bo.render(this.Ao,this.wo)}},{key:"hasVRHeadset",get:function(){return this.Wo&&!!this.Wo.device}}],[{key:"displayName",get:function(){return"ThreeSixtyEffect"}},{key:"supported",get:function(){try{const t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(t){return this.kr.Bs.fire(Ee.SPATIAL_UNSUPPORTED),!1}}},{key:"supportedScanners",get:function(){return[ss,Gu]}}])}(Ec),Lc=function(t){function n(n,i={}){var e;return(e=t.call(this,n,i)||this).connected=!1,e.ru=null,e.su=null,e.ou=null,e.uu=null,e.cu=null,e}E(n,t);var i=n.prototype;return i.activate=function(){return this.ru=new AudioContext,new r(((t,n)=>{if("undefined"!=typeof ambisonics)return void t();const i=document.createElement("script");i.src=this.ht.ambisonicsUrl,document.body.appendChild(i),i.onload=()=>t(),i.onerror=()=>n()})).then((()=>this.toggleAmbisonics())).catch((()=>{this.kr.Bs.fire(Ee.AMBISONIC_UNSUPPORTED)}))},i.deactivate=function(){this.au(!0)},i.toggleAmbisonics=function(){var t;((null==(t=this.kr.getCurrentStream("audio"))?void 0:t.ambisonic_order)??0)<1?this.au():this.hu()},i.hu=function(){var t;if(!this.ru)return;const n=(null==(t=this.kr.getCurrentStream("audio"))?void 0:t.ambisonic_order)??0;if(this.connected||n<1)return;const i=this.kr.Bs.ot;this.su=this.ru.createMediaElementSource(i),this.ou=new ambisonics.sceneMirror(this.ru,n),this.uu=new ambisonics.sceneRotator(this.ru,n),this.cu=new ambisonics.binDecoder(this.ru,n),this.su.connect(this.ou.in),this.ou.out.connect(this.uu.in),this.uu.out.connect(this.cu.in),this.cu.out.connect(this.ru.destination),this.ou.mirror(1),this.connected=!0},i.au=function(t=!1){this.su&&this.su.disconnect(),t&&this.ru&&(this.ru.close(),this.ru=null),this.su=null,this.ou=null,this.uu=null,this.cu=null,this.connected=!1},i.updateRotation=function(t,n,i){this.uu&&(this.uu.yaw!==t||this.uu.pitch!==n||this.uu.roll!==i)&&(this.uu.yaw=t,this.uu.pitch=n,this.uu.roll=i,this.uu.updateRotMtx())},d(n,null,[{key:"displayName",get:function(){return"AmbisonicEffect"}},{key:"supported",get:function(){return void 0!==window.AudioContext}},{key:"supportedScanners",get:function(){return[ss,Gu]}}])}(Ec);const Uc={h264:"video/mp4",hls:"application/vnd.apple.mpegurl",hlsLive:"application/x-mpegURL",dash:"application/vnd.vimeo.dash+json",dashMpd:"video/vnd.mpeg.dash.mpd",vp6:"video/x-flv",vp8:"video/webm",webm:"video/webm",hds:"application/f4m"},xc={"application/vnd.apple.mpegurl":"hls","application/vnd.vimeo.dash+json":"dash","video/vnd.mpeg.dash.mpd":"dash","video/mp4":"progressive","video/webm":"progressive","video/x-flv":"progressive","application/x-mpegURL":"hlslive"},Fc="pending",$c="active",Hc="started",Bc="ended",Vc="started",Gc="done",Yc="error";var Kc=/\s/,Wc=/^\s+/;function qc(t){return"symbol"==typeof t||Ut(t)&&"[object Symbol]"==ft(t)}var zc=/^[-+]0x[0-9a-f]+$/i,Qc=/^0b[01]+$/i,Jc=/^0o[0-7]+$/i,Zc=parseInt;function ta(t){if("number"==typeof t)return t;if(qc(t))return NaN;if(lt(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=lt(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=function(t){return t?t.slice(0,function(t){for(var n=t.length;n--&&Kc.test(t.charAt(n)););return n}(t)+1).replace(Wc,""):t}(t);var i=Qc.test(t);return i||Jc.test(t)?Zc(t.slice(2),i?2:8):zc.test(t)?NaN:+t}var na=1/0;var ia=rt?rt.prototype:void 0,ea=ia?ia.toString:void 0;function ra(t){if("string"==typeof t)return t;if(Vt(t))return function(t,n){for(var i=-1,e=null==t?0:t.length,r=Array(e);++i<e;)r[i]=n(t[i],i,t);return r}(t,ra)+"";if(qc(t))return ea?ea.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}function sa(t){return null==t?"":ra(t)}var oa=et.isFinite,ua=Math.min,ca=function(){var t=Math.round;return function(n,i){if(n=ta(n),(i=null==i?0:ua(function(t){var n=function(t){return t?(t=ta(t))===na||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}(t),i=n%1;return n==n?i?n-i:n:0}(i),292))&&oa(n)){var e=(sa(n)+"e").split("e");return+((e=(sa(t(e[0]+"e"+(+e[1]+i)))+"e").split("e"))[0]+"e"+(+e[1]-i))}return t(n)}}();function aa(t){return!isNaN(t)}function ha(t){return ca(t,3)}function fa(t){return"webkitDisplayingFullscreen"in t&&t.webkitDisplayingFullscreen}let la=0;function da(t="b"){return`${t}${++la}`}da(),da();const va=da(),pa=da(),Ea=da(),ya=da(),ma=da(),Ta=da(),ba=da(),wa=da(),ga=da(),Aa=da(),Sa=da(),_a=da(),Ra=da(),Oa=da(),Ia=da(),Na=da(),ka=da(),Ma=da(),Da=da(),Xa=da();var Pa=Object.freeze({__proto__:null,CONFIG_CHANGED:ba,TELECINE_READY:wa,TELECINE_VIDEO_INIT:ga,PLAY_INITIATED:Aa,QUALITY_CHANGED:Sa,FORCED_QUALITY:_a,CUE_CHANGED:Ra,CAPTIONS_CHANGED:Oa,SPATIAL_PLAYBACK_TOGGLED:Ia,PICTURE_IN_PICTURE_AVAILABLE_SAFARI:Na,HLS_QUALITY_CHANGED:ka,REQUEST_COMPLETE_LIVE_SUBTITLES:Ma,COMPLETE_LIVE_SUBTITLES_LOADED:Da,COMPLETE_LIVE_SUBTITLES_ERROR:Xa}),Ca=Object.freeze({__proto__:null,EVENT_PENDING:"liveeventpending",EVENT_ACTIVE:"liveeventactive",EVENT_STARTING:"liveeventstarting",EVENT_STARTED:"liveeventstarted",EVENT_ENDED:"liveeventended",ARCHIVE_STARTED:"livearchivestarted",ARCHIVE_DONE:"livearchivedone",ARCHIVE_ERROR:"livearchiveerror",SETTINGS_UPDATED:"livesettingsupdated",LOW_LATENCY_FALLBACK:"lowlatencyfallback",LIVE_STATS_SUCCESS:"livestatssuccess",LIVE_STATS_FAILURE:"livestatsfailure"});T(T(T(T(T(T(T(T({},he),ve),pe),Ca),Ee),le),ye),Pa);const ja=T(T({},pe),Ca);function La(t){var n;return(null==t||null==(n=t.archive)?void 0:n.status)===Gc}function Ua(t){return(null==t?void 0:t.status)===Fc}function xa(t){return(null==t?void 0:t.status)===Hc}function Fa(t){return(null==t?void 0:t.status)===Bc}function $a(t){return Ha(t,"/playlist/refresh")}function Ha(t,n){var i;const e=null==(i=t.request.files.hls)?void 0:i.default_cdn,{signature:r,timestamp:s,expires:o}=t.request;return`https://${t.player_url}/live/${t.video.id}${n}?signature=${r}&time=${s}&expires=${o}&cdn=${e}`}var Ba=Object.prototype.hasOwnProperty;function Va(t){if(null==t)return!0;if(pn(t)&&(Vt(t)||"string"==typeof t||"function"==typeof t.splice||Wt(t)||on(t)||Bt(t)))return!t.length;var n=zn(t);if("[object Map]"==n||"[object Set]"==n)return!t.size;if(hn(t))return!vn(t).length;for(var i in t)if(Ba.call(t,i))return!1;return!0}function Ga(t){const n=this;let i={};const e={get attributes(){return Object.assign({},n)},get previousAttributes(){return i},clear(){r();var t=n.attributes;for(var i in t)delete n[i]},set(t){for(var i in r(),t=Ei(t))n[i]=t[i]},clone:()=>new Ga(n.attributes),toJSON:()=>Ei(n.attributes)};function r(){Va(n.attributes)||(i=Ei(n.attributes))}return e.set(t),gi(n,e)}function Ya(t,n){const i=new Ga(ce(t,n));let e=!1;return Ai(i,{reset:function(t){return i.clear(),function(t){e=!0,i.set(t),ce(i,n)}(t),i},isNewVideo:function(){const t=i.previousAttributes;return!e||t.video.id!==i.video.id||t.video.version.current!==i.video.version.current||t.video.live_event&&!La(t.video.live_event)&&(!i.video.live_event||La(i.video.live_event))}})}var Ka=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Wa=/^\w*$/;function qa(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var i=function(){var e=arguments,r=n?n.apply(this,e):e[0],s=i.cache;if(s.has(r))return s.get(r);var o=t.apply(this,e);return i.cache=s.set(r,o)||s,o};return i.cache=new(qa.Cache||Mt),i}qa.Cache=Mt;var za=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qa=/\\(\\)?/g,Ja=function(){var t=qa((function(t){var n=[];return 46===t.charCodeAt(0)&&n.push(""),t.replace(za,(function(t,i,e,r){n.push(e?r.replace(Qa,"$1"):i||t)})),n}),(function(t){return 500===n.size&&n.clear(),t})),n=t.cache;return t}();function Za(t){if("string"==typeof t||qc(t))return t;var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}function th(t,n,i){var e=null==t?void 0:function(t,n){for(var i=0,e=(n=function(t,n){return Vt(t)?t:function(t,n){if(Vt(t))return!1;var i=typeof t;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!qc(t))||Wa.test(t)||!Ka.test(t)||null!=n&&t in Object(n)}(t,n)?[t]:Ja(sa(t))}(n,t)).length;null!=t&&i<e;)t=t[Za(n[i++])];return i&&i==e?t:void 0}(t,n);return void 0===e?i:e}function nh(t){return t.quality||t.metadata.quality}function ih(t,n){t.embed.settings.audio_tracks||(n=null);const i=t.request.files,e=uh(i),r=dh(t),s=t.request.cookie.quality||r||function(t){const n=uh(t.request.files);let i=n.some(fh);Dr.mobileAndroid&&(i=!1);let e="720p";if(i){const t=n.map(nh);-1!==t.indexOf("1080p")&&-1===t.indexOf("720p")&&(e="1080p")}return t.request.cookie.hd||t.video.default_to_hd?e:"360p"}(t);let o=function({files:t=[],preference:n="360p",priorityOffset:i=0}){(t=we(t)).sort(ph());const e=t.map(nh);if(n){-1===e.indexOf(n)&&(e.push(n),e.sort(((t,n)=>lh(n)-lh(t))));const t=e.indexOf(n),i=e.splice(0,t);i.reverse(),e.push.apply(e,w(i))}return t.map((t=>({id:t.id,src:t.url,mime:t.mime,priority:e.indexOf(t.quality)+1+i,metadata:{profile:t.profile,cdn:t.cdn,origin:t.origin,quality:t.quality,fps:t.fps}})))}({files:e,preference:s,priorityOffset:3});return i.hls&&(o=o.concat(sh(t,!1,n)),t.request.drm&&Dr.browser.webKit)||i.dash&&(o=o.concat(oh(t,!1,n))),o}function eh(t,n=!1,i=!1){let e=t.url;if("avc_url"in t&&(e=t.avc_url),n)return e;const r=Dr.dolbyVision,s=Dr.hdr&&Dr.hevc,o=Dr.hevc;return i||(r&&"hevc_dvh1_url"in t?e=t.hevc_dvh1_url:s&&"hevc_hdr_url"in t?e=t.hevc_hdr_url:o&&"hevc_sdr_url"in t&&(e=t.hevc_sdr_url)),Dr.av1&&"av1_url"in t&&(e=t.av1_url),e}function rh(t){return t.fallback_url}function sh(t,n=!1,i=null){var e;const r=t.request.files,s=r.hls.default_cdn,o=t.request.drm,u=r.hls.cdns[s],c=(null==u||null==(e=u.alternatives)?void 0:e[i])||u,a=n?rh(c):eh(c,o);return{id:`hls-${s}-${t.video.id}`,src:a,mime:Uc.hls,priority:3,metadata:{cdn:s,origin:r.hls.cdns[s].origin,quality:"sd"}}}function oh(t,n=!1,i=null){const e=t.request.files;return Va(e.dash)?[]:Object.keys(e.dash.cdns).map((r=>{var s;const o=e.dash.cdns[r],u=(null==o||null==(s=o.alternatives)?void 0:s[i])||o,c=(Dr.browser.chrome||Dr.browser.firefox)&&t.request.drm,a=n?rh(u):eh(u,!1,c);return{id:`dash-${r}-${t.video.id}`,src:a,mime:t.request.drm?Uc.dashMpd:Uc.dash,priority:r===e.dash.default_cdn?1:2,metadata:{cdn:r,origin:e.dash.cdns[r].origin,quality:"sd"}}}))}function uh(t){if(Va(t.progressive))return[];let n=t.progressive;return"progressive_avc"in t&&(n=t.progressive_avc),n.filter(ah(n))}function ch(t){if("number"==typeof t)return t;const n=t.split("-");return 5===n.length?n[0]:parseInt(n[0],10)}function ah(t){const n=t.filter(hh).map(nh);return t=>-1===n.indexOf(nh(t))||hh(t)}function hh(t){let n=t.fps;return"metadata"in t&&(n=t.metadata.fps),n>30}function fh(t){return lh(t)>=720}function lh(t){return"string"!=typeof t&&(t=nh(t)),parseInt(t,10)}function dh(t){const n=uh(t.request.files).map((t=>t.quality));return vh(t,t.embed.quality,n)}function vh(t,n,i=[]){return t.embed.on_site||!n||i.length&&-1===i.indexOf(n)?null:n}function ph(t="desc"){return(n,i)=>{const e=lh(n),r=Eh(n),s=lh(i),o=Eh(i);return"asc"===t?e-s||r-o:s-e||o-r}}function Eh(t){return"object"!=typeof t?0:"fps"in t?t.fps:"metadata"in t&&"fps"in t.metadata?t.metadata.fps:0}function yh(t){const n=t.video.live_event,i=t.request.files;if(!Va(i.hls)){var e;const r=i.hls.default_cdn,s=i.hls.cdns[r].json_url||function(t){var n;const i=t.dvr,e=t.low_latency;var r,s;return i?null==(r=t.playback_urls)?void 0:r["akamai-fmp4"].hls_noredirect:e?null==(s=t.playback_urls)?void 0:s["akamai-low-latency"].hls_noredirect:null==(n=t.playback)?void 0:n.hls_noredirect}(n),o=null!=(e=t.request.flags)&&e.live_dash?2:1;return{id:`hls-${r}-${t.video.id}`,src:s,mime:Uc.hlsLive,priority:o,metadata:{cdn:r,origin:i.hls.cdns[r].origin,quality:"sd"}}}return null}function mh(t,n){let i=[];if(n.video){const r=n.video.currentFile.mime;if(r===Uc.hlsLive)return n.manifest.video.map((t=>T(T({},t),{},{quality:`${t.height}p`})));if([Uc.dash,Uc.dashMpd].includes(r)){var e;const r=!!n.video.drmHandler,s=r&&"sd-fallback"===n.video.drmHandler.state;i=function(t,n=!1){if(!t)return[];let i=t.streams;"streams_avc"in t&&(i=t.streams_avc);const e=Dr.dolbyVision,r=Dr.hevc&&Dr.hdr,s=Dr.hevc;return e&&"streams_hevc_dvh1"in t?i=t.streams_hevc_dvh1:r&&"streams_hevc_hdr"in t?i=t.streams_hevc_hdr:s&&"streams_hevc_sdr"in t?i=t.streams_hevc_sdr:Dr.av1&&"streams_av1"in t&&(i=t.streams_av1),n&&"streams_fallback"in t&&(i=t.streams_fallback),i}(t.request.files.dash,s),!r&&null!=n&&null!=(e=n.currentScanner)&&e.manifestLoaded&&(i=function(t,n){const i=n.map((t=>t.id));return t.filter((t=>{const n=ch(t.id);return i.includes(t.id)||i.includes(n)}))}(i,n.currentScanner.videoStreams))}else i=n.video.files.filter((t=>"progressive"===xc[t.mime]))}return i.filter(ah(i)).sort(ph())}function Th(t){let n=nh(t);const i={"1440p":"2K","2160p":"4K","2700p":"5K","3240p":"6K","3780p":"7K","4320p":"8K"};for(const t in i)n=n.replace(t,i[t]);return n}function bh(t){return Dr.spatialPlayback&&t.video.spatial?35:75}function wh(t){return t.request.text_tracks.map((t=>({id:t.id,src:t.url,kind:t.kind,label:t.label,language:t.lang})))}let gh={captureException(t){},captureMessage(t){},captureBreadcrumb(){}},Ah=gh;var Sh=function(t){Ah=Object.assign({},gh,t)},_h=function(t,n){return Ah.captureException(t,n)},Rh=function(t,n,i="backbone",e="info"){return Ah.captureBreadcrumb(t,n,i,e)};function Oh(t,n,i){let e=!1,r=!1,s=!1,o=!0,u="auto";function c(t){if(!o&&i.buffered&&i.buffered.length>0){t=t||i.currentTime;const r=function(t,n){var i=t.length-1;if(t.length>1)for(var e=0,r=t.length;e<r;e++)if(t.start(e)<=n&&t.end(e)>=n){i=e;break}return i}(i.buffered,t),o=i.buffered.end(r),u=o/i.duration,c=i.duration;if(n.fire(he.PROGRESS,{loaded:o,duration:c,loadProgress:u}),s&&e&&o===i.duration)return void(e&&i.paused&&i.play().catch(_h))}}function a(n){if("auto"===n)return void(i.video.currentFile.restrictedStreamIndexes=[]);const e=mh(t,i).reverse().map((t=>t.quality)).indexOf(n);-1!==e&&(Rh(`Switched to ${n}`,{},"video"),i.video.currentFile.restrictedStreamIndexes=[e])}function h(e){const r=mh(t,i).map((t=>t.quality)),s=vh(t,t.embed.quality,r);s&&n.fire(_a,s),a(s||"auto")}return n.on(ga,(function(){var n;i.playsinline=t.embed.playsinline,i.muted=t.embed.muted,i.lowLatencyMode=null==(n=t.video.live_event)?void 0:n.low_latency})),n.on(pa,(function(){o=!0,i.paused||i.pause(),r=!1,e=!1,i.currentTime=0})),n.on(Ea,(function(){i.paused||i.pause(),i.video=null})),i.on(he.PLAY,(function(){o=!1,n.fire(he.PLAY,i.currentTime)})),i.on(he.PAUSE,(function(){e=!1,n.fire(he.PAUSE,i.currentTime,i.ended)})),i.on(he.PLAYING,(function(t){c()})),i.on(he.TIME_UPDATE,(function(){if(o)return;const{currentTime:t,liveEdgeTime:e,atLiveEdge:r,liveTailTime:s,atLiveTail:u,duration:c,playbackRate:a}=i,h=t/c;n.fire(he.TIME_UPDATE,{currentTime:t,liveEdgeTime:e,atLiveEdge:r,liveTailTime:s,atLiveTail:u,duration:c,playbackRate:a,timeProgress:h})})),i.on(he.ENDED,(function(t){i.loop?i.play().catch(_h):(e=!1,n.fire(he.ENDED,t))})),i.on(he.LOADED_METADATA,(function(n){const e=i.duration;if(isFinite(e)&&e>0){if(e<t.video.duration-1||e>t.video.duration+1)return;t.video.duration=e}t.video.video_width=i.videoWidth,t.video.video_height=i.videoHeight})),i.on(he.DURATION_CHANGE,(function(n){const e=i.duration;isFinite(e)&&(t.video.duration>0&&(e<t.video.duration-1||e>t.video.duration+1)||(t.video.duration=e))})),i.on(he.PROGRESS,c),i.on(ve.BUFFER_STARTED,(()=>{s=!0})),i.on(ve.BUFFER_ENDED,(()=>{s=!1})),n.on(va,(function(n){i.isLive()&&0===i.liveEdgeTime||(n=function(t,n,i){return void 0===i&&(i=n,n=void 0),void 0!==i&&(i=(i=ta(i))==i?i:0),void 0!==n&&(n=(n=ta(n))==n?n:0),function(t,n,i){return t==t&&(void 0!==i&&(t=t<=i?t:i),void 0!==n&&(t=t>=n?t:n)),t}(ta(t),n,i)}(n,ha(i.isLive()?i.liveTailTime:0),ha(i.isLive()?i.liveEdgeTime:i.duration||t.video.duration)),i.currentTime=n)})),i.on(he.SEEKING,(function(){const t=i.currentTime,e=i.duration,r=t/e;n.fire(he.SEEKING,{currentTime:t,duration:e,timeProgress:r})})),i.on(he.SEEKED,(function(){c();const t=i.currentTime,e=i.duration,r=t/e;n.fire(he.SEEKED,{currentTime:t,duration:e,timeProgress:r})})),i.on(ve.CURRENT_FILE_CHANGE,(function(e){Rh("Current file changed",{id:e.id,mime:e.mime,src:e.src,metadata:e.metadata},"video"),e.metadata.quality,[Uc.dash,Uc.dashMpd].includes(e.mime)&&h(),[Uc.hlsLive].includes(e.mime)?i.once(ve.STREAMS_LOADED,(()=>{h()})):function(){const i=dh(t);i&&n.fire(_a,i)}()})),i.on(he.RESIZE,(function(){i.video.currentFile.mime===Uc.hls&&i.videoHeight&&n.fire(ka,{height:i.videoHeight})})),{play:function(){return e=!0,r||(n.fire(Aa),r=!0),i.play()},pause:function(){e=!1,i.pause()},get quality(){return u},set quality(e){!function(e){const r=i.video.currentFile.mime;if([Uc.dash,Uc.dashMpd,Uc.hlsLive].includes(r))a(e);else{const n=mh(t,i).filter((t=>t.metadata.quality===e));n.length>0&&(o=!0,i.video.currentFile=n[0])}u=e,n.fire(Sa,e)}(e)}}}function Ih(t,n,i){let e=null;Dr.spatialPlayback&&(n.on(ga,(function(){e&&(i.deactivateEffect(jc),e=null,n.fire(Ia,e));const r=t.video.spatial;r&&(t.request.drm||i.supportsEffect(jc)&&(e=i.activateEffect(jc,{threeUrl:t.request.urls.three_js,fps:t.video.fps,fieldOfView:r.fov,directorTimeline:r.director_timeline,projection:r.projection,stereoMode:r.stereo_mode,initialView:r.initial_view,isMobile:Dr.android,dimensions:t.embed.on_site?{width:1080,height:540}:{width:640,height:360},keyboardDisabled:!t.embed.keyboard}),n.fire(Ia,e)))})),i.on(Ee.SPATIAL_UNSUPPORTED,(function(){e&&(i.deactivateEffect(jc),e=null,n.fire(Ia,e))})))}function Nh(t,n,i){let e=null;n.on(ga,(function(){e&&(i.deactivateEffect(Mc),e=null),t.video.canvas&&(t.request.drm||i.supportsEffect(Mc)&&(e=i.activateEffect(Mc)))}))}var kh=oe((function(t,n,i){re(t,n,i)}));function Mh(t,n,i){return i?n?n(t):t:(t&&t.then||(t=r.resolve(t)),n?t.then(n):t)}const Dh=5e3;function Xh(t,n){try{var i=t()}catch(t){return n(t)}return i&&i.then?i.then(void 0,n):i}let Ph=function(t){function n(n,i,e,r){var s;return(s=t.call(this)||this).fu=Xi(),s.lu=Ei(n),s.du=n.session_url||n.sessionUrl,s.vu=n.subtitleUrl,s.pu=i,s.Eu=r,s.yu=e,s.mu=!1,s.Tu=!1,s.bu=n.dvr,s.wu(),s}E(n,t);var i=n.prototype;return i.requestCompleteLiveSubtitles=function(){try{const t=this;return Mh(Xh((function(){return Mh(We({url:t.vu,retry:3,retryStatus:t=>[410].includes(t)||_e.retryStatus(t),hooks:{beforeRetry:[t.gu.bind(t)]}}).json(),(function(t){if(null==t||!t.url)throw new Error("No webvtt url was available to fetch");return Mh(We(t.url).text(),nc)}))}),(function(t){throw t})))}catch(t){return r.reject(t)}},i.gu=function(t){try{return Mh(this.Au(),(function(n){t.url=n}))}catch(t){return r.reject(t)}},i.Au=function(){try{const t=this;return Mh(We(t.Eu).json(),(function(n){return t.vu=n.url,n.url}))}catch(t){return r.reject(t)}},i.disable=function(){this.Tu=!0},i.forcePolling=function(){this.isForcePolling||(this.mu=!0,this.wu())},i.unforcePolling=function(){this.mu=!1},i.wu=function(){!1!==this.lu.polling&&(this.lu.id&&this.fu.resolve(),this.Su()?this._u():this.Ru()&&this.Ou())},i.Ru=function(){var t;return!(Fa(this.lu)&&(null==(t=this.lu.archive)?void 0:t.status)!==Vc||!this.isForcePolling&&xa(this.lu))},i.Su=function(){return!this.du||!(!Ua(this.lu)||null!==this.lu.id)},i.Iu=function(){try{const t=this;return Mh(We(t.pu).json(),(function(n){return t.du=n.url,n.url}))}catch(t){return r.reject(t)}},i.Ou=function(){try{const t=this;if(t.Tu)return Mh();let n,i={};return Dr.browser.ie&&(i={Pragma:"no-cache","Cache-Control":"no-cache"}),Mh(function(t,n){return t&&t.then?t.then(n):n()}(Xh((function(){return Mh(We({url:t.du,retry:3,retryStatus:t=>[410].includes(t)||_e.retryStatus(t),hooks:{beforeRetry:[t.K.bind(t)]},headers:i}).json(),(function(t){n=t}))}),(function(){throw new Error(`Hit max retries polling ${t.du}`)})),(function(i){if(t.bu&&(n.dvr=t.bu),n.status!==t.lu.status){if(Fa(n)&&"provision_expire"===n.terminate_reason)return t.du=null,t.lu.id=null,void setTimeout(t.wu.bind(t),Dh);const i={[$c]:ja.EVENT_ACTIVE,[Fc]:ja.EVENT_PENDING,[Hc]:ja.EVENT_STARTED,[Bc]:ja.EVENT_ENDED}[n.status];try{t.fire(i,n)}catch(t){throw new Error(`Error firing live event status change ${t}`)}}if(n.archive&&(!t.lu.archive||n.archive.status!==t.lu.archive.status)){const i={[Vc]:ja.ARCHIVE_STARTED,[Gc]:ja.ARCHIVE_DONE,[Yc]:ja.ARCHIVE_ERROR}[n.archive.status];t.fire(i,n)}t.lu=kh(t.lu,n),t.Ru()&&setTimeout(t.Ou.bind(t),Dh)})))}catch(t){return r.reject(t)}},i.K=function(t){try{return Mh(this.Iu(),(function(n){t.url=n}))}catch(t){return r.reject(t)}},i._u=function(){try{const t=this;return t.Tu?Mh():Mh(We(t.yu).json(),(function(n){let i=!1;return function(e,r){var s=function(){if(null!==n.ingest.session_id)return t.fu.resolve(),t.lu.id=n.ingest.session_id,Mh(t.Iu(),(function(){t.Ou(),i=!0}))}();return s&&s.then?s.then(r):r(s)}(0,(function(n){if(i)return n;setTimeout(t._u.bind(t),Dh)}))}))}catch(t){return r.reject(t)}},d(n,[{key:"isForcePolling",get:function(){return this.mu}},{key:"liveEventIDReady",get:function(){return this.fu}}])}(bi);function Ch(){}function jh(t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];try{return r.resolve(t.apply(this,n))}catch(t){return r.reject(t)}}}function Lh(t,n,i){const e=jh((function(){return function(t){return t&&t.then?t.then(Ch):r.resolve()}({hive:()=>{},kollective:()=>{}}[t.video.ecdn.ecdn_provider]())}));let s,o,u,c=!1,a=0,h=0;function f(){o&&(o.disable(),o=null)}function l(){i.endLive()}return n.on(ba,(function(){s&&!t.isNewVideo()||(s=!0,f(),t.video.live_event&&!La(t.video.live_event)&&(function(i){o=new Ph(i,function(t){return Ha(t,"/session/refresh")}(t),function(t){return`https://${t.vimeo_url}/live_event/status?clip_id=${t.video.id}`}(t),function(t){return Ha(t,"/subtitle/refresh")}(t)),o.on(ja.EVENT_ENDED,l),Object.keys(ja).forEach((t=>{const i=ja[t];o.on(i,(t=>{n.fire(i,t)}))})),n.on(Ma,jh((function(){return function(t){if(t&&t.then)return t.then(Ch)}(function(t,i){try{var e=function(){var t;return function(t,n){return void 0?n?n(t):t:(t&&t.then||(t=r.resolve(t)),n?t.then(n):t)}(null==(t=o)?void 0:t.requestCompleteLiveSubtitles(),(function(t){n.fire(Da,t)}))}()}catch(t){return i()}return e&&e.then?e.then(void 0,i):e}(0,(function(t){n.fire(Xa)})))})))}(t.video.live_event),function(){a=0,h=0;let t=!1;i.once(he.PLAYING,(()=>t=!0));let e=ji();clearInterval(u),u=setInterval((()=>{i.paused||(a+=Li(e)/1e3),t&&c&&(h+=Li(e)/1e3),function(t){if(i.lowLatencyMode&&t>12&&i.latency>10&&c){const t="Rebuffer ratio > 12% and latency > 10s, fallback to normal HLS w/ target latency of 12s.";n.fire(ja.LOW_LATENCY_FALLBACK,{msg:t}),i.lowLatencyMode=!1,i.presentationDelay=12,i.bufferTarget=12}}(h/a*100),e=ji()}),500)}()),t.video.ecdn&&e())})),n.on(Ea,(function(){f()})),i.on(ja.STREAM_ONLINE,(function(){o.isForcePolling&&o.unforcePolling()})),i.on(ja.STREAM_OFFLINE,(function(){o.isForcePolling||o.forcePolling()})),i.on(ve.BUFFER_STARTED,(function(){c=!0})),i.on(ve.BUFFER_ENDED,(function(){c=!1})),{get p2pReady(){}}}function Uh(t,n,i){if(i)return n?n(t()):t();try{var e=r.resolve(t());return n?e.then(n):e}catch(t){return r.reject(t)}}function xh(t,n){var i=t();return i&&i.then?i.then(n):n(i)}function Fh(t,n){try{var i=t()}catch(t){return n(t)}return i&&i.then?i.then(void 0,n):i}function $h(t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];try{return r.resolve(t.apply(this,n))}catch(t){return r.reject(t)}}}function Hh(t,n,i){var e;const s=$h((function(){return Fh((function(){return Uh(y,(function(n){return n(i,t)}))}),(function(t){throw _h(t),new Error("Failed to create Hive Module",t)}))})),o=$h((function(){return Fh((function(){return Uh(E,(function(t){return t(i)}))}),(function(t){return _h(t),null}))})),u=function(){return function(t){return t&&t.then||(t=r.resolve(t)),t}(xh((function(){if(!a)return Uh(o,(function(t){a=t}))}),(function(){var n;return null==(n=a)?void 0:n.setUp(t)})))},c=$h((function(){return Fh((function(){return xh((function(){if(!h)return Uh(s,(function(t){h=t}))}),(function(){var t;return null==(t=h)?void 0:t.setUp(l)}))}),(function(t){var n;return null==(n=h)||n.stop(),null}))}));let a,h,f=!1,l=!1,d=!1;const v=null==(e=t.video.ecdn)?void 0:e.ecdn_provider;let p;function E(){return Ii("module/kollective.js")}function y(){return Ii("module/hive.js")}function m(){try{a&&(a.destroy(),a=null),h&&(h.destroy(),h=null)}catch(t){}}return n.on(ba,(function(){var n;t.isNewVideo()&&(f=!1),!0!==t.preload||!1!==d||"kollective"!==v?f||((null==(n=t.video.live_event)?void 0:n.status)!==Fc?(f=!0,m(),v&&(p={hive:c,kollective:u}[v]())):l=!0):d=!0})),n.on(Ea,m),{get p2pReady(){return p}}}function Bh(t,n,i){let e=null;function r(){i.deactivateEffect(Lc),e=null}n.on(Aa,(function(){var n;e&&r(),(null==(n=t.video.channel_layout)?void 0:n.startsWith("ambisonic"))&&i.supportsEffect(Lc)&&(e=i.activateEffect(Lc,{ambisonicsUrl:t.request.urls.ambisonics_js}))})),i.on(Ee.CAMERA_UPDATE,(function({yaw:t,pitch:n,roll:i}){e&&e.updateRotation(t,n,i)})),i.on(Ee.AMBISONIC_UNSUPPORTED,(function(){e&&r()})),i.on(ve.STREAM_CHANGE,(function(){e&&e.toggleAmbisonics()}))}function Vh(t,n=[]){if(!t||"null"===t||0===n.length)return{track:null};const[i,e]=t.split("."),[r]=i.split(/[-_]/),s=i!==r,o=n.filter((t=>s&&t.language===i||t.language===r)).sort(((t,n)=>{const s=2*(t.language===r&&t.kind===e)+2*(t.language===i)+1*(t.kind===e);return 2*(n.language===r&&n.kind===e)+2*(n.language===i)+1*(n.kind===e)-s}));return o.length>0?{track:o[0],exactMatch:o[0].language===i&&o[0].kind===e}:{track:null}}function Gh(t){const n=t.split(/\n/g);let i=[],e=[];return n.forEach((t=>{let n=t.match(/<[a-zA-Z]+ ?.*?>/g)||[],r=t.match(/<\/[a-zA-Z]+ ?.*?>/g)||[];const s=e.map((({startTag:t})=>t));e=[],n=s.concat(n),n.forEach((t=>{let[n]=t.replace(/<|>/g,"").split(" ");const i=r.indexOf(`</${n}>`);-1!==i?r.splice(i,1):e.push({startTag:t,closeTag:`</${n}>`})}));const o=e.map((({closeTag:t})=>t)).reverse().join(""),u=`${s.join("")}${t}${o}`;i.push(u)})),i.join("<br>")}function Yh(t){return t?t.split(/\n/g).join("↵"):t}function Kh(t,n){let i;function e(){return n.pictureInPictureActive||fa(n.videoElement)?"showing":"hidden"}function r(){if(0!==n.video.textTracks.length){if(n.video.textTracks.forEach((t=>{t.on("cuechange",s),t.on("modechange",o)})),n.video.textTracks.language){const[i]=n.video.textTracks.language.split(/[-_]/),[e]=n.video.textTracks.language.split(/[-_]/);if(i!==e){const i=`${n.video.textTracks.language}.subtitles`,{track:e}=Vh(i,n.video.textTracks);if(e)return void t.fire(ya,i)}}t.fire(ma)}else t.fire(ma)}function s(n){const i=n.target,e=i.activeCues,r=[];let s;for(var o=0,u=e.length;o<u;o++)""!==e[o].text.replace(/^\s+|\s+$/gm,"")&&(s=document.createElement("span"),s.appendChild(e[o].getCueAsHTML()),r.push({html:Gh(s.innerHTML),text:Yh(e[o].text)}));t.fire(Ra,i,r)}function o(i){const e=i.target;fa(n.videoElement)&&"showing"===e.mode&&t.fire(Oa,e)}t.on(ga,r),t.on(ya,(function(r){if(i&&i.id===r)return;let s=n.video.textTracks.getTrackById(r),o=!0;s||({track:s,exactMatch:o}=Vh(r,n.video.textTracks)),s!==i&&setTimeout((()=>{n.video&&n.video.textTracks.forEach((t=>{t.mode=t===s?e():"disabled"})),t.fire(Oa,s,!o),i=s}),0)})),t.on(ma,(function(){setTimeout((()=>{n.video&&n.video.textTracks.forEach((t=>{t.mode="disabled"})),t.fire(Ra),i&&(i=null,t.fire(Oa,null))}),0)})),t.on(ve.TEXT_TRACKS_AVAILABLE,r),t.on([he.ENTER_PICTURE_IN_PICTURE,he.LEAVE_PICTURE_IN_PICTURE],(function(){!function(t){i&&i.mode!==t&&(i.mode=t)}(e())}))}const Wh=["main","translation"];function qh(t,n){return we(t).map((t=>T(T({},t),{},{enabled:t.id===n})))}function zh(t){return we(t).find((t=>t.enabled))}function Qh(t,n){let i="translation";return"1"===t.id?i="main":t.label.includes("(Audio description)")?i="descriptions":t.label.includes("(Commentary)")&&(i="commentary"),t.language===n.language&&i===n.kind}function Jh(t,n,i){let e,r,s,o,u,c;function a(){var n;const i=t.video.live_event,r=null==i?void 0:i.dvr;if(Ua(i)||function(t){return(null==t?void 0:t.status)===$c}(i)||Fa(i)&&!La(i))return void(e.video=null);if(xa(i)&&e.video&&!t.isNewVideo())return;const s=t.request.audio_tracks||[],o=null==(n=zh(s))?void 0:n.id,c=xa(i)?function(t){const n=[],i=yh(t);i&&n.push(i);const e=function(t){var n,i;const e=t.video.live_event,r=t.request.files;if(Va(r.dash))return null;const s=r.dash.default_cdn,o=r.dash.cdns[s].url||(null==(n=e.playback)?void 0:n.dash_noredirect),u=null!=(i=t.request.flags)&&i.live_dash?2:1;return{id:`dash-${s}-${t.video.id}`,src:o,mime:Uc.dashMpd,priority:u,metadata:{cdn:s,origin:r.dash.cdns[s].origin,quality:"sd"}}}(t);return e&&n.push(e),n}(t):ih(t,o),a=wh(t);!e.video||t.isNewVideo()||u||r&&!La(i)?f({files:c,textTracks:a,audioTracks:s,switchingVideo:r,startTime:r&&e.currentTime}):h(c,a)}function h(t,n){t.forEach((t=>{const n=e.video.files.getFileById(t.id);n&&n.src!==t.src&&(n.src=t.src)})),n.forEach((t=>{const n=e.video.textTracks.getTrackById(t.id);n&&n.src!==t.src&&(n.src=t.src)}))}function f({files:r,textTracks:u,audioTracks:a=[],switchingVideo:h=!1,startTime:f}){var l,d,v,p;const E=t.video.live_event,y=i.getBoundingClientRect(),m=xa(E)?yh(t):function(t){const n=t.request.files;if(!Va(n.hls)){const t=n.hls.default_cdn,i=n.hls.cdns[t],e=i.captions||i.url;return e?{src:e,mime:Uc.hls,metadata:{cdn:t,origin:i.origin,quality:"sd"}}:null}return null}(t);var T;c||(c=(null==(T=e.played)?void 0:T.length)>0);const b=!e.paused||(null==(l=e.zs)?void 0:l.bs);e.At=h,e.video={id:t.video.id,title:t.video.title,subtitle:`from ${t.video.owner.name}`,files:r,textTracks:u,audioTracks:a,chapters:th(t,"embed.chapters",[]),duration:t.video.duration,externalDisplayFiles:{AirPlay:m},metadata:{playlistRefreshUrl:$a(t),useHls:t.request.drm&&Dr.browser.webKit,drm:t.request.drm,drmLaUrlParams:t.request.drm&&{atid:t.request.atid,leadUUID:null==(d=t.user.lead)?void 0:d.id,playbackRoute:null!=(v=t.request.flags)&&v.ott?"player_embed_ott":"player_embed",playerLocation:t.embed.on_site?"onsite":"embed",dnt:(null==(p=t.request.flags)?void 0:p.dnt)??t.embed.dnt,embedContext:t.embed.context},p2pReady:t.video.ecdn&&(s.p2pReady??o.p2pReady),percentShown:jc.frustumSurfaceArea(t.video.spatial.fov,y.width,y.height)}},h?e.checkRebuffer(c,b):n.fire(ga),"number"==typeof f&&(e.currentTime=f)}return function(){var n,r,s,o;const u=[Gu,fc,pc,ss],c=t.video.ecdn&&!(null!=(n=t.request.flags)&&n.ecdn_delta_updates);e=new kc(i,u,{externalDisplays:[AirPlayExternalDisplay],mediaSourceScanner:{droppedFrameSwitchPercent:bh(t)},tests:t.request.ab_tests,fileCodecs:t.request.file_codecs,presentationDelay:t.video.presentation_delay,lowLatencyMode:null==(r=t.video.live_event)?void 0:r.low_latency,dvrEnabled:null==(s=t.video.live_event)?void 0:s.dvr,disableDeltaUpdates:c,getLiveEventStartTimeEpoch:()=>function(t){var n;return null!=t&&t.started_on?new Date(t.started_on).getTime()/1e3:null==t||null==(n=t.ingest)?void 0:n.start_time}(t.video.live_event),sessionMetadata:{clipId:t.video.id,sessionId:t.request.session},disableMMS:!(null==(o=t.request.flags)||!o.disable_mms)||!Dr.iOS})}(),Object.values(he).filter((t=>![he.TIME_UPDATE,he.PROGRESS,he.SUSPEND,he.ERROR].includes(t))).forEach((t=>{e.on(t,((n="")=>{Rh(t,n,"video event")}))})),e.on(ve.STREAMS_LOADED,(function(n){n.video.forEach((n=>{const i=function(t,n){return n.find((n=>ch(n.id)===String(t)||ch(n.id)===ch(t)))}(n.id,mh(t,e));i?(n.profile=i.profile,n.quality=i.quality,n.fps=i.fps):(n.profile=null,n.quality=`${n.height}p`,n.fps=n.framerate)}))})),e.on(ve.STREAM_CHANGE,(function({index:t,streams:i,metadata:e}){const r=i[t];Rh("Stream changed",r,"video"),n.fire(ve.STREAM_CHANGE,r,t,i,e)})),e.on(ve.STREAM_TARGET_CHANGE,(function({index:t,streams:i}){const e=i[t];n.fire(ve.STREAM_TARGET_CHANGE,e,t,i)})),e.on(ve.DRM_KEY_SWITCH,(function(){var n;if(!t.request.drm.fallback_asset)return;const i=wh(t),r=null==(n=zh(e.video.audioTracks))?void 0:n.id,s=function(t,n){const i=t.request.files;let e=[];const r=t.request.drm&&Dr.browser.webKit;return(i.hls&&(Dr.iPhone||Dr.iPad)||r)&&(e=e.concat(sh(t,!0,n))),i.dash&&!r&&(e=e.concat(oh(t,!0,n))),e}(t,r);h(s,i)})),function(t,n,i){i.forEach((i=>{t(i,((...t)=>{n.apply(void 0,[i].concat(t))}))}))}(e.on,n.fire,[le.ACTIVATED,le.AVAILABLE,le.DEACTIVATED,le.UNAVAILABLE,pe.STREAM_OFFLINE,pe.STREAM_ONLINE,pe.BUFFER_GAP_JUMP,pe.BUFFER_GAP_JUMP_PREVENT,pe.STALL_JUMP,pe.LATENCY_UPDATED,ye.MEDIASESSION_PAUSE,ye.MEDIASESSION_PLAY,ye.MEDIASESSION_SEEK_BACKWARD,ye.MEDIASESSION_SEEK_FORWARD,ye.MEDIASESSION_SEEK_TO,ve.AUDIO_TRACK_CHANGED,ve.AV_DURATION_MISMATCH,ve.BANDWIDTH,ve.BUFFER_ENDED,ve.BUFFER_OCCUPANCY,ve.BUFFER_STARTED,ve.CHAPTER_CUES_UPDATED,ve.CUE_POINT,ve.CURRENT_FILE_CHANGE,ve.DOWNLOAD_END,ve.DOWNLOAD_TIMEOUT,ve.DRM_AUTH_SUCCESS,ve.DRM_KEY_SWITCH,ve.DROPPED_FRAMES,ve.MANIFEST_LOADED,ve.MANIFEST_TIMEOUT,ve.QUOTA_EXCEEDED_ERROR,ve.SCANNER_CHANGE,ve.STREAM_CHANGE_START,ve.STREAM_BUFFER_END,ve.STREAM_BUFFER_START,ve.AVAILABLE_STREAMS_CHANGED,ve.MEDIA_CAPABILITY_STREAMS_UNSUPPORTED,ve.TEXT_TRACKS_AVAILABLE,ve.DROPPED_FRAME_PERCENT_EXCEEDED,ve.LOAD_SEGMENT_FAILED,ve.SEGMENT_CUES_LOADED,Ee.CAMERA_UPDATE,Ee.CAMERA_CHANGE,Ee.MOTION_END,Ee.MOTION_START,Ee.SPATIAL_UNSUPPORTED,Ee.WEBVR_ENTER,Ee.WEBVR_EXIT,Ee.WEBVR_HARDWARE_AVAILABLE,he.DURATION_CHANGE,he.ERROR,he.LOAD_START,he.LOADED_DATA,he.LOADED_METADATA,he.PLAYING,he.RATE_CHANGE,he.RESIZE,he.STALLED,he.VOLUME_CHANGE,he.WAITING,he.ENTER_PICTURE_IN_PICTURE,he.LEAVE_PICTURE_IN_PICTURE,he.WEBKIT_BEGIN_FULLSCREEN,he.WEBKIT_END_FULLSCREEN]),n.fire(wa),new Kh(n,e),new Ih(t,n,e),new Nh(t,n,e),new Bh(t,n,e),s=new Lh(t,n,e),r=new Oh(t,n,e),o=new Hh(t,n,e),n.on(ba,a),n.on(Ta,(function(i){var r;if(null==(r=t.embed)||null==(r=r.settings)||!r.audio_tracks)return;if(e.supportsVideoElementAudioTracks)return void e.enableAudioTrack(null==i?void 0:i.id);const s=function(t,n={}){if(null==t||!t.length)return[];const i=n.language,e=n.kind;let r=null==n?void 0:n.id;if(r)return qh(t,r);if(e&&i){const n=t.find((t=>t.language===i&&t.kind===e));if(r=null==n?void 0:n.id,r)return qh(t,r)}if(i){const n=t.find((t=>t.language===i&&Wh.includes(t.kind)));if(r=null==n?void 0:n.id,r)return qh(t,r)}const s=t.find((t=>"main"===t.kind));return r=null==s?void 0:s.id,qh(t,r)}(t.request.audio_tracks,i),o=zh(s);f({files:ih(t,null==o?void 0:o.id),textTracks:e.video.textTracks,audioTracks:s,switchingVideo:!0,startTime:e.currentTime}),n.fire(ve.AUDIO_TRACK_CHANGED)})),n.on(he.LOADED_DATA,(function(){var n,i;if(e.supportsVideoElementAudioTracks&&null!=t&&null!=(n=t.request)&&null!=(n=n.audio_tracks)&&n.length&&null!=(i=e.videoElementAudioTracks)&&i.length){const n=zh(t.request.audio_tracks||[]),i=function(t,n){for(let i=0;i<t.length;i++){const e=t[i];if(Qh(e,n))return e}return null}(e.videoElementAudioTracks,n);i&&e.enableAudioTrack(i.id)}})),Dr.browser.safari&&window.addEventListener("pageshow",(t=>{t.persisted&&(u=!0,a())})),Si({telecine:e},r)}function Zh(t,n,i){this.constructorName="BackboneError",this.message=t,this.name=n,this.source=i}Zh.prototype=new Error;var tf={embed:{},request:{cookie:{},files:{},flags:{},urls:{},text_tracks:[],file_codecs:{}},video:{owner:{},thumbnail_url:"",version:{}},user:{}};function nf(t,n){let i;const e=new bi;let r,s,o=null,u=new Ya(n,tf);function c(t,n){return e.fire(ba,t,n),t}const a={play:()=>r.play(),pause:()=>r.pause(),get currentTime(){return s.currentTime>.1?ha(s.currentTime):0},set currentTime(t){if(t=parseFloat(t),isNaN(t)||t<0)throw new Zh("Seconds must be a positive number less than the duration of the video.","RangeError","setCurrentTime");e.fire(va,t)},get liveEdgeTime(){return s.liveEdgeTime},get atLiveEdge(){return s.atLiveEdge},get liveTailTime(){return s.liveTailTime},get atLiveTail(){return s.atLiveTail},get duration(){return ha(u.video.duration)},get enabledTextTrack(){return o},loadVideo(t){const n=Ei(u);return u.reset(t),u=c(u,n),this},reactivate(){var t;return null!=(t=s)&&t.reactivate&&s.reactivate(),this},unload(){return e.fire(pa),this},destroy(){return e.fire(Ea),this},on(t,n){return e.on(t,n),this},once(t,n){return e.once(t,n),this},off(t,n){return e.off(t,n),this},get events(){return e},hasTextTrack(t){let n,i,e=this.textTracks;if(aa(t))i=e.getTrackById(t);else{let i=t.split(".")[0];n=e.some((t=>t.language.toLowerCase()===i.toLowerCase()))}return!(!i&&!n)},enableTextTrack(t,n=null){let i,r,u=this.textTracks;if(aa(t))o=u.getTrackById(t);else{if([i,r=n]=t.split("."),!this.hasTextTrack(t))throw new Zh(`There are no tracks for “${i.toUpperCase()}”.`,"InvalidTrackLanguageError","enableTextTrack");o=Vh(r?`${i}.${r}`:i,u).track}if(!o||r&&o.kind!==r)throw new Zh(`There are no ${r} tracks for “${i.toUpperCase()}”.`,"InvalidTrackError","enableTextTrack");s.setCaptionsShouldDisplay(!0),e.fire(ya,o.id)},disableTextTrack(){o=null,s.setCaptionsShouldDisplay(!1),e.fire(ma)},enableAudioTrack(t){e.fire(Ta,t)},get qualities(){return function(t){var n;const i=t.representations.map((n=>{const i=nh(n);return{id:i,label:Th(n),active:t.quality===i}})),e=null==(n=t.video)?void 0:n.currentFile.mime;return[Uc.dash,Uc.dashMpd,Uc.hlsLive,Uc.hls].includes(e)&&i.unshift({id:"auto",label:"Auto",active:!t.quality||"auto"===t.quality}),i}(this)},get quality(){return r.quality},set quality(t){r.quality=t},get playbackRate(){return s?s.playbackRate:1},set playbackRate(t){s.playbackRate=t,s.defaultPlaybackRate=t},get textTracks(){return s.video?s.video.textTracks:[]},get representations(){return mh(u,s)},get volume(){return s?s.volume:ha(u.request.cookie.volume)},set volume(t){if(t=parseFloat(t),isNaN(t)||t<0||t>1)throw new Zh("Volume should be a number between 0 and 1.","RangeError","setVolume");s.volume=t},get videoId(){return u.video.id},get videoWidth(){return s.videoWidth||u.video.width},get videoHeight(){return s.videoHeight||u.video.height},get readyState(){return s.videoElement.readyState},get telecine(){return s},get audioTracks(){var t;return(null==(t=s)||null==(t=t.video)?void 0:t.audioTracks)||[]},requestCompleteLiveSubtitles(){e.fire(Ma)},get hasAudio(){var t,n;return!(null==(t=s)||null==(t=t.video)||null==(t=t.audioTracks)||!t.length)||!(null==(n=s.manifest)||null==(n=n.audio)||!n.length)}};return u=c(u),r=new Jh(u,e,t),s=r.telecine,i=Object.create(s),Si(i,a)}let ef={};function rf(t="",n={}){var i;if(null!=(i=ef.en)&&i[t]&&(t=ef.en[t]),Object.keys(n).forEach((i=>{t=t.replace(new RegExp(`{${i}}`,"g"),n[i])})),t.match(/\{\w+}/))throw new Error("Missing token definition.");return t}function sf(t,n){return-1!==we(n).indexOf(t)}!function(t){const n=i=>i.length>=t.length?t.apply(this,i):(...t)=>n([].concat(w(i),t));n([])}(((t,n)=>Object.keys(t).every((i=>t[i]===n[i])))),function(...t){t.reduce(((t,n)=>(...i)=>t(n.apply(void 0,i))))}((function(t){return t?we(t.parentNode.children).indexOf(t):-1}),(function(t,n){for(;null!=(i=t)&&i.parentElement&&!sf(t,n);){var i;t=t.parentElement}return sf(t,n)?t:null}));let of=0;function uf(t="p"){return`${t}${++of}`}uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf(),uf();const cf={Nu:uf(),ku:uf(),Mu:uf(),Du:uf(),li:uf(),Xu:uf(),Pu:uf(),Cu:uf(),ju:uf(),Lu:uf(),Uu:uf(),xu:uf(),Fu:uf(),$u:uf(),Hu:uf(),Bu:uf(),Vu:uf(),Gu:uf(),Yu:uf(),Ku:uf(),Wu:uf(),qu:uf(),zu:uf(),Qu:uf(),Ju:uf(),Zu:uf(),tc:uf(),nc:uf(),ec:uf(),rc:uf(),sc:uf(),oc:uf(),uc:uf(),cc:uf(),ac:uf(),hc:uf(),fc:uf(),lc:uf(),dc:uf(),vc:uf(),Ec:uf(),yc:uf(),mc:uf(),Tc:uf(),bc:uf(),wc:uf(),gc:uf(),Ac:uf(),Sc:uf(),_c:uf(),Rc:uf(),Oc:uf(),Ic:uf(),Nc:uf(),kc:uf(),Mc:uf(),Dc:uf(),Xc:uf(),Pc:uf(),Cc:uf(),jc:uf(),Lc:uf(),Uc:uf(),xc:uf(),Fc:uf(),$c:uf(),Hc:uf(),Bc:uf(),Vc:uf(),Gc:uf(),Yc:uf(),Kc:uf(),Wc:uf(),qc:uf(),zc:uf(),Qc:uf(),Jc:uf(),Zc:uf(),ta:uf(),na:uf(),ia:uf(),ea:uf(),ra:uf(),sa:uf(),oa:uf(),ua:uf(),ca:uf(),aa:uf(),ha:uf(),fa:uf(),la:uf(),da:uf(),va:uf(),pa:uf(),Ea:uf(),ya:uf(),ma:uf(),Ta:uf(),ba:uf(),wa:uf(),ga:uf(),Aa:uf(),_loadVideo:uf(),Sa:uf(),_a:uf(),Ra:uf(),Oa:uf(),Ia:uf(),Na:uf(),ka:uf(),Ma:uf(),Da:uf(),Xa:uf(),Pa:uf(),Ca:uf(),ja:uf(),La:uf(),Ua:uf(),xa:uf(),Fa:uf(),On:uf(),$a:uf(),Ha:uf(),Ba:uf(),Va:uf(),Ga:uf(),Ya:uf(),Ka:uf(),Wa:uf(),qa:uf(),za:uf(),Qa:uf(),Ja:uf(),Za:uf(),th:uf(),nh:uf(),ih:uf(),eh:uf(),rh:uf(),sh:uf(),oh:uf(),uh:uf(),ah:uf(),hh:uf(),fh:uf(),dh:uf(),ph:uf(),Eh:uf(),yh:uf(),mh:uf(),Th:uf(),bh:uf(),wh:uf(),gh:uf(),Ah:uf(),Sh:uf(),_h:uf(),Rh:uf(),Oh:uf(),Ih:uf(),Nh:uf(),kh:uf(),Mh:uf(),Dh:uf()};uf(),uf(),uf(),uf();let af=function(t){return t.VP_PLAYER_UI_OVERLAYS="vp-player-ui-overlays",t.VP_PLAYER_UI_CONTAINER="vp-player-ui-container",t.VP_VIDEO="vp-video",t.VP_VIDEO_WRAPPER="vp-video-wrapper",t.VP_TELECINE="vp-telecine",t.VP_CONTROLS="vp-controls",t.VP_CAST_BUTTON="vp-cast-button",t.VP_CAPTIONS="vp-captions",t.VP_MENU="vp-menu",t.VP_SIDEDOCK="vp-sidedock",t.VP_TITLE="vp-title",t.VP_TARGET="vp-target",t.VP_PREVIEW="vp-preview",t.COMPASS_WRAPPER="compass-wrapper",t.STEREOSCOPIC="stereoscopic",t.CC="cc",t.CUSTOM_LOGO="custom-logo",t.FULLSCREEN="fullscreen",t.THUMB="thumb",t.LIKE_ICON="like-icon",t.WATCH_LATER_ICON="watch-later-icon",t.FILL="fill",t.SHOWFOCUS="showfocus",t.ADS_WRAPPER="vp-ads-wrapper",t.ADS_TAG="vp-ads-tag",t.ADS_COUNTDOWN="vp-ads-countdown",t.VP_SPIN="vp-spin",t}({}),hf=function(t){return t.EXCLUDE_GLOBAL_BUTTON_STYLES="exclude-global-button-styles",t.ENTER_FULLSCREEN_ICON="enter-fullscreen-icon",t.EXIT_FULLSCREEN_ICON="exit-fullscreen-icon",t.CONTENT_AREA_BACKGROUND_CONTAINER="vp-content-area-background",t.REMOTE_ACCESS_GATE="vp-remote-access-gate",t}({}),ff=function(t){return t.RIGHT_CONTENT_AREA="right-content-area",t.NEW_WINDOW_DESCRIPTION="new-window",t.VP_OVERLAY_LABELLEDBY="overlay-labelledby",t}({}),lf=function(t){return t.NOT_SUPPORTED="not-supported",t.DRM_FAILURE="drm-failure",t.DECODE="decode",t.NETWORK="network",t.UNKNOWN="unknown",t.TELECINE_FILE_ERROR="telecine-file-error",t.TELECINE_DOWNLOAD_ERROR="telecine-download-error",t.MEDIA_URL_EXPIRED="media-url-expired",t.SCANNER_ERROR="scanner-error",t.ERROR="error",t.LOAD_VIDEO_VIA_CONFIG="load-video-via-config-error",t.LOCAL_ACCESS_GATE_ERROR="local-access-gate-error",t}({});const df=()=>({type:lf.NETWORK,title:rf("Network error"),message:rf("A network hiccup interrupted playback. Please {linkStart}reload the player{linkEnd} and try again.",{linkStart:'<a href="javascript:window.location.reload()" rel="noopener">',linkEnd:"</a>"}),final:!0});var vf=Object.freeze({__proto__:null,BrowserNotSupported:()=>({type:lf.NOT_SUPPORTED,title:rf("Unsupported viewing environment"),message:rf("Your system is having trouble playing this video. For more information, see our {linkStart}Help Center{linkEnd}.",{linkStart:`<a href="https://help.vimeo.com/hc/en-us/articles/115015677227-Troubleshoot-player-error-messages" target="_blank" rel="noopener" aria-describedby="${ff.NEW_WINDOW_DESCRIPTION}">`,linkEnd:"</a>"}),deferred:!0,final:!0}),DRMFailure:()=>({type:lf.DRM_FAILURE,title:rf("Rights issue"),message:rf("We’re having trouble authorizing playback for this video. "),final:!0}),FilesNotPlayable:()=>({type:lf.NOT_SUPPORTED,title:rf("Player error"),message:rf("The player is having trouble. We’ll have it back up and running as soon as possible."),deferred:!0,final:!0}),MediaSrcNotSupportedError:()=>({type:lf.NOT_SUPPORTED,final:!1}),MediaDecodeError:()=>({type:lf.DECODE,final:!1}),MediaNetworkError:df,MediaUnknownError:()=>({type:lf.UNKNOWN,title:rf("Browser error"),message:rf("We’re having trouble playing this video file. Please {linkStart}reload the player{linkEnd} and try again.",{linkStart:'<a href="javascript:window.location.reload()" rel="noopener">',linkEnd:"</a>"}),final:!0}),FileError:()=>({type:lf.TELECINE_FILE_ERROR,final:!1}),DownloadError:()=>({type:lf.TELECINE_DOWNLOAD_ERROR,final:!1}),MediaUrlExpired:()=>({type:lf.MEDIA_URL_EXPIRED,title:rf("Playback error"),message:rf("We’re having trouble playing this video. Please {linkStart}reload the player{linkEnd} and try again.",{linkStart:'<a href="javascript:window.location.reload()" rel="noopener">',linkEnd:"</a>"}),final:!1}),ScannerError:()=>({type:lf.SCANNER_ERROR,final:!1}),PlayerError:()=>({type:lf.ERROR,title:rf("Player error"),message:rf("The player is having trouble. We’ll have it back up and running as soon as possible."),modal:!0,final:!0})});function pf(t){return Math.round(parseInt(t,16)/255*100)/100}function Ef(...t){if(1===t.length&&t[0]instanceof Ef){var n=t[0];return this.red=n.red,this.green=n.green,this.blue=n.blue,this.alpha=n.alpha,this.hue=n.hue,this.saturation=n.saturation,this.lightness=n.lightness,this}if(1===t.length){if("string"==typeof t[0]&&t[0].indexOf("rgb")>=0)return this.rgba=function(t){var n=/rgba?\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})(,\s*([\d.]+))?\)/.exec(t);if(!n)throw new Error("Invalid rgb value");return{red:parseInt(n[1],10),green:parseInt(n[2],10),blue:parseInt(n[3],10),alpha:parseFloat(n[5])||1}}(t[0]),this;if(!function(t){return"string"==typeof(t=t.replace("#",""))&&[3,4,6,8].includes(t.length)&&!isNaN(parseInt(t,16))}(`${t[0]}`))throw new Error("Invalid hex value");const{hex:n,alpha:i}=function(t){let n=1;return 4===(t=t.replace("#","")).length&&(n=pf(t.slice(3)+t.slice(3)),t=t.slice(0,3)),8===t.length&&(n=pf(t.slice(6,8)),t=t.slice(0,6)),{hex:t,alpha:n}}(`${t[0]}`);return this.hex=n,this.alpha=i,this}if(3===t.length||4===t.length){for(var i=0;i<3;i++)if(isNaN(parseInt(t[i],10))||parseInt(t[i],10)<0||parseInt(t[i],10)>255)throw new Error("Invalid rgb value");if(t[3]&&parseFloat(t[3])<0||parseFloat(t[3])>1)throw new Error("Invalid alpha value");return this.rgba={red:t[0],green:t[1],blue:t[2],alpha:parseFloat(t[3])||1},this}throw new Error("Invalid color")}Ef.prototype={get complement(){var t=this.clone();return t.rgb={red:255-this.red,green:255-this.green,blue:255-this.blue},t},get hex(){return Ef.rgbToHex(this.red,this.green,this.blue)},get hexWithAlpha(){const t=("0"+Math.round(255*this.alpha).toString(16)).slice(-2);return Ef.rgbToHex(this.red,this.green,this.blue)+t},set hex(t){return this.rgba=Ef.hexToRgb(t),this},get hsl(){return"hsl("+this.hue+","+this.saturation+"%,"+Math.round(this.lightness)+"%)"},set hsl(t){this.hue=t.hue,this.saturation=t.saturation,this.lightness=t.lightness;var n=Ef.hslToRgb(t.hue,t.saturation,t.lightness);return this.red=n.red,this.green=n.green,this.blue=n.blue,this.alpha=n.alpha,this},get luminance(){function t(t){return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}return.2126*t(this.red/255)+.7152*t(this.green/255)+.0722*t(this.blue/255)},get rgb(){return"rgb("+this.red+","+this.green+","+this.blue+")"},set rgb(t){return this.rgba=t,this},get rgba(){return"rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")"},set rgba(t){this.red=t.red,this.green=t.green,this.blue=t.blue,this.alpha=t.alpha||1;var n=Ef.rgbToHsl(t.red,t.green,t.blue);return this.hue=n.hue,this.saturation=n.saturation,this.lightness=n.lightness,this},get yiq(){return(299*this.red+587*this.green+114*this.blue)/1e3},clone:function(){return new Ef(this)},lighten:function(t,n,i){if(this.hsl={hue:this.hue,saturation:this.saturation,lightness:this.lightness+t},n&&i)for(var e=i.contrast(this).ratio;e<n&&(this.lighten(5),e=i.contrast(this).ratio,!(this.lightness>=100)););return this},darken:function(t,n,i){if(this.hsl={hue:this.hue,saturation:this.saturation,lightness:this.lightness-t},n&&i)for(var e=i.contrast(this).ratio;e<n&&(this.darken(5),e=i.contrast(this).ratio,!(this.lightness<=0)););return this},overlayOn:function(t){if(this.alpha>=1)return this;var n=this.clone();return n.rgba={red:n.red*this.alpha+t.red*t.alpha*(1-this.alpha),green:n.green*this.alpha+t.green*t.alpha*(1-this.alpha),blue:n.blue*this.alpha+t.blue*t.alpha*(1-this.alpha),alpha:n.alpha+t.alpha*(1-this.alpha)},n},contrast:function(t){var n=this.alpha;if(n>=1){t.alpha<1&&(t=t.overlayOn(this));var i=this.luminance+.05,e=t.luminance+.05,r=i/e;return e>i&&(r=1/r),{ratio:r=Math.round(10*r)/10,error:0,min:r,max:r}}var s=this.overlayOn(Ef.white).contrast(t).ratio,o=this.overlayOn(Ef.black).contrast(t).ratio,u=Math.max(s,o),c={red:Math.min(Math.max(0,(t.red-this.red*n)/(1-n)),255),green:Math.min(Math.max(0,(t.green-this.green*n)/(1-n)),255),blue:Math.min(Math.max(0,(t.blue-this.blue*n)/(1-n)),255)},a=this.clone();a.rgb=c;var h=this.overlayOn(a).contrast(t).ratio;return{ratio:Math.round((h+u)/2*10)/10,error:Math.round((u-h)/2*10)/10,min:h,max:u,closest:a,farthest:o===u?Ef.white:Ef.black}},wcagAACompliant:function(t){return this.contrast(t).ratio>=4.5},wcagAAACompliant:function(t){return this.contrast(t).ratio>=7},yiqContrastColor:function(){return this.yiq>=120?new Ef(0,0,0):new Ef(255,255,255)}},Ef.hexToRgb=function(t){var n;return 3===(t=String(t)).length||4===t.length?(n=/^#?([A-Fa-f0-9])([A-Fa-f0-9])([A-Fa-f0-9])$/i.exec(t))&&(n[1]+=n[1],n[2]+=n[2],n[3]+=n[3]):n=/^#?([A-Fa-f0-9]{2})([A-Fa-f0-9]{2})([A-Fa-f0-9]{2})$/i.exec(t),n?{red:parseInt(n[1],16),green:parseInt(n[2],16),blue:parseInt(n[3],16),alpha:1}:null},Ef.rgbToHex=function(t,n,i){return"#"+((1<<24)+(Math.round(t)<<16)+(Math.round(n)<<8)+Math.round(i)).toString(16).slice(1)},Ef.rgbToHsl=function(t,n,i){t/=255,n/=255,i/=255;var e,r=Math.max(t,n,i),s=Math.min(t,n,i),o=(r+s)/2,u=o;if(r===s)return{hue:0,saturation:0,lightness:100*u};var c=r-s;return e=u>.5?c/(2-r-s):c/(r+s),r===t?o=(n-i)/c+(n<i?6:0):r===n?o=(i-t)/c+2:r===i&&(o=(t-n)/c+4),o/=6,{hue:Math.round(360*o),saturation:Math.round(100*e),lightness:Math.round(100*u)}},Ef.hslToRgb=function(t,n,i){function e(t,n,i){return i<0&&(i+=1),i>1&&(i-=1),6*i<1?t+6*(n-t)*i:2*i<1?n:3*i<2?t+6*(2/3-i)*(n-t):t}if(t/=360,i/=100,0==(n/=100))return{red:Math.floor(255*i),green:Math.floor(255*i),blue:Math.floor(255*i)};var r=i<.5?i*(1+n):i+n-n*i,s=2*i-r;return{red:Math.floor(255*e(s,r,t+1/3)),green:Math.floor(255*e(s,r,t)),blue:Math.floor(255*e(s,r,t-1/3))}},Ef.hslToHex=function(t,n,i){var e=Ef.hslToRgb(t,n,i);return Ef.rgbToHex(e.red,e.green,e.blue)},Ef.white=new Ef("fff"),Ef.black=new Ef("000");let yf=function(t){return t.VimeoPlayer="VimeoPlayer",t.BackgroundPlayer="BackgroundPlayer",t.BarebonePlayer="BarebonePlayer",t}({});function mf(t){var n;return t.video.ecdn?t.video.live_event?"vimeo-live-ecdn":"vimeo-vod-ecdn":Va(t.embed.interactive)?null!=(n=t.request.flags)&&n.ott?"vimeo-ott-vod":t.video.live_event?"vimeo-live":t.embed.context&&-1!==t.embed.context.indexOf("Stock")?"vimeo-stock-vod":t.video.vod?"vimeo-ondemand":"vimeo-vod":"vimeo-interactive-vod"}Ni("Storage Access","color: #fff; background-color: #fc6203; padding: 2px; border-radius: 2px;"),function(t){return t.EMPTY="empty",t.LEAD_CAPTURE_FORM="lead_capture_form",t}({}).LEAD_CAPTURE_FORM,hf.REMOTE_ACCESS_GATE;const Tf=!!window.DD_RUM&&"function"==typeof window.DD_RUM.setViewContextProperty&&"function"==typeof window.DD_RUM.setGlobalContextProperty&&"function"==typeof window.DD_RUM.addError&&"function"==typeof window.DD_RUM.addAction;let bf=function(t){return t.WEB_GLOBAL="vimeo.web_global",t.COPY_VIDEO_EMBED_CODE="workflow.copy_video_embed_code",t.PLAYER_PERFORMANCE_MEASUREMENT="vimeo.player_performance_measurement",t.CHAPTER_SEGMENT_CLICK="vimeo.chapter_segment_click",t.CLICK="vimeo.click",t.TIMING_OBJECT_CONNECT="vimeo.timing_object_connect",t.TIMING_OBJECT_DISCONNECT="vimeo.timing_object_disconnect",t.EMBEDDED_TRANSCRIPT_CLICK="vimeo.embedded_transcript_click",t.CLOSED_CAPTIONS_CLICK="vimeo.closed_captions_click",t.MULTI_AUDIO_TRACK_CLICK="vimeo.multi_audio_track_click",t.VIEW_PLAYER_CSAT_V1="vimeo.view_player_csat_v1",t.SELECT_THUMBS_UP_PLAYER_CSAT_V1="vimeo.select_thumbs_up_player_csat_v1",t.SELECT_THUMBS_DOWN_PLAYER_CSAT_V1="vimeo.select_thumbs_down_player_csat_v1",t.DISMISS_PLAYER_CSAT_V1="vimeo.dismiss_player_csat_v1",t.DVR_MODE_ENTERED="vimeo.dvr_mode_entered",t.SEEK_BEHIND_LIVE_EDGE="vimeo.seek_behind_live_edge",t.SKIP_TO_LIVE_CLICK="vimeo.skip_to_live_click",t.SEEK_TO_LIVE_EDGE="vimeo.seek_to_live_edge",t.PLAY_VIDEO="vimeo.play_video",t.FINISH_VIDEO="vimeo.finish_video",t.START_VIDEO_SCRUB="vimeo.start_video_scrub",t.END_VIDEO_SCRUB="vimeo.end_video_scrub",t.WATCH_VIDEO_HEARTBEAT="vimeo.watch_video_heartbeat",t.EMBED_SEGMENT="vimeo.embed_segment",t.PLAY_SEGMENT="vimeo.play_segment",t.WATCH_FULL_VIDEO="vimeo.watch_full_video",t.SEEK_INSIDE_SEGMENT="vimeo.seek_inside_segment",t.SHARE_CHAPTER="vimeo.share_chapter",t.CHAPTER_PLAYED="vimeo.chapter_played",t.OPEN_AI_OPTIONS="vimeo.open_ai_options",t.PROCESS_STEP="vimeo.process_step",t.REMOTE_COMPONENT_LOADED="vimeo.remote_component_loaded",t.REMOTE_COMPONENT_TIMEOUT="vimeo.remote_component_timeout",t.REACH_TIME_ACTION="vimeo.reach_time_action",t.VIEW_HOTSPOT="vimeo.view_hotspot",t.CLICK_HOTSPOT="vimeo.click_hotspot",t.VIEW_OVERLAY="vimeo.view_overlay",t.CLOSE_OVERLAY="vimeo.close_overlay",t.CLICK_OVERLAY="vimeo.click_overlay",t.VIEW_POLL="vimeo.view_poll",t.VOTE_POLL="vimeo.vote_poll",t}({}),wf=function(t){return t.TEAM="team_context",t.ACTION="action_context",t.VIEW="view_context",t.WEB="web_context",t.VIDEO="video_context",t.PLAYER="player_context",t.LIVE="live_context",t.PRODUCT_ANALYTICS="product_analytics_context",t.TARGET_TEAM="target_team_context",t.USER_FACING_VIDEO_ANALYTICS="user_facing_video_analytics_context",t.THIRD_PARTY_INTEGRATION="third_party_integration_context",t}({}),gf=function(t){return t[t.WEB_GLOBAL=5]="WEB_GLOBAL",t[t.COPY_VIDEO_EMBED_CODE=5]="COPY_VIDEO_EMBED_CODE",t[t.PLAYER_PERFORMANCE_MEASUREMENT=1]="PLAYER_PERFORMANCE_MEASUREMENT",t[t.CHAPTER_SEGMENT_CLICK=2]="CHAPTER_SEGMENT_CLICK",t[t.CLICK=83]="CLICK",t[t.TIMING_OBJECT_CONNECT=1]="TIMING_OBJECT_CONNECT",t[t.TIMING_OBJECT_DISCONNECT=1]="TIMING_OBJECT_DISCONNECT",t[t.EMBEDDED_TRANSCRIPT_CLICK=6]="EMBEDDED_TRANSCRIPT_CLICK",t[t.CLOSED_CAPTIONS_CLICK=2]="CLOSED_CAPTIONS_CLICK",t[t.MULTI_AUDIO_TRACK_CLICK=2]="MULTI_AUDIO_TRACK_CLICK",t[t.PLAY_VIDEO=2]="PLAY_VIDEO",t[t.FINISH_VIDEO=2]="FINISH_VIDEO",t[t.START_VIDEO_SCRUB=2]="START_VIDEO_SCRUB",t[t.END_VIDEO_SCRUB=1]="END_VIDEO_SCRUB",t[t.WATCH_VIDEO_HEARTBEAT=4]="WATCH_VIDEO_HEARTBEAT",t[t.EMBED_SEGMENT=1]="EMBED_SEGMENT",t[t.PLAY_SEGMENT=1]="PLAY_SEGMENT",t[t.WATCH_FULL_VIDEO=1]="WATCH_FULL_VIDEO",t[t.SEEK_INSIDE_SEGMENT=1]="SEEK_INSIDE_SEGMENT",t[t.SHARE_CHAPTER=1]="SHARE_CHAPTER",t[t.CHAPTER_PLAYED=1]="CHAPTER_PLAYED",t[t.OPEN_AI_OPTIONS=4]="OPEN_AI_OPTIONS",t[t.PROCESS_STEP=1]="PROCESS_STEP",t[t.REMOTE_COMPONENT_LOADED=1]="REMOTE_COMPONENT_LOADED",t[t.REMOTE_COMPONENT_TIMEOUT=1]="REMOTE_COMPONENT_TIMEOUT",t[t.REACH_TIME_ACTION=1]="REACH_TIME_ACTION",t[t.VIEW_HOTSPOT=1]="VIEW_HOTSPOT",t[t.CLICK_HOTSPOT=1]="CLICK_HOTSPOT",t[t.VIEW_OVERLAY=1]="VIEW_OVERLAY",t[t.CLOSE_OVERLAY=1]="CLOSE_OVERLAY",t[t.CLICK_OVERLAY=1]="CLICK_OVERLAY",t[t.VIEW_POLL=1]="VIEW_POLL",t[t.VOTE_POLL=1]="VOTE_POLL",t[t.TEAM=5]="TEAM",t[t.ACTION=5]="ACTION",t[t.VIEW=3]="VIEW",t[t.WEB=25]="WEB",t[t.VIDEO=13]="VIDEO",t[t.PLAYER=5]="PLAYER",t[t.LIVE=6]="LIVE",t[t.PRODUCT_ANALYTICS=41]="PRODUCT_ANALYTICS",t[t.TARGET_TEAM=6]="TARGET_TEAM",t[t.USER_FACING_VIDEO_ANALYTICS=2]="USER_FACING_VIDEO_ANALYTICS",t[t.THIRD_PARTY_INTEGRATION=5]="THIRD_PARTY_INTEGRATION",t[t.DEFAULT=-1]="DEFAULT",t}({});bf.WEB_GLOBAL,gf.WEB_GLOBAL,bf.COPY_VIDEO_EMBED_CODE,gf.COPY_VIDEO_EMBED_CODE,bf.PLAYER_PERFORMANCE_MEASUREMENT,gf.PLAYER_PERFORMANCE_MEASUREMENT,bf.CHAPTER_SEGMENT_CLICK,gf.CHAPTER_SEGMENT_CLICK,bf.CLICK,gf.CLICK,bf.TIMING_OBJECT_CONNECT,gf.TIMING_OBJECT_CONNECT,bf.TIMING_OBJECT_DISCONNECT,gf.TIMING_OBJECT_DISCONNECT,bf.EMBEDDED_TRANSCRIPT_CLICK,gf.EMBEDDED_TRANSCRIPT_CLICK,bf.CLOSED_CAPTIONS_CLICK,gf.CLOSED_CAPTIONS_CLICK,bf.MULTI_AUDIO_TRACK_CLICK,gf.MULTI_AUDIO_TRACK_CLICK,bf.VIEW_PLAYER_CSAT_V1,gf.DEFAULT,bf.SELECT_THUMBS_UP_PLAYER_CSAT_V1,gf.DEFAULT,bf.SELECT_THUMBS_DOWN_PLAYER_CSAT_V1,gf.DEFAULT,bf.DISMISS_PLAYER_CSAT_V1,gf.DEFAULT,bf.DVR_MODE_ENTERED,gf.DEFAULT,bf.SEEK_BEHIND_LIVE_EDGE,gf.DEFAULT,bf.SKIP_TO_LIVE_CLICK,gf.DEFAULT,bf.SEEK_TO_LIVE_EDGE,gf.DEFAULT,bf.PLAY_VIDEO,gf.PLAY_VIDEO,bf.FINISH_VIDEO,gf.FINISH_VIDEO,bf.START_VIDEO_SCRUB,gf.START_VIDEO_SCRUB,bf.END_VIDEO_SCRUB,gf.END_VIDEO_SCRUB,bf.WATCH_VIDEO_HEARTBEAT,gf.WATCH_VIDEO_HEARTBEAT,bf.EMBED_SEGMENT,gf.EMBED_SEGMENT,bf.PLAY_SEGMENT,gf.PLAY_SEGMENT,bf.WATCH_FULL_VIDEO,gf.WATCH_FULL_VIDEO,bf.SEEK_INSIDE_SEGMENT,gf.SEEK_INSIDE_SEGMENT,bf.SHARE_CHAPTER,gf.SHARE_CHAPTER,bf.CHAPTER_PLAYED,gf.CHAPTER_PLAYED,bf.OPEN_AI_OPTIONS,gf.OPEN_AI_OPTIONS,bf.PROCESS_STEP,gf.PROCESS_STEP,bf.REMOTE_COMPONENT_LOADED,gf.REMOTE_COMPONENT_LOADED,bf.REMOTE_COMPONENT_TIMEOUT,gf.REMOTE_COMPONENT_TIMEOUT,bf.REACH_TIME_ACTION,gf.REACH_TIME_ACTION,bf.VIEW_HOTSPOT,gf.VIEW_HOTSPOT,bf.CLICK_HOTSPOT,gf.CLICK_HOTSPOT,bf.VIEW_OVERLAY,gf.VIEW_OVERLAY,bf.CLOSE_OVERLAY,gf.CLOSE_OVERLAY,bf.CLICK_OVERLAY,gf.CLICK_OVERLAY,bf.VIEW_POLL,gf.VIEW_POLL,bf.VOTE_POLL,gf.VOTE_POLL,wf.TEAM,gf.TEAM,wf.ACTION,gf.ACTION,wf.VIEW,gf.VIEW,wf.WEB,gf.WEB,wf.VIDEO,gf.VIDEO,wf.PLAYER,gf.PLAYER,wf.LIVE,gf.LIVE,wf.PRODUCT_ANALYTICS,gf.PRODUCT_ANALYTICS,wf.USER_FACING_VIDEO_ANALYTICS,gf.USER_FACING_VIDEO_ANALYTICS,wf.TARGET_TEAM,gf.TARGET_TEAM,wf.THIRD_PARTY_INTEGRATION,gf.THIRD_PARTY_INTEGRATION;const Af=[wf.PLAYER,wf.VIDEO,wf.WEB,wf.TEAM],Sf=[wf.TEAM,wf.VIDEO,wf.LIVE,wf.PRODUCT_ANALYTICS,wf.USER_FACING_VIDEO_ANALYTICS,wf.TARGET_TEAM,wf.THIRD_PARTY_INTEGRATION];bf.VIEW_PLAYER_CSAT_V1,[].concat(Af,[wf.VIEW]),bf.SELECT_THUMBS_UP_PLAYER_CSAT_V1,[].concat(Af,[wf.ACTION]),bf.SELECT_THUMBS_DOWN_PLAYER_CSAT_V1,[].concat(Af,[wf.ACTION]),bf.DISMISS_PLAYER_CSAT_V1,[].concat(Af,[wf.ACTION]),bf.DVR_MODE_ENTERED,[].concat(Af,[wf.VIEW,wf.LIVE,wf.PRODUCT_ANALYTICS]),bf.SEEK_BEHIND_LIVE_EDGE,[].concat(Af,[wf.ACTION,wf.LIVE,wf.PRODUCT_ANALYTICS]),bf.SKIP_TO_LIVE_CLICK,[].concat(Af,[wf.ACTION,wf.LIVE,wf.PRODUCT_ANALYTICS]),bf.SEEK_TO_LIVE_EDGE,[].concat(Af,[wf.ACTION,wf.LIVE,wf.PRODUCT_ANALYTICS]),bf.PLAY_VIDEO,[].concat(Af,[wf.ACTION,wf.LIVE,wf.PRODUCT_ANALYTICS,wf.TARGET_TEAM,wf.USER_FACING_VIDEO_ANALYTICS]),bf.FINISH_VIDEO,[].concat(Af,[wf.ACTION,wf.LIVE,wf.PRODUCT_ANALYTICS,wf.TARGET_TEAM,wf.USER_FACING_VIDEO_ANALYTICS]),bf.START_VIDEO_SCRUB,[].concat(Af,[wf.ACTION,wf.LIVE,wf.PRODUCT_ANALYTICS,wf.TARGET_TEAM,wf.USER_FACING_VIDEO_ANALYTICS]),bf.END_VIDEO_SCRUB,[].concat(Af,[wf.ACTION,wf.LIVE,wf.PRODUCT_ANALYTICS,wf.TARGET_TEAM,wf.USER_FACING_VIDEO_ANALYTICS]),bf.WATCH_VIDEO_HEARTBEAT,[].concat(Af,[wf.ACTION,wf.LIVE,wf.PRODUCT_ANALYTICS,wf.TARGET_TEAM,wf.USER_FACING_VIDEO_ANALYTICS]),bf.WATCH_FULL_VIDEO,[].concat(Af,[wf.ACTION,wf.PRODUCT_ANALYTICS]),bf.SEEK_INSIDE_SEGMENT,[].concat(Af,[wf.ACTION,wf.PRODUCT_ANALYTICS]),bf.SHARE_CHAPTER,[].concat(Af,[wf.ACTION,wf.PRODUCT_ANALYTICS]),bf.CHAPTER_PLAYED,[].concat(Af,[wf.ACTION,wf.PRODUCT_ANALYTICS]),bf.EMBED_SEGMENT,[].concat(Af,[wf.VIEW,wf.PRODUCT_ANALYTICS]),bf.PLAY_SEGMENT,[].concat(Af,[wf.ACTION,wf.PRODUCT_ANALYTICS]),bf.OPEN_AI_OPTIONS,wf.TEAM,wf.ACTION,wf.PRODUCT_ANALYTICS,wf.WEB,wf.VIDEO,bf.PROCESS_STEP,[].concat(Af,[wf.ACTION,wf.PRODUCT_ANALYTICS]),bf.REMOTE_COMPONENT_LOADED,[].concat(Af,[wf.ACTION,wf.PRODUCT_ANALYTICS,wf.THIRD_PARTY_INTEGRATION]),bf.REMOTE_COMPONENT_TIMEOUT,[].concat(Af,[wf.ACTION,wf.PRODUCT_ANALYTICS,wf.THIRD_PARTY_INTEGRATION]),bf.REACH_TIME_ACTION,[].concat(Sf,[wf.VIEW]),bf.VIEW_HOTSPOT,[].concat(Sf,[wf.VIEW]),bf.CLICK_HOTSPOT,[].concat(Sf,[wf.ACTION]),bf.VIEW_OVERLAY,[].concat(Sf,[wf.VIEW]),bf.CLOSE_OVERLAY,[].concat(Sf,[wf.ACTION]),bf.CLICK_OVERLAY,[].concat(Sf,[wf.ACTION]),bf.VIEW_POLL,[].concat(Sf,[wf.VIEW]),bf.VOTE_POLL,[].concat(Sf,[wf.ACTION]);var _f=i((function(t,n){Object.defineProperty(n,"nt",{value:!0}),n.Tracker=void 0;var i=function(){function t(){}return t.getAttributeTypeMap=function(){return t.attributeTypeMap},t.attributeTypeMap=[{name:"name",baseName:"name",type:"string"},{name:"version",baseName:"version",type:"string"}],t}();n.Tracker=i}));let Rf;const Of=new Uint8Array(16);function If(){if(!Rf&&(Rf="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Rf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Rf(Of)}var Nf=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function kf(t){return"string"==typeof t&&Nf.test(t)}const Mf=[];for(let t=0;t<256;++t)Mf.push((t+256).toString(16).slice(1));function Df(t,n=0){return Mf[t[n+0]]+Mf[t[n+1]]+Mf[t[n+2]]+Mf[t[n+3]]+"-"+Mf[t[n+4]]+Mf[t[n+5]]+"-"+Mf[t[n+6]]+Mf[t[n+7]]+"-"+Mf[t[n+8]]+Mf[t[n+9]]+"-"+Mf[t[n+10]]+Mf[t[n+11]]+Mf[t[n+12]]+Mf[t[n+13]]+Mf[t[n+14]]+Mf[t[n+15]]}let Xf,Pf,Cf=0,jf=0;function Lf(t){if(!kf(t))throw TypeError("Invalid UUID");let n;const i=new Uint8Array(16);return i[0]=(n=parseInt(t.slice(0,8),16))>>>24,i[1]=n>>>16&255,i[2]=n>>>8&255,i[3]=255&n,i[4]=(n=parseInt(t.slice(9,13),16))>>>8,i[5]=255&n,i[6]=(n=parseInt(t.slice(14,18),16))>>>8,i[7]=255&n,i[8]=(n=parseInt(t.slice(19,23),16))>>>8,i[9]=255&n,i[10]=(n=parseInt(t.slice(24,36),16))/1099511627776&255,i[11]=n/4294967296&255,i[12]=n>>>24&255,i[13]=n>>>16&255,i[14]=n>>>8&255,i[15]=255&n,i}function Uf(t,n,i){function e(t,e,r,s){var o;if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));const n=[];for(let i=0;i<t.length;++i)n.push(t.charCodeAt(i));return n}(t)),"string"==typeof e&&(e=Lf(e)),16!==(null===(o=e)||void 0===o?void 0:o.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+t.length);if(u.set(e),u.set(t,e.length),u=i(u),u[6]=15&u[6]|n,u[8]=63&u[8]|128,r){s=s||0;for(let t=0;t<16;++t)r[s+t]=u[t];return r}return Df(u)}try{e.name=t}catch(t){}return e.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",e.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",e}function xf(t){return 14+(t+64>>>9<<4)+1}function Ff(t,n){const i=(65535&t)+(65535&n);return(t>>16)+(n>>16)+(i>>16)<<16|65535&i}function $f(t,n,i,e,r,s){return Ff(function(t,n){return t<<n|t>>>32-n}(Ff(Ff(n,t),Ff(e,s)),r),i)}function Hf(t,n,i,e,r,s,o){return $f(n&i|~n&e,t,n,r,s,o)}function Bf(t,n,i,e,r,s,o){return $f(n&e|i&~e,t,n,r,s,o)}function Vf(t,n,i,e,r,s,o){return $f(n^i^e,t,n,r,s,o)}function Gf(t,n,i,e,r,s,o){return $f(i^(n|~e),t,n,r,s,o)}const Yf=Uf("v3",48,(function(t){if("string"==typeof t){const n=unescape(encodeURIComponent(t));t=new Uint8Array(n.length);for(let i=0;i<n.length;++i)t[i]=n.charCodeAt(i)}return function(t){const n=[],i=32*t.length,e="0123456789abcdef";for(let r=0;r<i;r+=8){const i=t[r>>5]>>>r%32&255,s=parseInt(e.charAt(i>>>4&15)+e.charAt(15&i),16);n.push(s)}return n}(function(t,n){t[n>>5]|=128<<n%32,t[xf(n)-1]=n;let i=1732584193,e=-271733879,r=-1732584194,s=271733878;for(let n=0;n<t.length;n+=16){const o=i,u=e,c=r,a=s;i=Hf(i,e,r,s,t[n],7,-680876936),s=Hf(s,i,e,r,t[n+1],12,-389564586),r=Hf(r,s,i,e,t[n+2],17,606105819),e=Hf(e,r,s,i,t[n+3],22,-1044525330),i=Hf(i,e,r,s,t[n+4],7,-176418897),s=Hf(s,i,e,r,t[n+5],12,1200080426),r=Hf(r,s,i,e,t[n+6],17,-1473231341),e=Hf(e,r,s,i,t[n+7],22,-45705983),i=Hf(i,e,r,s,t[n+8],7,1770035416),s=Hf(s,i,e,r,t[n+9],12,-1958414417),r=Hf(r,s,i,e,t[n+10],17,-42063),e=Hf(e,r,s,i,t[n+11],22,-1990404162),i=Hf(i,e,r,s,t[n+12],7,1804603682),s=Hf(s,i,e,r,t[n+13],12,-40341101),r=Hf(r,s,i,e,t[n+14],17,-1502002290),e=Hf(e,r,s,i,t[n+15],22,1236535329),i=Bf(i,e,r,s,t[n+1],5,-165796510),s=Bf(s,i,e,r,t[n+6],9,-1069501632),r=Bf(r,s,i,e,t[n+11],14,643717713),e=Bf(e,r,s,i,t[n],20,-373897302),i=Bf(i,e,r,s,t[n+5],5,-701558691),s=Bf(s,i,e,r,t[n+10],9,38016083),r=Bf(r,s,i,e,t[n+15],14,-660478335),e=Bf(e,r,s,i,t[n+4],20,-405537848),i=Bf(i,e,r,s,t[n+9],5,568446438),s=Bf(s,i,e,r,t[n+14],9,-1019803690),r=Bf(r,s,i,e,t[n+3],14,-187363961),e=Bf(e,r,s,i,t[n+8],20,1163531501),i=Bf(i,e,r,s,t[n+13],5,-1444681467),s=Bf(s,i,e,r,t[n+2],9,-51403784),r=Bf(r,s,i,e,t[n+7],14,1735328473),e=Bf(e,r,s,i,t[n+12],20,-1926607734),i=Vf(i,e,r,s,t[n+5],4,-378558),s=Vf(s,i,e,r,t[n+8],11,-2022574463),r=Vf(r,s,i,e,t[n+11],16,1839030562),e=Vf(e,r,s,i,t[n+14],23,-35309556),i=Vf(i,e,r,s,t[n+1],4,-1530992060),s=Vf(s,i,e,r,t[n+4],11,1272893353),r=Vf(r,s,i,e,t[n+7],16,-155497632),e=Vf(e,r,s,i,t[n+10],23,-1094730640),i=Vf(i,e,r,s,t[n+13],4,681279174),s=Vf(s,i,e,r,t[n],11,-358537222),r=Vf(r,s,i,e,t[n+3],16,-722521979),e=Vf(e,r,s,i,t[n+6],23,76029189),i=Vf(i,e,r,s,t[n+9],4,-640364487),s=Vf(s,i,e,r,t[n+12],11,-421815835),r=Vf(r,s,i,e,t[n+15],16,530742520),e=Vf(e,r,s,i,t[n+2],23,-995338651),i=Gf(i,e,r,s,t[n],6,-198630844),s=Gf(s,i,e,r,t[n+7],10,1126891415),r=Gf(r,s,i,e,t[n+14],15,-1416354905),e=Gf(e,r,s,i,t[n+5],21,-57434055),i=Gf(i,e,r,s,t[n+12],6,1700485571),s=Gf(s,i,e,r,t[n+3],10,-1894986606),r=Gf(r,s,i,e,t[n+10],15,-1051523),e=Gf(e,r,s,i,t[n+1],21,-2054922799),i=Gf(i,e,r,s,t[n+8],6,1873313359),s=Gf(s,i,e,r,t[n+15],10,-30611744),r=Gf(r,s,i,e,t[n+6],15,-1560198380),e=Gf(e,r,s,i,t[n+13],21,1309151649),i=Gf(i,e,r,s,t[n+4],6,-145523070),s=Gf(s,i,e,r,t[n+11],10,-1120210379),r=Gf(r,s,i,e,t[n+2],15,718787259),e=Gf(e,r,s,i,t[n+9],21,-343485551),i=Ff(i,o),e=Ff(e,u),r=Ff(r,c),s=Ff(s,a)}return[i,e,r,s]}(function(t){if(0===t.length)return[];const n=8*t.length,i=new Uint32Array(xf(n));for(let e=0;e<n;e+=8)i[e>>5]|=(255&t[e/8])<<e%32;return i}(t),8*t.length))}));var Kf={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Wf(t,n,i,e){switch(t){case 0:return n&i^~n&e;case 1:case 3:return n^i^e;case 2:return n&i^n&e^i&e}}function qf(t,n){return t<<n|t>>>32-n}const zf=Uf("v5",80,(function(t){const n=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){const n=unescape(encodeURIComponent(t));t=[];for(let i=0;i<n.length;++i)t.push(n.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);const e=t.length/4+2,r=Math.ceil(e/16),s=new Array(r);for(let n=0;n<r;++n){const i=new Uint32Array(16);for(let e=0;e<16;++e)i[e]=t[64*n+4*e]<<24|t[64*n+4*e+1]<<16|t[64*n+4*e+2]<<8|t[64*n+4*e+3];s[n]=i}s[r-1][14]=8*(t.length-1)/Math.pow(2,32),s[r-1][14]=Math.floor(s[r-1][14]),s[r-1][15]=8*(t.length-1)&4294967295;for(let t=0;t<r;++t){const e=new Uint32Array(80);for(let n=0;n<16;++n)e[n]=s[t][n];for(let t=16;t<80;++t)e[t]=qf(e[t-3]^e[t-8]^e[t-14]^e[t-16],1);let r=i[0],o=i[1],u=i[2],c=i[3],a=i[4];for(let t=0;t<80;++t){const i=Math.floor(t/20),s=qf(r,5)+Wf(i,o,u,c)+a+n[i]+e[t]>>>0;a=c,c=u,u=qf(o,30)>>>0,o=r,r=s}i[0]=i[0]+r>>>0,i[1]=i[1]+o>>>0,i[2]=i[2]+u>>>0,i[3]=i[3]+c>>>0,i[4]=i[4]+a>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,255&i[0],i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,255&i[1],i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,255&i[2],i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,255&i[3],i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,255&i[4]]}));var Qf=Object.freeze({__proto__:null,v1:function(t,n,i){let e=n&&i||0;const r=n||new Array(16);let s=(t=t||{}).node||Xf,o=void 0!==t.clockseq?t.clockseq:Pf;if(null==s||null==o){const n=t.random||(t.rng||If)();null==s&&(s=Xf=[1|n[0],n[1],n[2],n[3],n[4],n[5]]),null==o&&(o=Pf=16383&(n[6]<<8|n[7]))}let u=void 0!==t.msecs?t.msecs:Date.now(),c=void 0!==t.nsecs?t.nsecs:jf+1;const a=u-Cf+(c-jf)/1e4;if(a<0&&void 0===t.clockseq&&(o=o+1&16383),(a<0||u>Cf)&&void 0===t.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Cf=u,jf=c,Pf=o,u+=122192928e5;const h=(1e4*(268435455&u)+c)%4294967296;r[e++]=h>>>24&255,r[e++]=h>>>16&255,r[e++]=h>>>8&255,r[e++]=255&h;const f=u/4294967296*1e4&268435455;r[e++]=f>>>8&255,r[e++]=255&f,r[e++]=f>>>24&15|16,r[e++]=f>>>16&255,r[e++]=o>>>8|128,r[e++]=255&o;for(let t=0;t<6;++t)r[e+t]=s[t];return n||Df(r)},v3:Yf,v4:function(t,n,i){if(Kf.randomUUID&&!n&&!t)return Kf.randomUUID();const e=(t=t||{}).random||(t.rng||If)();if(e[6]=15&e[6]|64,e[8]=63&e[8]|128,n){i=i||0;for(let t=0;t<16;++t)n[i+t]=e[t];return n}return Df(e)},v5:zf,NIL:"00000000-0000-0000-0000-000000000000",version:function(t){if(!kf(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)},validate:kf,stringify:function(t,n=0){const i=Df(t,n);if(!kf(i))throw TypeError("Stringified UUID is invalid");return i},parse:Lf}),Jf=i((function(t,n){Object.defineProperty(n,"nt",{value:!0}),n.Envelope=void 0;var i=function(){function t(t,n){this.event=t,this.eid=(0,Qf.v4)(),this.ts_ms=Date.now(),this.created_at=Date.now(),this.Xh=new _f.Tracker,this.Ph=n}return Object.defineProperty(t.prototype,"tracker",{get:function(){return this.Xh},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"global",{get:function(){return this.Ph},enumerable:!1,configurable:!0}),t.getAttributeTypeMap=function(){return t.attributeTypeMap},t.attributeTypeMap=[{name:"eid",baseName:"eid",type:"string"},{name:"ts_ms",baseName:"ts_ms",type:"number"},{name:"created_at",baseName:"created_at",type:"number"},{name:"event",baseName:"event",type:"Event"},{name:"global",baseName:"global",type:"Event"},{name:"tracker",baseName:"tracker",type:"Tracker"}],t}();n.Envelope=i})),Zf=i((function(t,n){Object.defineProperty(n,"nt",{value:!0}),n.Event=void 0;var i=function(){function t(t,n,i){this.name=t,this.ts_ms=Date.now(),this.version=n,this.fields=i}return t.getAttributeTypeMap=function(){return t.attributeTypeMap},t.attributeTypeMap=[{name:"name",baseName:"name",type:"string"},{name:"ts_ms",baseName:"ts_ms",type:"number"},{name:"version",baseName:"version",type:"number"},{name:"fields",baseName:"fields",type:"object"}],t}();n.Event=i})),tl=i((function(t,n){Object.defineProperty(n,"nt",{value:!0}),n.EventContext=void 0;var i=function(){function t(t,n,i){this.name=t,this.ts_ms=Date.now(),this.version=n,this.fields=i}return t.getAttributeTypeMap=function(){return t.attributeTypeMap},t.attributeTypeMap=[{name:"name",baseName:"name",type:"string"},{name:"ts_ms",baseName:"ts_ms",type:"number"},{name:"version",baseName:"version",type:"number"},{name:"fields",baseName:"fields",type:"object"}],t}();n.EventContext=i})),nl=i((function(t,n){Object.defineProperty(n,"nt",{value:!0}),n.GlobalContext=void 0;n.GlobalContext=function(t,n,i){this.name=t,this.ts_ms=Date.now(),this.version=n,this.fields=i}})),il=i((function(t,i){var e=n&&n.Ch||(Object.create?function(t,n,i,e){void 0===e&&(e=i);var r=Object.getOwnPropertyDescriptor(n,i);r&&!("get"in r?!n.nt:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return n[i]}}),Object.defineProperty(t,e,r)}:function(t,n,i,e){void 0===e&&(e=i),t[e]=n[i]}),r=n&&n.jh||function(t,n){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(n,i)||e(n,t,i)};Object.defineProperty(i,"nt",{value:!0}),i.ObjectSerializer=void 0,r(Jf,i),r(Zf,i),r(tl,i),r(_f,i),r(nl,i);var s=Zf,o=tl,u=_f,c=["string","boolean","double","integer","long","float","number","any"],a={},h={Envelope:Jf.Envelope,Event:s.Event,Tracker:u.Tracker,EventContext:o.EventContext},f=function(){function t(){}return t.findCorrectType=function(t,n){if(null==t)return n;if(-1!==c.indexOf(n.toLowerCase()))return n;if("Date"===n)return n;if(a[n])return n;if(!h[n])return n;var i=h[n].discriminator;if(null==i)return n;if(t[i]){var e=t[i];return h[e]?e:n}return n},t.serialize=function(n,i){if(null==n)return n;if(-1!==c.indexOf(i.toLowerCase()))return n;if(0===i.lastIndexOf("Array<",0)){var e=i.replace("Array<","");e=e.substring(0,e.length-1);var r=[];for(var s in n){var o=n[s];r.push(t.serialize(o,e))}return r}if("Date"===i)return n.toISOString();if(a[i])return n;if(!h[i])return n;i=this.findCorrectType(n,i);var u=h[i].getAttributeTypeMap(),f={};for(var s in u){var l=u[s];f[l.baseName]=t.serialize(n[l.name],l.type)}return f},t.deserialize=function(n,i){if(i=t.findCorrectType(n,i),null==n)return n;if(-1!==c.indexOf(i.toLowerCase()))return n;if(0===i.lastIndexOf("Array<",0)){var e=i.replace("Array<","");e=e.substring(0,e.length-1);var r=[];for(var s in n){var o=n[s];r.push(t.deserialize(o,e))}return r}if("Date"===i)return new Date(n);if(a[i])return n;if(!h[i])return n;var u=new h[i],f=h[i].getAttributeTypeMap();for(var s in f){var l=f[s];u[l.name]=t.deserialize(n[l.baseName],l.type)}return u},t}();i.ObjectSerializer=f})),el=i((function(t,n){Object.defineProperty(n,"nt",{value:!0}),n.formatRequestEvent=n.parseJwt=n.getCookie=void 0,n.getCookie=function(t){if("undefined"==typeof document)return null;var n=document.cookie.match(new RegExp("(;\\s)?".concat(t,"=")));if(!n||0==n.length||void 0===n.index)return null;var i=document.cookie.indexOf(";",n.index+1),e=n.index+n[0].length,r=-1===i?document.cookie.substr(e):document.cookie.substring(e,i);return decodeURIComponent(r)},n.parseJwt=function(t){var n=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),i=decodeURIComponent(atob(n).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(i)},n.formatRequestEvent=function(t){var n=t.split(".");if(n.length<=2)return t;var i=n.pop();return"".concat(n.join("_"),".").concat(i)}})),rl=i((function(t,i){var e,s=n&&n.Lh||function(t,n,i,e){return new(i||(i=r))((function(r,s){function o(t){try{c(e.next(t))}catch(t){s(t)}}function u(t){try{c(e.throw(t))}catch(t){s(t)}}function c(t){t.done?r(t.value):function(t){return t instanceof i?t:new i((function(n){n(t)}))}(t.value).then(o,u)}c((e=e.apply(t,n||[])).next())}))},o=n&&n.Uh||function(t,n){var i,e,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof z&&(s[z.iterator]=function(){return this}),s;function u(u){return function(c){return function(u){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(o=0)),o;)try{if(i=1,e&&(r=2&u[0]?e.return:u[0]?e.throw||((r=e.return)&&r.call(e),0):e.next)&&!(r=r.call(e,u[1])).done)return r;switch(e=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,e=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==u[0]&&2!==u[0])){o=0;continue}if(3===u[0]&&(!r||u[1]>r[0]&&u[1]<r[3])){o.label=u[1];break}if(6===u[0]&&o.label<r[1]){o.label=r[1],r=u;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(u);break}r[2]&&o.ops.pop(),o.trys.pop();continue}u=n.call(t,o)}catch(t){u=[6,t],e=0}finally{i=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},u=n&&n.xh||function(t){var n="function"==typeof z&&z.iterator,i=n&&t[n],e=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},c=n&&n.Fh||function(t,n){var i="function"==typeof z&&t[z.iterator];if(!i)return t;var e,r,s=i.call(t),o=[];try{for(;(void 0===n||n-- >0)&&!(e=s.next()).done;)o.push(e.value)}catch(t){r={error:t}}finally{try{e&&!e.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return o};Object.defineProperty(i,"nt",{value:!0}),i.BigPictureClient=i.Configuration=i.Service=void 0,function(t){t.FRESNEL_PROD="https://fresnel-events.vimeocdn.com",t.FRESNEL_PROD_CN="https://fresnel-events.videoji.cn",t.FRESNEL_DEV="https://fresnel-event-staging.vimeows.com",t.EVENTS_PROD="https://lensflare.vimeo.com"}(e=i.Service||(i.Service={}));var a=function(t,n,i,e){void 0===n&&(n=null),void 0===i&&(i=null),void 0===e&&(e=""),this.service=t,this.globalBPO=n,this.contexts=i,this.endpoint=e};i.Configuration=a;var h=function(){function t(){}return Object.defineProperty(t,"isInitalized",{get:function(){return Boolean(t.conf.globalBPO)},enumerable:!1,configurable:!0}),t.configure=function(n){t.conf=n,t.WAIT_QUEUE.length>0&&(t.WAIT_QUEUE.map((function(n){var i=n.event,e=n.contexts;e?t.sendEventWithContexts(i,e):t.sendEvent(i)})),t.WAIT_QUEUE=[])},t.updateObject=function(n,i){return s(this,void 0,void 0,(function(){var e,r,s,a,h,f,l;return o(this,(function(o){try{for(e=u(Object.entries(n)),r=e.next();!r.done;r=e.next())if(s=c(r.value,2),a=s[0],h=s[1],a in i){if(h instanceof Object)return i[a]instanceof Object?(t.updateObject(h,i[a]),[2]):(i[a]=h,[2]);i[a]=h}}catch(t){f={error:t}}finally{try{r&&!r.done&&(l=e.return)&&l.call(e)}finally{if(f)throw f.error}}return[2]}))}))},t.updateContext=function(n){return s(this,void 0,void 0,(function(){return o(this,(function(i){return"global"==n.context&&t.conf.globalBPO&&t.updateObject(n.fields,t.conf.globalBPO.fields),[2]}))}))},t.sendEvent=function(n,i){return s(this,void 0,void 0,(function(){var e,r,s,u,c,a;return o(this,(function(o){switch(o.label){case 0:if(null==n)throw new Error("Required parameter event was null or undefined when calling sendEvent.");return t.isInitalized?(e=JSON.stringify(il.ObjectSerializer.serialize([new Jf.Envelope(n,this.conf.globalBPO)],"Array<Envelope>")),r=(0,el.formatRequestEvent)(n.name),s=""!==this.conf.endpoint?this.conf.endpoint:this.conf.service,u="".concat(s,"/add/").concat(encodeURIComponent(r)),navigator.sendBeacon&&!i?[3,2]:(c={method:"POST",headers:{"Content-Type":"application/json","User-Agent":navigator.userAgent,Origin:location.origin,Referer:document.referrer},body:e},i&&(c.headers.Authorization=i),[4,fetch(u,c)])):(t.WAIT_QUEUE.push({event:n}),t.waitAndFlushQueue(),[2]);case 1:return o.sent(),[3,3];case 2:a=new Blob([e]),navigator.sendBeacon(u,a),o.label=3;case 3:return[2]}}))}))},t.sendEventWithContexts=function(n,i,e){return s(this,void 0,void 0,(function(){var r,s,a,h,f,l,d,v,p,E,y,m,T,b,w,g;return o(this,(function(o){switch(o.label){case 0:if(null==n)throw new Error("Required parameter event was null or undefined when calling sendEvent.");if(!t.isInitalized)return t.WAIT_QUEUE.push({event:n,contexts:i}),t.waitAndFlushQueue(),[2];r=new Jf.Envelope(n,this.conf.globalBPO),(s=il.ObjectSerializer.serialize([r],"Array<Envelope>"))[0].contexts={};try{for(a=u(Object.entries(i)),h=a.next();!h.done;h=a.next())f=c(h.value,2),l=f[0],d=f[1],v=il.ObjectSerializer.serialize(d,"EventContext"),s[0].contexts[l]=v}catch(t){w={error:t}}finally{try{h&&!h.done&&(g=a.return)&&g.call(a)}finally{if(w)throw w.error}}return p=JSON.stringify(s),E=(0,el.formatRequestEvent)(n.name),y=""!==this.conf.endpoint?this.conf.endpoint:this.conf.service,m="".concat(y,"/add/").concat(encodeURIComponent(E)),navigator.sendBeacon&&!e?[3,2]:(T={method:"POST",headers:{"Content-Type":"application/json","User-Agent":navigator.userAgent,Origin:location.origin,Referer:document.referrer},body:p},e&&(T.headers.Authorization=e),[4,fetch(m,T)]);case 1:return o.sent(),[3,3];case 2:b=new Blob([p]),navigator.sendBeacon(m,b),o.label=3;case 3:return[2]}}))}))},t.waitAndFlushQueue=function(){t.flushQueueTimeoutHandler||(t.flushQueueTimeoutHandler=setTimeout((function(){t.WAIT_QUEUE.length>0&&(t.WAIT_QUEUE=[])}),t.FLUSH_QUEUE_TIMEOUT))},t.FLUSH_QUEUE_TIMEOUT=1e4,t.conf=new a(e.FRESNEL_PROD),t.WAIT_QUEUE=[],t}();i.BigPictureClient=h})),sl=i((function(t,n){Object.defineProperty(n,"nt",{value:!0})}));function ol(t,n,i=.1){const e=function(t){return Math.random()<=t}(i);e&&((t,n={})=>{if(Tf&&t){const i=Object.assign({},n,{manually_captured:1});window.DD_RUM.addError(t,i)}})(t,n)}i((function(t,i){var e=n&&n.Ch||(Object.create?function(t,n,i,e){void 0===e&&(e=i);var r=Object.getOwnPropertyDescriptor(n,i);r&&!("get"in r?!n.nt:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return n[i]}}),Object.defineProperty(t,e,r)}:function(t,n,i,e){void 0===e&&(e=i),t[e]=n[i]}),r=n&&n.jh||function(t,n){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(n,i)||e(n,t,i)};Object.defineProperty(i,"nt",{value:!0}),r(rl,i),r(il,i),r(sl,i)})),window.addEventListener("unhandledrejection",(t=>{t.preventDefault(),t.reason&&ol(t.reason,{unhandled_rejection:1})}));var ul={setUp:function(t,n=yf.VimeoPlayer){((t,n=yf.VimeoPlayer)=>{if(Tf){var i,e,r;const s={js_modules:!1,version_js:t.request.build.js,version_backend:t.request.build.backend,visibility_state:document.visibilityState,vimeo_session:t.request.session,locale:t.request.lang,product:mf(t),video_embed_permission:t.video.embed_permission,video_privacy:t.video.privacy,live_session_id:null==(i=t.video.live_event)?void 0:i.id,rawUserAgent:navigator.userAgent,background_mode:Number(1===(null==(e=t.embed)||null==(e=e.settings)?void 0:e.background)),player_name:n,owner_account_type:null==(r=t.video.owner)?void 0:r.account_type};if(t.request.ab_tests)for(const n in t.request.ab_tests){const i=t.request.ab_tests[n];s[`${n}_test`]=1,s[`${n}_group`]=i.group;for(const t in i.data)s[`${n}_data_${t}`]=i.data[t]}t.user.logged_in&&(s.userId=t.user.id);for(let t in s)window.DD_RUM.setGlobalContextProperty(t,s[t]);if(n){const t=`has${n}`;window.DD_RUM.setViewContextProperty(t,1)}}})(t,n)},captureException:ol,captureMessage:function(t){},captureBreadcrumb:function(t){(t=>{Tf&&window.DD_RUM.addAction(t)})(t)}};let cl;function al({events:t}){let n=null,i=null,e=null,s=null,o=null,u={video:{},request:{},embed:{}};function c(){return i&&i-6e4<=Date.now()}function a(t){const n=Date.now()+1e3*t;return o=setTimeout((()=>{"onLine"in navigator&&!navigator.onLine||s||(s=f().catch(ul.captureException))}),1e3*t-6e4-5e3),n}function h(t,e={}){var s,c;clearTimeout(o);const h=n;if(isNaN(t)&&"string"!=typeof t){n=t,i=a(n.request.expires);let e=new URL(window.location.href);const s=e.searchParams.get("referrer"),o=e.searchParams.get("player_id");return s&&(n.request.referrer=s,e.searchParams.delete("referrer")),o&&(n.embed.player_id=o,e.searchParams.delete("player_id")),r.resolve({old:h,loaded:n})}Date.now(),u=kh(u,n);const f=u.request.referrer;return f&&(e.referrer=f),e.s=u.request.signature,e.expires=u.request.expires,e.time=u.request.timestamp,cl||(cl=function(t){return function(t){return/^(https?:)?\/\/(.+)\.(((vimeo(ws)?|vimeo-(enterprise|work))\.(com|dev|work))|(videoji|videoshipinurl)\.(hk|cn))(?=$|\/)/.test(t)}(t)?function(t){try{return new URL(t).origin}catch(t){}const n=document.createElement("a");return n.href=t,n.origin?n.origin:`${n.protocol.replace(":","")}://${n.host}`}(t):""}(t)),We(function(t,n,i){if(function(t){return/^(https?:)?\/\/(.+)\.((vimeo(ws)?|vimeo-(enterprise|work))\.(com|dev|work)|(videoji|videoshipinurl)\.(hk|cn))\/video\/\d+\/config(?=$|\?)/.test(t)}(n))return n;const e=function(t){if(function(t){return!isNaN(t)&&parseInt(Number(t),10)==t&&!isNaN(parseInt(t,10))}(t))return parseInt(t,10);const n=t.match(/(video|\.com|\.dev)\/(\d+)/);if(!n||n.length<3)throw new Error("Please provide a Vimeo URL with a valid clip id.");return parseInt(n[2],10)}(n),r=xi(window.location.search),s=xi(`${n}`.split("?")[1]);return Fi(`${t}/video/${e}/config`,Object.assign(r,s,i))}(cl||(null!=(s=n)&&s.player_url?`https://${null==(c=n)?void 0:c.player_url}`:""),t,e),{withCredentials:!0,throwHttpErrors:!1}).json().then((t=>(n=t,7!==n.view&&(i=a(n.request.expires),u.request.session&&n.video.id===u.video.id&&(n.request.session=u.request.session),f&&(n.request.referrer=f),u.embed.player_id&&(n.embed.player_id=u.embed.player_id),u.embed.on_site&&(n.embed.on_site=1,n.embed.context=u.embed.context)),Date.now(),{old:h,loaded:n}))).catch((t=>{ul.captureException(t)}))}function f(){var e;clearTimeout(o),Date.now();const r=null==(e=n)?void 0:e.request.referrer,{signature:u,session:c,timestamp:h,expires:f,atid:l}=n.request,d=n.request.ott_chromecast_token;let v=`https://${n.player_url}/video/${n.video.id}/config/request?atid=${l}&session=${c}&signature=${u}&time=${h}&expires=${f}`;return d&&(v=`${v}&ott_chromecast_token=${d}`),r&&(v+=`${-1===v.indexOf("?")?"?":"&"}referrer=${encodeURIComponent(r)}`),We(v,{withCredentials:!0,retry:3}).json().then((e=>(n.request=e,r&&(n.request.referrer=r),i=a(n.request.expires),Date.now(),s=null,t.fire(cf.va),n.request))).catch((n=>{const i=df();throw t.fire(cf.ku,i.type,i),n}))}return window.addEventListener("online",(()=>{c()&&(s=f().catch(ul.captureException))})),t.on(cf.ku,(t=>{s||"media-url-expired"!==t||(s=f().catch(ul.captureException))})),{get isExpired(){return c()},load:(t,n)=>h(t,n),reload(){var t;return null!=(t=n)&&t.video.id?h(n.video.id):r.reject(new Error("No config loaded."))},toJSON:()=>n,get config(){return n},set config(t){n=t},verify:()=>c()?(s||(s=f()),s):r.resolve(n.request),refreshAssetUrls:()=>f(),get ot(){return e},set ot(t){e=t}}}t.BarebonePlayer=function(t,n){Sh(ul);let i=null;const e=document.createElement("style");e.setAttribute("type","text/css"),e.textContent="\n    .vp-video-wrapper {\n        position: relative;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n    }\n\n    .vp-telecine video {\n        width: 100%;\n        height: auto;\n    }\n\n    .vp-geo-blocked {\n        font-size: 1rem;\n        margin: 0 auto;\n        text-align: center;\n    }\n",t.appendChild(e);const s=document.createElement("div");s.className=af.VP_VIDEO_WRAPPER;const o=document.createElement("div");o.className=af.VP_VIDEO;const u=document.createElement("div");u.className=af.VP_TELECINE,o.appendChild(u),s.appendChild(o),t.appendChild(s);const c=new bi,a=new al({events:c});function h(t){const n=vf[t.name],i="function"==typeof n?n():{};i.type===lf.MEDIA_URL_EXPIRED&&c.fire(cf.ku,i.type,i)}return c.on(cf.va,(function(){null!=a&&a.config&&i&&i.loadVideo(a.config)})),a.load(n).then((({loaded:t})=>{var n;if(null!=(n=t.request)&&n.urls.js&&function(t){Ri=t.substring(0,t.lastIndexOf("/")+1)}(t.request.urls.js),ul.setUp(a.config,yf.BarebonePlayer),i=new nf(u,a.config),14===a.config.view){const t='<h1 class="vp-geo-blocked">This video is not available in your region</h1>';return s.insertAdjacentHTML("beforeend",t),T(T({},i),{},{play:()=>r.resolve(),get quality(){return""},set quality(t){},get volume(){return 0},set volume(t){}})}return i.on(he.ERROR,h),i.loadVideo(a.config),i}))},t.requestModule=er,Object.defineProperty(t,"nt",{value:!0})}(this.window=this.window||{});

